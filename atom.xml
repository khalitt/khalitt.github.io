<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title></title>
  
  
  <link href="https://khalitt.github.io/atom.xml" rel="self"/>
  
  <link href="https://khalitt.github.io/"/>
  <updated>2022-06-19T13:01:27.312Z</updated>
  <id>https://khalitt.github.io/</id>
  
  <author>
    <name>Walter</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>hexo algolia ä½¿ç”¨</title>
    <link href="https://khalitt.github.io/2021/10/16/hexo-algolia-usage/"/>
    <id>https://khalitt.github.io/2021/10/16/hexo-algolia-usage/</id>
    <published>2021-10-16T04:26:33.000Z</published>
    <updated>2022-06-19T13:01:27.312Z</updated>
    
    <content type="html"><![CDATA[<p>å‚è€ƒ</p><ol><li><a href="https://blog.ccknbc.cc/posts/hexo-butterfly-algolia/">https://blog.ccknbc.cc/posts/hexo-butterfly-algolia/</a> ç›¸å½“è¯¦ç»†ï¼Œä»‹ç»äº†ä»…ä»…æœç´¢æ ‡é¢˜äº†æœç´¢å…¨æ–‡çš„ä¸¤ç§æ–¹æ³•</li><li><a href="https://raycoder.me/p/hugo-search-with-algolia/">Hugoåšå®¢æ­é…Algoliaå®ç°ç«™å†…æœç´¢</a>ï¼Œä»‹ç»äº†å…¨æ–‡æœç´¢çš„æƒ…å†µä¸‹è‡ªåŠ¨æ›´æ–°</li></ol><h1 id="hexo-algoliaå’Œhexo-algoliasearchçš„åŒºåˆ«"><a href="#hexo-algoliaå’Œhexo-algoliasearchçš„åŒºåˆ«" class="headerlink" title="hexo-algoliaå’Œhexo-algoliasearchçš„åŒºåˆ«"></a>hexo-algoliaå’Œhexo-algoliasearchçš„åŒºåˆ«</h1><blockquote><p>åˆ†åˆ«æ˜¯ <a href="https://github.com/oncletom/hexo-algolia">hexo-algolia</a> å’Œ <a href="https://github.com/LouisBarranqueiro/hexo-algoliasearch">hexo-algoliasearch</a>ï¼Œä»–ä»¬çš„ä»‹ç»åˆ†åˆ«ä¸º</p><blockquote><p>Index your hexo website content to Algolia Search.<br>ğŸ” A plugin to index posts of your Hexo blog on Algolia</p></blockquote><p>ä¹Ÿå°±å¾ˆæ˜æ˜¾äº†ï¼Œ<strong>å¦‚æœä½ æƒ³è¦å…¨ç«™æœç´¢å¯é€‰æ‹©å‰è€…ï¼Œå¦‚æœä½ åªæƒ³æœç´¢æ–‡ç« ä¸¤è€…å…¼å¯</strong>ã€‚<strong>ä½†å‰è€…ä¸èƒ½å°†æ–‡ç« å†…å®¹ä½œä¸ºç´¢å¼•ä¸Šä¼ </strong>ï¼Œåè€…å¯å…¨æ–‡ä¸Šä¼ ã€‚<br>ç„¶åå°±æ˜¯ HEXO é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œä¸‹æ–‡åŸºæœ¬ä»¥ <code>hexo-algoliasearch</code> ä¸ºä¾‹ï¼Œå› ä¸ºæˆ‘ä¸ªäººè®¤ä¸ºè®¿å®¢åªä¼šæœæ–‡ç« å§ï¼ˆäº‹å®ä¸Šæ˜¯æœç´¢æ ¹æœ¬æ²¡äººç”¨ï¼Œæ¯•ç«Ÿä¹Ÿæ ¹æœ¬æ²¡äººè®¿é—®ï¼‰ï¼Œhexo-algolia å¯æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œæ³¨æ„é…ç½®å’Œå‘½ä»¤çš„åŒºåˆ«</p></blockquote><h1 id="ä»…ä»…æœç´¢æ ‡é¢˜"><a href="#ä»…ä»…æœç´¢æ ‡é¢˜" class="headerlink" title="ä»…ä»…æœç´¢æ ‡é¢˜"></a>ä»…ä»…æœç´¢æ ‡é¢˜</h1><p>ç›´æ¥ç”¨hexo-algoliaå³å¯</p><p>ç„¶åä¿®æ”¹ç›®å½•ä¸‹çš„<code>_config.butterfly.yml.yml</code>å³å¯</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">algolia_search</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">hits</span><span class="token punctuation">:</span>    <span class="token key atrule">per_page</span><span class="token punctuation">:</span> <span class="token number">6</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åå†æŒ‰ç…§ <a href="https://github.com/oncletom/hexo-algolia">hexo-algolia</a> é…ç½®ä¸€ä¸‹<code>_config.yml</code>ä¸­å…³äºAlgoliaçš„é€‰é¡¹</p><p><img src="/2021/10/16/hexo-algolia-usage/image-20211016124101223.png" alt="image-20211016124101223"></p><h1 id="æœç´¢å…¨æ–‡ï¼ˆæ–‡ç« å†…å®¹ï¼‰"><a href="#æœç´¢å…¨æ–‡ï¼ˆæ–‡ç« å†…å®¹ï¼‰" class="headerlink" title="æœç´¢å…¨æ–‡ï¼ˆæ–‡ç« å†…å®¹ï¼‰"></a>æœç´¢å…¨æ–‡ï¼ˆæ–‡ç« å†…å®¹ï¼‰</h1><p>åŸºæœ¬æŒ‰ç…§è¿™ç¯‡æ–‡ç« æ¥å°±å¯ä»¥äº†<a href="https://blog.ccknbc.cc/posts/hexo-butterfly-algolia/">https://blog.ccknbc.cc/posts/hexo-butterfly-algolia/</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å‚è€ƒ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://blog.ccknbc.cc/posts/hexo-butterfly-algolia/&quot;&gt;https://blog.ccknbc.cc/posts/hexo-butterfly-algolia/&lt;/a&gt; ç›¸</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>hexo new æ—¶çš„è·¯å¾„åˆ›å»º</title>
    <link href="https://khalitt.github.io/2021/10/16/misc/hexo-specify-path-when-creating/"/>
    <id>https://khalitt.github.io/2021/10/16/misc/hexo-specify-path-when-creating/</id>
    <published>2021-10-16T04:15:37.000Z</published>
    <updated>2022-06-19T13:01:27.328Z</updated>
    
    <content type="html"><![CDATA[<p>åŸºæœ¬ç”¨æ³•å¦‚ä¸‹</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new layout <span class="token punctuation">[</span>article_name<span class="token punctuation">]</span> -p <span class="token punctuation">[</span>path<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>æ³¨æ„pathæœ«å°¾ä¸ç”¨åŠ <code>.md</code></strong></p><h1 id="hexo-new-layout-article-name-p-article-name"><a href="#hexo-new-layout-article-name-p-article-name" class="headerlink" title="hexo new layout [article_name] -p [article_name]"></a><code>hexo new layout [article_name] -p [article_name]</code></h1><p>è¿™ç§é»˜è®¤æ˜¯åœ¨<code>source/_posts</code>ä¸‹åˆ›å»º</p><p>æ¯”å¦‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new article-img tttt -p tttt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2021/10/16/misc/hexo-specify-path-when-creating/image-20211016122015940.png" alt="image-20211016122015940"></p><h1 id="hexo-new-layout-article-name-p-subdir-article-name"><a href="#hexo-new-layout-article-name-p-subdir-article-name" class="headerlink" title="hexo new layout [article_name] -p subdir/[article_name]"></a><code>hexo new layout [article_name] -p subdir/[article_name]</code></h1><p>è¿™ç§ç­‰ä»·äºåœ¨<code>source/_post/subdir</code>åˆ›å»ºï¼Œå¦‚æœ<code>subdir</code>ä¸å­˜åœ¨åˆ™ä¼šè‡ªåŠ¨åˆ›å»º</p><pre class="line-numbers language-none"><code class="language-none">hexo new article-img tttt -p misc_1&#x2F;tttt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2021/10/16/misc/hexo-specify-path-when-creating/image-20211016122510969.png" alt="image-20211016122510969"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åŸºæœ¬ç”¨æ³•å¦‚ä¸‹&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;hexo new layout &lt;span class=&quot;token pu</summary>
      
    
    
    
    
    <category term="hexo" scheme="https://khalitt.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>gitignoreå¿½ç•¥æ•´ä¸ªæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶ä½†ä¿ç•™ä¸€äº›</title>
    <link href="https://khalitt.github.io/2021/08/20/misc/gitignore-all-but-a-few-files/"/>
    <id>https://khalitt.github.io/2021/08/20/misc/gitignore-all-but-a-few-files/</id>
    <published>2021-08-20T14:42:32.000Z</published>
    <updated>2022-06-19T13:01:27.312Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://blog.csdn.net/u011475134/article/details/71521725">.gitignoreè®¾ç½®è·Ÿè¸ªå¿½ç•¥æ–‡ä»¶å¤¹ä¸­æ–‡ä»¶</a>è¯´çš„æŒºå…¨çš„ï¼Œå¯ä»¥å¥½å¥½å‚è€ƒ</p><h1 id="å¸¸è§é”™è¯¯åŸå› "><a href="#å¸¸è§é”™è¯¯åŸå› " class="headerlink" title="å¸¸è§é”™è¯¯åŸå› "></a>å¸¸è§é”™è¯¯åŸå› </h1><p>å‡è®¾æƒ³è¦å¿½ç•¥æ‰€æœ‰çš„åä¸ºWin7Releaseæˆ–releaseçš„æ–‡ä»¶å¤¹ä¸‹é™¤.txtæ–‡ä»¶ä¹‹å¤–çš„æ–‡ä»¶ï¼Œå¾ˆå®¹æ˜“å†™æˆå¦‚ä¸‹é”™è¯¯å½¢å¼</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">*<span class="token punctuation">[</span>Rr<span class="token punctuation">]</span>elease/<span class="token operator">!</span>*<span class="token punctuation">[</span>Rr<span class="token punctuation">]</span>elease/*.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ³¨æ„ï¼šä¸Šé¢å·²ç»è¯´è¿‡gitå¯¹äº.gitignoreé…ç½®æ–‡ä»¶æ˜¯æŒ‰è¡Œä»ä¸Šåˆ°ä¸‹è¿›è¡Œè§„åˆ™åŒ¹é…çš„ï¼Œ<strong>ç”±äºå…ˆæ‰§è¡Œ<code>*[Rr]elease/</code>å¿½ç•¥äº†æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶å¤¹ï¼Œæ¥ä¸‹æ¥æ‰§è¡Œ<code>!*[Rr]elease/*.txt</code>æ—¶æ‰¾ä¸åˆ°åä¸º<code>*[Rr]elease</code>çš„æ–‡ä»¶å¤¹ï¼Œä¹Ÿå°±æ— æ³•è¿½è¸ªè¿™äº›æ–‡ä»¶å¤¹ä¸‹çš„txtæ–‡ä»¶äº†</strong>ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨è¿™é‡Œï¼Œ<strong>ç¬¬ä¸€æ­¥æˆ‘ä»¬ä¸åº”è¯¥å¿½ç•¥è¿™äº›æ–‡ä»¶å¤¹ï¼Œè€Œåº”è¯¥å¿½ç•¥è¿™äº›æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</strong>ï¼Œæ­£ç¡®è§„åˆ™æ·»åŠ å¦‚ä¸‹</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>Rr<span class="token punctuation">]</span>elease/*<span class="token operator">!</span>*<span class="token punctuation">[</span>Rr<span class="token punctuation">]</span>elease/*.txt<span class="token operator">!</span>*<span class="token punctuation">[</span>Rr<span class="token punctuation">]</span>elease/files/*<span class="token punctuation">[</span>Rr<span class="token punctuation">]</span>elease/files/*<span class="token operator">!</span>*<span class="token punctuation">[</span>Rr<span class="token punctuation">]</span>elease/files/*.txt*/bin/*<span class="token punctuation">[</span>Rr<span class="token punctuation">]</span>elease/*<span class="token operator">!</span>*/bin/*<span class="token punctuation">[</span>Rr<span class="token punctuation">]</span>elease/*.txt<span class="token operator">!</span>*/bin/*<span class="token punctuation">[</span>Rr<span class="token punctuation">]</span>elease/files/*/bin/*<span class="token punctuation">[</span>Rr<span class="token punctuation">]</span>elease/files/*<span class="token operator">!</span>*/bin/*<span class="token punctuation">[</span>Rr<span class="token punctuation">]</span>elease/files/*.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¯´æ˜ï¼š</p><ol><li>æ‰§è¡Œ<code>*[Rr]elease/*</code>ï¼Œå¿½ç•¥æ ¹ç›®å½•ä¸‹ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</li><li>æ‰§è¡Œ<code>!*[Rr]elease/*.txt</code>ï¼Œè¿½è¸ªæ ¹ç›®å½•ä¸‹ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶å¤¹ä¸‹çš„txtæ–‡ä»¶</li><li>æ‰§è¡Œ<code>!*[Rr]elease/files/</code>ï¼Œè¿½è¸ªæ ¹ç›®å½•ä¸‹ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶å¤¹ä¸‹çš„filesæ–‡ä»¶å¤¹</li><li>æ‰§è¡Œ<code>*[Rr]elease/files/*</code>ï¼Œå¿½ç•¥filesæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</li><li>æ‰§è¡Œ<code>!*[Rr]elease/files/*.txt</code>ï¼Œè¿½è¸ªfilesæ–‡ä»¶å¤¹ä¸‹çš„txtæ–‡ä»¶</li></ol><p>æ‰€ä»¥è¿™æ ·çš„åšæ³•æ˜¯ä¸å¯¹çš„ï¼Œè¿™æ ·å¹¶ä¸èƒ½å¿½ç•¥targetæ–‡ä»¶ä¸‹é™¤äº†jaræ–‡ä»¶å¤–çš„æ‰€æœ‰æ–‡ä»¶ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">target<span class="token operator">!</span>target/*.jar<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="æ­£ç¡®åšæ³•"><a href="#æ­£ç¡®åšæ³•" class="headerlink" title="æ­£ç¡®åšæ³•"></a>æ­£ç¡®åšæ³•</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">target/*<span class="token operator">!</span>target/*.jar<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/2021/08/20/misc/gitignore-all-but-a-few-files/image-20210820225100993.png" alt="image-20210820225100993"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‚è€ƒ&quot;&gt;&lt;a href=&quot;#å‚è€ƒ&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒ&quot;&gt;&lt;/a&gt;å‚è€ƒ&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/u011475134/article/details/71521725&quot;&gt;.g</summary>
      
    
    
    
    
    <category term="git" scheme="https://khalitt.github.io/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>githubå¤šè´¦å·è®¾ç½®</title>
    <link href="https://khalitt.github.io/2021/08/07/multiple-github-accounts/"/>
    <id>https://khalitt.github.io/2021/08/07/multiple-github-accounts/</id>
    <published>2021-08-07T13:11:04.000Z</published>
    <updated>2022-06-19T13:01:27.328Z</updated>
    
    <content type="html"><![CDATA[<p>å‚è€ƒï¼š</p><ol><li><a href="https://segmentfault.com/a/1190000022797854">GitHub å¤šè´¦æˆ·è®¾ç½®</a></li><li><a href="https://gist.github.com/JoaquimLey/e6049a12c8fd2923611802384cd2fb4a#file-github_multiple-accounts-md"><strong>github_multiple-accounts.md</strong></a></li><li><a href="https://www.huaweicloud.com/articles/5e1b8d3cb0b673fae499eaa34a94205c.html">github å¤šè´¦å·ä½¿ç”¨ssh key</a></li></ol><p>é€‚ç”¨åœºæ™¯ï¼šå¸Œæœ›åœ¨åŒä¸€å°æœºå™¨ä¸Šä½¿ç”¨å¤šä¸ªgithubè´¦å·æ—¶</p><h1 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h1><p>æ ¸å¿ƒæ­¥éª¤ï¼š</p><ol><li>åˆ›å»ºä¸€ä¸ªæ–°çš„SSH keyï¼ˆæ³¨æ„è·¯å¾„ï¼‰å¹¶æ·»åŠ è¿›ssh</li><li>åœ¨æ–°çš„è´¦å·ä¸Šæ·»åŠ æ–°åˆ›å»ºçš„public key</li><li>åœ¨æœ¬åœ°æ·»åŠ ä¸€ä¸ªconfigæ–‡ä»¶ä»¥ä½œåŒºåˆ«</li><li>enjoyï¼</li></ol><h2 id="åˆ›å»ºä¸€ä¸ªæ–°çš„ssh-keyå¹¶æ·»åŠ "><a href="#åˆ›å»ºä¸€ä¸ªæ–°çš„ssh-keyå¹¶æ·»åŠ " class="headerlink" title="åˆ›å»ºä¸€ä¸ªæ–°çš„ssh keyå¹¶æ·»åŠ "></a>åˆ›å»ºä¸€ä¸ªæ–°çš„ssh keyå¹¶æ·»åŠ </h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh-keygen -t rsa -C <span class="token string">"xxx email"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ³¨æ„è¿™é‡Œä¸èƒ½ä¸€è·¯å›è½¦ï¼Œåœ¨ä¸‹é¢è¿™æ­¥éœ€è¦è¾“å…¥æ–°çš„ä½ç½®ï¼Œå› ä¸ºé€šå¸¸é»˜è®¤çš„æ˜¯id_rsaï¼Œè€Œè¿™ä¸ªå·²ç»è¢«åŸæ¥çš„è´¦å·æ‰€ä½¿ç”¨</p><p><img src="/2021/08/07/multiple-github-accounts/image-20210808103624410.png" alt="image-20210808103624410"></p><p>å› ä¸ºé»˜è®¤åªè¯»å–id_rsaï¼Œä¸ºäº†è®©SSHè¯†åˆ«æ–°çš„ç§é’¥ï¼Œéœ€å°†å…¶æ·»åŠ åˆ°SSH agentä¸­ï¼Œæ¯”å¦‚è¿™é‡Œå°±æŠŠä¸Šé¢çš„keyå‘½åä¸ºid_rsa_wttong</p><p><img src="/2021/08/07/multiple-github-accounts/image-20210808103853450.png" alt="image-20210808103853450"></p><h2 id="åœ¨æ–°çš„è´¦å·ä¸Šæ·»åŠ æ–°åˆ›å»ºçš„public-key"><a href="#åœ¨æ–°çš„è´¦å·ä¸Šæ·»åŠ æ–°åˆ›å»ºçš„public-key" class="headerlink" title="åœ¨æ–°çš„è´¦å·ä¸Šæ·»åŠ æ–°åˆ›å»ºçš„public key"></a>åœ¨æ–°çš„è´¦å·ä¸Šæ·»åŠ æ–°åˆ›å»ºçš„public key</h2><p>è¿›å…¥github setting - SSH keyç›¸å…³çš„å³å¯æ·»åŠ </p><h2 id="åœ¨æœ¬åœ°æ·»åŠ configæ–‡ä»¶"><a href="#åœ¨æœ¬åœ°æ·»åŠ configæ–‡ä»¶" class="headerlink" title="åœ¨æœ¬åœ°æ·»åŠ configæ–‡ä»¶"></a>åœ¨æœ¬åœ°æ·»åŠ configæ–‡ä»¶</h2><p>é€šå¸¸æ¥è¯´æ˜¯é»˜è®¤æ˜¯æ²¡æœ‰configæ–‡ä»¶çš„ï¼Œæ‰€ä»¥è¦å…ˆåˆ›å»ºï¼Œç„¶åæ‰“å¼€ç¼–è¾‘</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">touch</span> ~/.ssh/config<span class="token function">vim</span> ~/.ssh/config<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å…·ä½“çš„å†…å®¹å¯å‚è€ƒï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Host github.com <span class="token comment"># é»˜è®¤çš„è´¦å·</span>  HostName github.com  User <span class="token function">git</span>  IdentityFile ~/.ssh/id_rsaHost github.com-wttong <span class="token comment"># æ–°æ·»åŠ çš„è´¦å·</span>  HostName github.com  User <span class="token function">git</span>  IdentityFile ~/.ssh/id_rsa_wttong <span class="token comment"># ç‰¹åˆ«æ³¨æ„è¿™é‡Œ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ ¸å¿ƒå°±æ˜¯æŠŠä¸¤ä¸ªidentityFileåŒºåˆ†å¼€æ¥</p><p>æœ€åæ£€æŸ¥ä¸¤ä¸ªæ˜¯å¦éƒ½æ­£å¸¸ä½¿ç”¨</p><p><img src="/2021/08/07/multiple-github-accounts/image-20210808104409486.png" alt="image-20210808104409486"></p><h1 id="å…·ä½“ä½¿ç”¨çš„è¦æ³¨æ„çš„ç‚¹"><a href="#å…·ä½“ä½¿ç”¨çš„è¦æ³¨æ„çš„ç‚¹" class="headerlink" title="å…·ä½“ä½¿ç”¨çš„è¦æ³¨æ„çš„ç‚¹"></a>å…·ä½“ä½¿ç”¨çš„è¦æ³¨æ„çš„ç‚¹</h1><ol><li>åœ¨cloneç­‰æ—¶å€™ï¼Œå¦‚æœä½¿ç”¨sshçš„æ–¹å¼ï¼Œéœ€è¦æ³¨æ„æ›´æ”¹çš„åœ°æ–¹ï¼š</li></ol><p>æ¯”å¦‚åŸæœ¬æ˜¯ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone git@github.com:xxxx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>éœ€è¦æ”¹ä¸º</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone git@github.com-wttong:xxxx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å…¶ä»–è¯¸å¦‚pushç­‰ç±»ä¼¼</p><ol start="2"><li><p>å¯¹äºå·²æœ‰çš„repoï¼Œéœ€è¦æ³¨æ„configä¸­æ˜¯å¦éœ€è¦ä¿®æ”¹ï¼Œå¯ä»¥é€šè¿‡ <code>git config --list</code>æŸ¥çœ‹ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§ï¼Œçœ‹çœ‹æ˜¯å¦éœ€è¦å’Œä¸Šé¢ä¸€æ ·ä¿®æ”¹github.com</p><p><img src="/2021/08/07/multiple-github-accounts/image-20210808104727256.png" alt="image-20210808104727256"></p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å‚è€ƒï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000022797854&quot;&gt;GitHub å¤šè´¦æˆ·è®¾ç½®&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://gist.github.com/Joaquim</summary>
      
    
    
    
    <category term="hexo" scheme="https://khalitt.github.io/categories/hexo/"/>
    
    
    <category term="hexo" scheme="https://khalitt.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>tensordot</title>
    <link href="https://khalitt.github.io/2021/07/24/misc/tensordot/"/>
    <id>https://khalitt.github.io/2021/07/24/misc/tensordot/</id>
    <published>2021-07-24T14:54:44.000Z</published>
    <updated>2021-07-24T16:27:26.548Z</updated>
    
    <content type="html"><![CDATA[<h1 id="tensordotçš„ç†è§£"><a href="#tensordotçš„ç†è§£" class="headerlink" title="tensordotçš„ç†è§£"></a>tensordotçš„ç†è§£</h1><ol><li>å‚è€ƒ <a href="https://numpy.org/doc/stable/reference/generated/numpy.tensordot.html">numpyçš„tensordotçš„è¯´æ˜æ–‡æ¡£</a>ï¼Œè¯´çš„æ¯”è¾ƒè¯¦ç»†ï¼Œä½†æ˜¯ä¾æ—§æœ‰ç‚¹æ™¦æ¶©éš¾æ‡‚</li></ol><p>åœ¨tensorflowä¸­æœ‰ä¸€æ ·çš„å‡½æ•°ï¼ŒåŠŸèƒ½å’Œnumpyä¸­çš„ä¸€æ ·ã€‚</p><p>é¡¾åæ€ä¹‰ï¼Œtensordotçš„å«ä¹‰å°±æ˜¯â€œå¼ é‡çš„ç‚¹ç§¯â€œï¼Œå…·ä½“åˆ°numpyæˆ–è€…tensorflowä¸­çš„ä½¿ç”¨ï¼Œæœ‰ä¸¤ç§ï¼š</p><ol><li>å¦‚æœç»™å®šçš„axesæ˜¯ä¸€ä¸ªint Nï¼Œåˆ™ç›´æ¥ç¬¬ä¸€ä¸ªå¼ é‡çš„æœ€åNç»´åº¦å’Œç¬¬äºŒä¸ªå¼ é‡çš„å‰Nä¸ªç»´åº¦é€ä¸ªå…ƒç´ ç›¸ä¹˜ï¼Œç„¶ååŠ èµ·æ¥ï¼ˆæ³¨æ„è¿™é‡Œçš„åŠ ï¼Œå¯¹åº”+ï¼Œå¯¹äºnumberå°±æ˜¯æ•°å­—ç›¸åŠ ï¼Œå¯¹äºå­—ç¬¦ä¸²ç­‰ä»·äºæ‹¼æ¥ï¼‰</li><li>å¦‚æœç»™ç¬¬çš„axesæ˜¯listï¼Œåˆ™å…¶ä¸­æ¯ä¸€ä¸ªå…ƒç´ åº”è¯¥æ˜¯ä¸€ä¸ªtupleï¼Œtupleçš„ç¬¬ä¸€ä¸ªå…ƒç´ è¡¨ç¤ºæ“ä½œç¬¬ä¸€ä¸ªå¼ é‡å¯¹åº”çš„ç»´åº¦ï¼Œç¬¬äºŒä¸ªå…ƒç´ è¡¨ç¤ºæ“ä½œç¬¬äºŒå¼ é‡å¯¹åº”çš„ç»´åº¦</li></ol><p>æ¯”å¦‚ï¼šaçš„ç»´åº¦æ˜¯$(2,3,4)$, bçš„ç»´åº¦æ˜¯$(3,4,5)$:</p><ul><li><code>np.tensordot(a, b, 2)</code>çš„ç»“æœçš„ç»´åº¦åº”è¯¥æ˜¯$(2,5)$â€‹â€‹â€‹ï¼Œå…·ä½“çš„æ“ä½œå¯ä»¥ç†è§£ä¸ºï¼Œå›ºå®šaçš„ç¬¬ä¸€ä¸ªç»´åº¦å’Œbçš„æœ€åä¸€ä¸ªç»´åº¦ï¼ˆä¾æ¬¡å–å€¼ï¼Œä½œä¸ºæœ€å¤–å±‚çš„å¾ªç¯ï¼Œå³<code>i,j</code>ï¼‰ï¼Œaçš„åä¸¤ä¸ªå’Œbçš„å‰ä¸¤ä¸ªç»´åº¦ç›¸åŒä½ç½®çš„å…ƒç´ ä¾æ¬¡ç›¸ä¹˜ï¼Œæ±‚å’Œï¼Œä½œä¸ºå¯¹åº”ä½ç½®çš„å…ƒç´ </li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">ans <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">for</span> n <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>ans<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">,</span>k<span class="token punctuation">,</span>n<span class="token punctuation">]</span> <span class="token operator">*</span> a<span class="token punctuation">[</span>k<span class="token punctuation">,</span>n<span class="token punctuation">,</span>j<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>np.tensordot(a, b, (1, 0))</code>çš„ç»“æœçš„ç»´åº¦åº”è¯¥æ˜¯$(2,4,4,5)$â€‹â€‹ï¼Œå…·ä½“æ“ä½œå¯ä»¥ç†è§£ä¸ºï¼Œå›ºå®š<code>a[i,k,j]</code>å’Œ<code>b[n,f,g]</code>ä¸­çš„<code>i,j,f,g</code>ç»´åº¦ï¼ˆå³å¯¹å››ä¸ªä½ç½®ä¾æ¬¡è¿›è¡Œå–å€¼ï¼Œä½œä¸ºæœ€å¤–å±‚çš„å¾ªç¯ï¼‰ï¼Œ<code>k</code>å’Œ<code>n</code>è¿™ä¸¤ä¸ªç»´åº¦ç›¸åŒä½ç½®çš„å…ƒç´ ä¾æ¬¡è¿›è¡Œç›¸ä¹˜ï¼Œæ±‚å’Œ</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">ans <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">for</span> f <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">for</span> g <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    <span class="token keyword">for</span> n <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                        ans<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">,</span>f<span class="token punctuation">,</span>g<span class="token punctuation">]</span> <span class="token operator">+=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">,</span>k<span class="token punctuation">,</span>j<span class="token punctuation">]</span> <span class="token operator">*</span> a<span class="token punctuation">[</span>n<span class="token punctuation">,</span>f<span class="token punctuation">,</span>g<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>np.tensordot(a, b, ((1, 2), (0,1))</code>çš„ç»“æœçš„ç»´åº¦åº”è¯¥æ˜¯$(2,5)$â€‹â€‹â€‹ï¼Œå…·ä½“æ“ä½œå¯ä»¥ç†è§£ä¸ºï¼Œå›ºå®š<code>a[i,k,n]</code>å’Œ<code>b[k,n,j]</code>ä¸­çš„<code>i,j</code>ç»´åº¦ï¼ˆå³å¯¹ä¸¤ä¸ªä½ç½®ä¾æ¬¡è¿›è¡Œå–å€¼ï¼Œä½œä¸ºæœ€å¤–å±‚çš„å¾ªç¯ï¼‰ï¼Œ<code>k</code>å’Œ<code>n</code>è¿™ä¸¤ä¸ªç»´åº¦ï¼Œåœ¨ä¸¤ä¸ªå¼ é‡ä¸­ï¼Œç›¸åŒä½ç½®çš„å…ƒç´ ä¾æ¬¡è¿›è¡Œç›¸ä¹˜ï¼Œå¹¶æ±‚å’Œã€‚å®é™…ä¸Šè¿™å°±ç­‰åŒäºç¬¬ä¸€ç§æƒ…å†µ<code>np.tensordot(a,b,2)</code></li></ul><p>æŒ‰ç…§ä¸Šè¿°çš„ç†è§£ï¼Œè‡ªç„¶ä¹Ÿå°±ä¸éš¾ç†è§£ä¸‹é¢çš„æ“ä½œäº†ï¼š</p><p><img src="/2021/07/24/misc/tensordot/image-20210724225721272.png" alt="image-20210724225721272"></p><p>ç‰¹åˆ«æ³¨æ„ä¸Šé¢çš„<code>n</code>å’Œ<code>k</code>çš„é¡ºåºï¼š<strong>æ˜¯å…ˆ4é‚£ä¸ªç»´åº¦ï¼Œå†åˆ°3é‚£ä¸ªç»´åº¦ï¼Œå› ä¸º<code>axes=[(1,0),[0,1]]</code>ï¼Œæ‰€ä»¥æœ€å†…å±‚çš„å¾ªç¯æ˜¯ä»<code>a[k, 0, i] * b[0, k, j]</code>å¼€å§‹</strong> </p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;tensordotçš„ç†è§£&quot;&gt;&lt;a href=&quot;#tensordotçš„ç†è§£&quot; class=&quot;headerlink&quot; title=&quot;tensordotçš„ç†è§£&quot;&gt;&lt;/a&gt;tensordotçš„ç†è§£&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;å‚è€ƒ &lt;a href=&quot;https://nump</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨pythonå•ä¾‹æ¨¡å¼æ—¶è¦æ³¨æ„çš„key</title>
    <link href="https://khalitt.github.io/2021/02/07/problems-record/python-singleton-key/"/>
    <id>https://khalitt.github.io/2021/02/07/problems-record/python-singleton-key/</id>
    <published>2021-02-07T08:51:15.000Z</published>
    <updated>2021-02-07T10:59:55.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>è®­ç»ƒæ—¶ï¼Œåªå¸Œæœ›æ‰€æœ‰æ•°æ®åªæœ‰ä¸€ä»½å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå³å¯¹äºåŒæ ·çš„ä¸€ä»½æ•°æ®åªè¯»å–ä¸€æ¬¡ï¼Œä½†æ˜¯åˆå¸Œæœ›è¢«å¤šä¸ªä¸åŒçš„<code>dataset</code>æˆ–è€…<code>dataloader</code>å…±ç”¨ï¼Œè‡ªç„¶æ˜¯éœ€è¦å•ä¾‹æ¨¡å¼ã€‚</p><p>ä¸€ä¸ªç»å…¸çš„å®ç°å°±æ˜¯ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    _instances <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> cls_key <span class="token keyword">not</span> <span class="token keyword">in</span> cls<span class="token punctuation">.</span>_instances<span class="token punctuation">:</span>            cls<span class="token punctuation">.</span>_instances<span class="token punctuation">[</span>cls<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>Singleton<span class="token punctuation">,</span> cls<span class="token punctuation">)</span><span class="token punctuation">.</span>__call__<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        <span class="token keyword">return</span> cls<span class="token punctuation">.</span>_instances<span class="token punctuation">[</span>cls<span class="token punctuation">]</span>    <span class="token keyword">def</span> <span class="token function">clear</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># MyClass.clear() to clear</span>        cls<span class="token punctuation">.</span>_instances <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½†æ˜¯è¿™ç§å®ç°<strong>ä»…ä»…åªèƒ½ä¿è¯ä¸€ä¸ªç±»åªäº§ç”Ÿä¸€ä¸ªå®ä¾‹ï¼Œä½†æ˜¯å¯¹äºæƒ³ç”¨ä¸€ä¸ªç±»æ¥åˆå§‹åŒ–æ‰€æœ‰çš„æ•°æ®æ¥è¯´ï¼Œå¹¶ä¸å¯è¡Œï¼Œç­‰ä»·äºåˆå§‹åŒ–å®Œtrainï¼Œvalå’Œtestéƒ½ä¸ä¼šåˆå§‹åŒ–äº†</strong></p><p>å¾ˆè‡ªç„¶èƒ½å¤Ÿæƒ³åˆ°ç›´æ¥ä½¿ç”¨ä¸‹é¢è¿™ç§ï¼Œ<strong>ç”¨<code>dataset_type</code>ä½œä¸ºkeyæ¥åˆå§‹åŒ–</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    _instances <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># Might vary based on order in args</span>        cls_key <span class="token operator">=</span> args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token keyword">if</span> cls_key <span class="token keyword">not</span> <span class="token keyword">in</span> cls<span class="token punctuation">.</span>_instances<span class="token punctuation">:</span>            cls<span class="token punctuation">.</span>_instances<span class="token punctuation">[</span>cls_key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>Singleton<span class="token punctuation">,</span> cls<span class="token punctuation">)</span><span class="token punctuation">.</span>__call__<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        <span class="token keyword">return</span> cls<span class="token punctuation">.</span>_instances<span class="token punctuation">[</span>cls_key<span class="token punctuation">]</span>    <span class="token keyword">def</span> <span class="token function">clear</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># MyClass.clear() to clear</span>        cls<span class="token punctuation">.</span>_instances <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token comment"># ç»§æ‰¿ä¸Šé¢çš„å•ä¾‹</span><span class="token keyword">class</span> <span class="token class-name">XRMBData</span><span class="token punctuation">(</span>metaclass<span class="token operator">=</span>Singleton<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> root<span class="token punctuation">,</span> dataset_type<span class="token punctuation">,</span> noise_type<span class="token punctuation">,</span> noise_rate<span class="token punctuation">,</span> seed<span class="token punctuation">,</span> modalities<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"XRMBData </span><span class="token interpolation"><span class="token punctuation">&#123;</span>dataset_type<span class="token punctuation">&#125;</span></span><span class="token string"> was called"</span></span><span class="token punctuation">)</span>        folder <span class="token operator">=</span> <span class="token string">'seed_&#123;:d&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>seed<span class="token punctuation">)</span>        label_folder <span class="token operator">=</span> folder <span class="token operator">+</span> <span class="token string">'/labels/&#123;&#125;_&#123;:.1f&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>noise_type<span class="token punctuation">,</span> noise_rate<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        self<span class="token punctuation">.</span>clean_labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">if</span> dataset_type <span class="token operator">==</span> <span class="token string">'test'</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>labels <span class="token operator">=</span> torch<span class="token punctuation">.</span>from_numpy<span class="token punctuation">(</span>np<span class="token punctuation">.</span>load<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>root<span class="token punctuation">,</span> label_folder<span class="token punctuation">,</span> <span class="token string">'y_test.npy'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">long</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment"># val / train</span>            self<span class="token punctuation">.</span>labels <span class="token operator">=</span> torch<span class="token punctuation">.</span>from_numpy<span class="token punctuation">(</span>                np<span class="token punctuation">.</span>load<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>root<span class="token punctuation">,</span> label_folder<span class="token punctuation">,</span> <span class="token string">'noisy_y_&#123;&#125;.npy'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>dataset_type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">long</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>clean_labels <span class="token operator">=</span> torch<span class="token punctuation">.</span>from_numpy<span class="token punctuation">(</span>                np<span class="token punctuation">.</span>load<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>root<span class="token punctuation">,</span> label_folder<span class="token punctuation">,</span> <span class="token string">'clean_y_&#123;&#125;.npy'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>dataset_type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">long</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> md <span class="token keyword">in</span> modalities<span class="token punctuation">:</span>            md_mat <span class="token operator">=</span> np<span class="token punctuation">.</span>load<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>root<span class="token punctuation">,</span> folder<span class="token punctuation">,</span> <span class="token string">'md_&#123;&#125;/x_&#123;&#125;.npy'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>md<span class="token punctuation">,</span> dataset_type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment"># Expect float otherwise be converted to Double</span>            self<span class="token punctuation">.</span>data<span class="token punctuation">.</span>append<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>from_numpy<span class="token punctuation">(</span>md_mat<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>dataset_type <span class="token operator">=</span> dataset_type<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½†æ˜¯æ³¨æ„åˆ°ï¼Œè¿™ç§å®ç°åªæ£€æŸ¥äº†<code>dataset_type</code>ï¼Œå¦‚æœè¯´å¸Œæœ›ä¸€æ¬¡æ€§è·‘å¤šä¸ª<code>split</code>ï¼Œé‚£ä¹ˆä¸Šé¢è¿™ç§å¤„ç†å°±å¯¼è‡´åªæœ‰ç¬¬ä¸€ä¸ªsplitçš„æ•°æ®è¢«è¯»å…¥ï¼Œä¹‹åçš„splitéƒ½ä¼šç”¨<code>split_0</code>çš„å–ä»£ã€‚</p><h1 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h1><p>ä¸»è¦æœ‰ä¸¤ç§ï¼Œæ¨èç¬¬ä¸€ç§ï¼š</p><ul><li><strong>æŠŠsplitä¿¡æ¯ä¹Ÿæ·»åŠ è¿›<code>cls_key</code></strong></li><li>æ¯ä¸ª<code>split</code>è·‘å®Œä¹‹åéƒ½ç”¨<code>clear_instances</code>æ¸…é™¤å•ä¾‹</li></ul><p>å¯¹äºç¬¬ä¸€ç§æ–¹æ³•ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    _instances <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># Might vary based on order in args</span>        cls_key <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token comment"># cls_key = args[1]</span>        <span class="token keyword">if</span> cls_key <span class="token keyword">not</span> <span class="token keyword">in</span> cls<span class="token punctuation">.</span>_instances<span class="token punctuation">:</span>            cls<span class="token punctuation">.</span>_instances<span class="token punctuation">[</span>cls_key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>Singleton<span class="token punctuation">,</span> cls<span class="token punctuation">)</span><span class="token punctuation">.</span>__call__<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        <span class="token keyword">return</span> cls<span class="token punctuation">.</span>_instances<span class="token punctuation">[</span>cls_key<span class="token punctuation">]</span>    <span class="token keyword">def</span> <span class="token function">clear</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># MyClass.clear() to clear</span>        cls<span class="token punctuation">.</span>_instances <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹æ¯”ä¿®æ”¹å‰åï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">XRMBData train was calledtrain dataset with <span class="token number">329312</span> samplesOriginal fast dataloader finish with:7.8423 secondtrain dataset with <span class="token number">329312</span> samplesOriginal fast dataloader finish with:0.7790 secondtrain dataset with <span class="token number">329312</span> samplesOriginal fast dataloader finish with:0.7690 secondtrain dataset with <span class="token number">329312</span> samplesOriginal fast dataloader finish with:0.7571 secondtrain dataset with <span class="token number">329312</span> samplesOriginal fast dataloader finish with:0.7515 second<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">XRMBData train was calledtrain dataset with <span class="token number">329312</span> samples1st <span class="token function">split</span> 1st epoch 1st batch used <span class="token number">6.5541</span> seconds1st <span class="token function">split</span> 1st epoch used <span class="token number">6.7643</span> secondsOriginal fast dataloader finish with:7.2792 secondXRMBData train was calledtrain dataset with <span class="token number">329312</span> samplesOriginal fast dataloader finish with:0.6898 secondXRMBData train was calledtrain dataset with <span class="token number">329312</span> samplesOriginal fast dataloader finish with:0.7306 secondXRMBData train was calledtrain dataset with <span class="token number">329312</span> samplesOriginal fast dataloader finish with:0.6899 secondXRMBData train was calledtrain dataset with <span class="token number">329312</span> samplesOriginal fast dataloader finish with:0.6729 second<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é—®é¢˜&quot;&gt;&lt;a href=&quot;#é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;é—®é¢˜&quot;&gt;&lt;/a&gt;é—®é¢˜&lt;/h1&gt;&lt;p&gt;è®­ç»ƒæ—¶ï¼Œåªå¸Œæœ›æ‰€æœ‰æ•°æ®åªæœ‰ä¸€ä»½å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå³å¯¹äºåŒæ ·çš„ä¸€ä»½æ•°æ®åªè¯»å–ä¸€æ¬¡ï¼Œä½†æ˜¯åˆå¸Œæœ›è¢«å¤šä¸ªä¸åŒçš„&lt;code&gt;dataset&lt;/code&gt;æˆ–</summary>
      
    
    
    
    <category term="python" scheme="https://khalitt.github.io/categories/python/"/>
    
    
    <category term="python" scheme="https://khalitt.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>pytorchåŠ é€Ÿä¸é™ä½æ˜¾å­˜</title>
    <link href="https://khalitt.github.io/2021/02/04/pytorch-speed-up/"/>
    <id>https://khalitt.github.io/2021/02/04/pytorch-speed-up/</id>
    <published>2021-02-04T11:18:40.000Z</published>
    <updated>2021-02-12T16:18:35.657Z</updated>
    
    <content type="html"><![CDATA[<p>æ€»ä½“è€Œè¨€ï¼Œä¸»è¦ä»ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢æ”¹å–„ï¼Œä¸è¿‡èƒ½æŠŠç¬¬ä¸€ä¸ªåŠ é€Ÿäº†å°±å¾ˆå¥½äº†ï¼š</p><ul><li>æ•°æ®é¢„å¤„ç†éƒ¨åˆ†</li><li>æ¨¡å‹è‡ªèº«çš„éƒ¨åˆ†</li></ul><p><img src="/2021/02/04/pytorch-speed-up/image-20210204192145256.png" alt="image-20210204192145256"></p><p><img src="/2021/02/04/pytorch-speed-up/image-20210204192130333.png" alt="image-20210204192130333"></p><p>å½“æ•°æ®éƒ½åœ¨GPUæ—¶ï¼Œprefetcheræ”¶ç›Šä¸å¤§</p><p><img src="/2021/02/04/pytorch-speed-up/image-20210204194941623.png" alt="image-20210204194941623"></p><p>å“ªæ€•æ•°æ®ä¸åœ¨GPUï¼Œ<code>FastDataloader</code>æ•ˆæœä¹Ÿä¸é”™</p><p><img src="/2021/02/04/pytorch-speed-up/image-20210204211759942.png" alt="image-20210204211759942"></p><p>è€Œä¸”GPUå ç”¨ä¹Ÿä¸é«˜</p><p><img src="/2021/02/04/pytorch-speed-up/image-20210204212019244.png" alt="image-20210204212019244"></p><p>æµ‹è¯•è„šæœ¬</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token keyword">from</span> torchvision <span class="token keyword">import</span> datasets<span class="token punctuation">,</span> transforms<span class="token keyword">import</span> time<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    use_cuda <span class="token operator">=</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> num_workers <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># éå†workeræ•°</span>        kwargs <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'num_workers'</span><span class="token punctuation">:</span> num_workers<span class="token punctuation">,</span> <span class="token string">'pin_memory'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">&#125;</span> <span class="token keyword">if</span> use_cuda <span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>        train_loader <span class="token operator">=</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data<span class="token punctuation">.</span>DataLoader<span class="token punctuation">(</span>            datasets<span class="token punctuation">.</span>MNIST<span class="token punctuation">(</span><span class="token string">'./data'</span><span class="token punctuation">,</span> train<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> download<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>                           transform<span class="token operator">=</span>transforms<span class="token punctuation">.</span>Compose<span class="token punctuation">(</span><span class="token punctuation">[</span>                               transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                               transforms<span class="token punctuation">.</span>Normalize<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0.1307</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0.3081</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                           <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            batch_size<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> shuffle<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        start <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> epoch <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> batch_idx<span class="token punctuation">,</span> <span class="token punctuation">(</span>data<span class="token punctuation">,</span> target<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>train_loader<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ä¸æ–­load</span>                <span class="token keyword">pass</span>        end <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Finish with:&#123;&#125; second, num_workers=&#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>end<span class="token operator">-</span>start<span class="token punctuation">,</span>num_workers<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>data_prefetch</code>æ ¸å¿ƒä»£ç </p><pre class="line-numbers language-python" data-language="python"><code class="language-python">prefetcher <span class="token operator">=</span> DataPrefetcher<span class="token punctuation">(</span>self<span class="token punctuation">.</span>data_loader<span class="token punctuation">)</span>batch_data <span class="token operator">=</span> prefetcher<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>batch_idx <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">while</span> batch_data <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span><span class="token comment"># for batch_idx, batch_data in enumerate(self.data_loader):</span>    self<span class="token punctuation">.</span>train_metrics<span class="token punctuation">.</span>set_step<span class="token punctuation">(</span><span class="token punctuation">)</span>    inputs<span class="token punctuation">,</span> labels<span class="token punctuation">,</span> clean_labels <span class="token operator">=</span> batch_data<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> batch_data<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> batch_data<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>    batch_idx <span class="token operator">+=</span> <span class="token number">1</span>    batch_data <span class="token operator">=</span> prefetcher<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>all_xs<span class="token punctuation">)</span><span class="token punctuation">:</span>    x_feats <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">with</span> profiler<span class="token punctuation">.</span>record_function<span class="token punctuation">(</span><span class="token string">"FORWARD-passing"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> x<span class="token punctuation">,</span> fc <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>all_xs<span class="token punctuation">,</span> self<span class="token punctuation">.</span>all_fcs<span class="token punctuation">)</span><span class="token punctuation">:</span>            x_feats<span class="token punctuation">.</span>append<span class="token punctuation">(</span>fc<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">with</span> profiler<span class="token punctuation">.</span>record_function<span class="token punctuation">(</span><span class="token string">"FORWARD-fusioning"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>fusion <span class="token operator">==</span> <span class="token string">'concat'</span><span class="token punctuation">:</span>            final <span class="token operator">=</span> torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span>x_feats<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>            fc <span class="token operator">=</span> self<span class="token punctuation">.</span>fc<span class="token punctuation">(</span>final<span class="token punctuation">)</span>        <span class="token keyword">elif</span> self<span class="token punctuation">.</span>fusion <span class="token operator">==</span> <span class="token string">'sum'</span><span class="token punctuation">:</span>            x_feats <span class="token operator">=</span> torch<span class="token punctuation">.</span>stack<span class="token punctuation">(</span>x_feats<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>            <span class="token comment"># x_feats = torch.cat([torch.unsqueeze(x_feat, dim=0) for x_feat in x_feats])</span>            final <span class="token operator">=</span> torch<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>x_feats<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>            fc <span class="token operator">=</span> self<span class="token punctuation">.</span>fc<span class="token punctuation">(</span>final<span class="token punctuation">)</span>        <span class="token keyword">elif</span> self<span class="token punctuation">.</span>fusion <span class="token operator">==</span> <span class="token string">'outer'</span><span class="token punctuation">:</span>            bs <span class="token operator">=</span> x_feats<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>            device <span class="token operator">=</span> x_feats<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>device            _x_hs <span class="token operator">=</span> <span class="token punctuation">[</span>                torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span><span class="token punctuation">(</span>x_feat<span class="token punctuation">,</span> torch<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">(</span>bs<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> requires_grad<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>torch<span class="token punctuation">.</span><span class="token builtin">float</span><span class="token punctuation">,</span> device<span class="token operator">=</span>device<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                          dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>                <span class="token keyword">for</span> x_feat <span class="token keyword">in</span> x_feats<span class="token punctuation">]</span>            fusion_xs <span class="token operator">=</span> <span class="token punctuation">[</span>torch<span class="token punctuation">.</span>matmul<span class="token punctuation">(</span>_x_h<span class="token punctuation">,</span> factor<span class="token punctuation">)</span> <span class="token keyword">for</span> _x_h<span class="token punctuation">,</span> factor <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>_x_hs<span class="token punctuation">,</span> self<span class="token punctuation">.</span>factors<span class="token punctuation">)</span><span class="token punctuation">]</span>            fusion_zy <span class="token operator">=</span> <span class="token builtin">reduce</span><span class="token punctuation">(</span>mul<span class="token punctuation">,</span> fusion_xs<span class="token punctuation">)</span>            fc <span class="token operator">=</span> torch<span class="token punctuation">.</span>matmul<span class="token punctuation">(</span>self<span class="token punctuation">.</span>fusion_weights<span class="token punctuation">,</span> fusion_zy<span class="token punctuation">.</span>permute<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>fusion_bias            fc <span class="token operator">=</span> fc<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">"Not implemented fusion method:&#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>fusion<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> fc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨IEG åŸç‰ˆä¸Šï¼šæœ‰ä¸€å®šçš„æå‡ï¼š</p><p>ä¸€ä¸ªepochï¼š<code>all_cuda=True</code></p><p><img src="/2021/02/04/pytorch-speed-up/image-20210205213212693.png" alt="image-20210205213212693"></p><p><code>all_cuda=False</code></p><p><img src="/2021/02/04/pytorch-speed-up/image-20210205213221551.png" alt="image-20210205213221551"></p><p>åŸæ¥çš„ï¼š</p><p><img src="/2021/02/04/pytorch-speed-up/image-20210205213231966.png" alt="image-20210205213231966"></p><h1 id="å¾…æŸ¥çœ‹"><a href="#å¾…æŸ¥çœ‹" class="headerlink" title="å¾…æŸ¥çœ‹"></a>å¾…æŸ¥çœ‹</h1><p><a href="https://www.cnblogs.com/lylec/p/13597240.html">https://www.cnblogs.com/lylec/p/13597240.html</a></p><p><a href="https://tianws.github.io/skill/2019/08/27/gpu-volatile/">https://tianws.github.io/skill/2019/08/27/gpu-volatile/</a></p><h1 id="DALIä½¿ç”¨"><a href="#DALIä½¿ç”¨" class="headerlink" title="DALIä½¿ç”¨"></a>DALIä½¿ç”¨</h1><p>é¦–å…ˆåº”è¯¥çœ‹çœ‹è¿™ä¸ª<a href="https://discuss.pytorch.org/t/speeding-up-dataloading-with-dali-tutorial/68130">Speeding up dataloading with DALI tutorial</a>ï¼Œå…¶ä¸­çš„post1 <a href="https://developer.nvidia.com/blog/case-study-resnet50-dali/">Case Study: ResNet50 with DALI</a>å¾ˆé‡è¦</p><blockquote><p>To verify that CPU is indeed the bottleneck in our training, letâ€™s conduct a simple experiment. Normally the preprocessing of dataset is performed on the CPU (using libraries like NumPy or Pillow) while the training runs on the GPU. Furthermore, they work in parallel â€“ the CPU processing of a batch runs at the same time that the GPU conducts forward and back propagation of the previous batch.</p><p>Letâ€™s compare the speed of a regular ResNet50 data processing pipeline and a synthetic pipeline, in which no data augmentation occurs, only training. At this point we donâ€™t care that the neural network wonâ€™t train; all we need is to compare the performance of the two pipelines.</p><p><strong>If we observe no performance difference between these two pipelines in our experiment, then the CPU workload proves irrelevant</strong>. On the other hand, if we discover lower speed in the regular pipeline, it means that the CPU is the likely bottleneck for training.</p><p>Indeed, as table 1 shows, we observe a difference in the performance of these two pipelines. This observation indicates a bottleneck within the preprocessing pipeline occuring on the CPU. To address this situation, we can make use of DALI â€“ the library exclusively designed to offload the preprocessing from CPU to GPU, thereby reducing or eliminating the CPU bottleneck.</p></blockquote><p>æ‰€ä»¥ä½¿ç”¨DALIä¹‹å‰ï¼Œåº”è¯¥é€šè¿‡synthetic inputsæ¥æµ‹è¯•æ•´ä¸ªpipelineï¼Œæ¯”å¦‚å¦‚æœå¾ˆå°‘ç”¨åˆ°augmentationï¼Œé‚£ä¹ˆæ˜¾ç„¶ç“¶é¢ˆåº”è¯¥ä¸åœ¨è¿™</p><p><a href="https://gitthhub.github.io/2019/08/26/pytorch-acc-dataloader/">PyTorch - Accelerate DataLoader</a> å…¶ä¸­æåˆ°ï¼ŒåŸåšä¸»è‡ªå·±ä½¿ç”¨è¿‡ä¹‹åæå‡ä¸æ˜æ˜¾</p><blockquote><p>å®æµ‹æ•ˆæœä¸å®˜æ–¹çš„transformæ¯”,é€Ÿåº¦æå‡ä¸æ˜æ˜¾(çº¦10%): FER-2013, batch=256, epoch=1, GPU=0, å•GPUè®­ç»ƒ: 38s:43s FER-2013, batch=256, epoch=1, GPU=0, åŒGPUè®­ç»ƒ: 27s:34s è°ƒæ•´daliçš„num_threadså¯¹é€Ÿåº¦åŸºæœ¬æ— å½±å“ FER-2013, batch=64, epoch=1, GPU=0, åŒGPUè®­ç»ƒ: 41s:45s åœ¨å¼€å§‹è®­ç»ƒå‰, å®˜æ–¹çš„æ–¹æ³•è¦ç­‰æ¯”è¾ƒä¹…çš„æ—¶é—´,è€ŒDALIå¼€å§‹çš„å¾ˆå¿«</p></blockquote><h1 id="Ravdessæé€Ÿ"><a href="#Ravdessæé€Ÿ" class="headerlink" title="Ravdessæé€Ÿ"></a>Ravdessæé€Ÿ</h1><h2 id="ç¡®è®¤augmentationæ­¥éª¤è´¹æ—¶"><a href="#ç¡®è®¤augmentationæ­¥éª¤è´¹æ—¶" class="headerlink" title="ç¡®è®¤augmentationæ­¥éª¤è´¹æ—¶"></a>ç¡®è®¤augmentationæ­¥éª¤è´¹æ—¶</h2><p>å‚ç…§ä¸Šé¢<a href="#DALI%E4%BD%BF%E7%94%A8">DALI ä½¿ç”¨</a>ï¼Œéœ€è¦å…ˆæŠŠæ‰€æœ‰augmentationçš„æ­¥éª¤çš„å…³äº†è¿›è¡Œå¯¹æ¯”</p><p>å…³é—­augmentationï¼š</p><p><img src="/2021/02/04/pytorch-speed-up/image-20210212144348576.png" alt="image-20210212144348576"></p><p><img src="/2021/02/04/pytorch-speed-up/image-20210212150043589.png" alt="image-20210212150043589"></p><p>å¼€å¯å•æ¬¡augmentationï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">train_audio_transform <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Compose<span class="token punctuation">(</span><span class="token punctuation">[</span>    <span class="token comment"># transforms.Resize((224, 224)),</span>    transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>train_image_transform <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Compose<span class="token punctuation">(</span><span class="token punctuation">[</span>    transforms<span class="token punctuation">.</span>Resize<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">160</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    transforms<span class="token punctuation">.</span>RandomHorizontalFlip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    transforms<span class="token punctuation">.</span>RandomVerticalFlip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    transforms<span class="token punctuation">.</span>RandomRotation<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    transforms<span class="token punctuation">.</span>ColorJitter<span class="token punctuation">(</span><span class="token number">0.05</span><span class="token punctuation">,</span> <span class="token number">0.05</span><span class="token punctuation">,</span> <span class="token number">0.05</span><span class="token punctuation">,</span> <span class="token number">0.05</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2021/02/04/pytorch-speed-up/image-20210212144404990.png" alt="image-20210212144404990"></p><p><img src="/2021/02/04/pytorch-speed-up/image-20210212144650464.png" alt="image-20210212144650464"></p><p>å¢åŠ çš„æ—¶é—´ä¸å¤š</p><p>å¦‚æœæŠŠæ‰€æœ‰imageçš„augmentationä¹Ÿå…³äº†ï¼Œåˆ™ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">train_audio_transform <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Compose<span class="token punctuation">(</span><span class="token punctuation">[</span>    <span class="token comment"># transforms.Resize((224, 224)),</span>    transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>train_image_transform <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Compose<span class="token punctuation">(</span><span class="token punctuation">[</span>    <span class="token comment"># transforms.Resize((160, 160)),</span>    <span class="token comment"># transforms.RandomHorizontalFlip(),</span>    <span class="token comment"># transforms.RandomVerticalFlip(),</span>    <span class="token comment"># transforms.RandomRotation(10),</span>    <span class="token comment"># transforms.ColorJitter(0.05, 0.05, 0.05, 0.05),</span>    transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2021/02/04/pytorch-speed-up/image-20210212145640608.png" alt="image-20210212145640608"></p><p>ä¹Ÿå·®ä¸å¤šè¦ç¿»ä¸€å€</p><h2 id="å®æµ‹å•æ¨¡æ€ï¼ˆimage-audioï¼‰ï¼Œæœ‰æ— augmentationçš„åŒºåˆ«"><a href="#å®æµ‹å•æ¨¡æ€ï¼ˆimage-audioï¼‰ï¼Œæœ‰æ— augmentationçš„åŒºåˆ«" class="headerlink" title="å®æµ‹å•æ¨¡æ€ï¼ˆimage/audioï¼‰ï¼Œæœ‰æ— augmentationçš„åŒºåˆ«"></a>å®æµ‹å•æ¨¡æ€ï¼ˆimage/audioï¼‰ï¼Œæœ‰æ— augmentationçš„åŒºåˆ«</h2><p>audioç”±äºæœ¬èº«å°±å‡ ä¹æ²¡æœ‰augmentationï¼ˆåªæœ‰<code>totensor</code>ï¼‰ï¼Œå› æ­¤æ­¤å¤„åªè®°å½•ä¸€ä¸ªæƒ…å†µï¼š</p><p><img src="/2021/02/04/pytorch-speed-up/image-20210212233702896.png" alt="image-20210212233702896"></p><p><img src="/2021/02/04/pytorch-speed-up/image-20210212233729653.png" alt="image-20210212233729653"></p><p><img src="/2021/02/04/pytorch-speed-up/image-20210212233901416.png" alt="image-20210212233901416"></p><p>ç”¨æ—¶ 111.650s</p><p>imageä¸‹åˆ™æ˜¾ç„¶æ›´è´¹æ—¶ä¸€äº›ï¼ˆå“ªæ€•å®Œå…¨å…³é—­äº†augmentationï¼‰</p><p>å®Œå…¨æ²¡æœ‰augmentationï¼š</p><pre class="line-numbers language-none"><code class="language-none">Save at &#x2F;home&#x2F;weitaotang&#x2F;multimodal&#x2F;pytorch_hydra_results_temp&#x2F;debug&#x2F;2021-02-12&#x2F;23-25-33-None<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2021/02/04/pytorch-speed-up/image-20210212233819006.png" alt="image-20210212233819006"></p><p><img src="/2021/02/04/pytorch-speed-up/image-20210212233939570.png" alt="image-20210212233939570"></p><p><img src="/2021/02/04/pytorch-speed-up/image-20210212233950162.png" alt="image-20210212233950162"></p><p>ç”¨æ—¶202.359s</p><p>å•ä¸€augmentationï¼š</p><p><img src="/2021/02/04/pytorch-speed-up/image-20210213001036258.png" alt="image-20210213001036258"></p><p><img src="/2021/02/04/pytorch-speed-up/image-20210213001049516.png" alt="image-20210213001049516"></p><p>ç”¨æ—¶201.045s</p><p>ç»¼åˆä¸‹æ¥å¯ä»¥çœ‹åˆ°ä¼¼ä¹å·®åˆ«ä¸å¤§</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ€»ä½“è€Œè¨€ï¼Œä¸»è¦ä»ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢æ”¹å–„ï¼Œä¸è¿‡èƒ½æŠŠç¬¬ä¸€ä¸ªåŠ é€Ÿäº†å°±å¾ˆå¥½äº†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ•°æ®é¢„å¤„ç†éƒ¨åˆ†&lt;/li&gt;
&lt;li&gt;æ¨¡å‹è‡ªèº«çš„éƒ¨åˆ†&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/2021/02/04/pytorch-speed-up/image-2021020</summary>
      
    
    
    
    <category term="pytorch" scheme="https://khalitt.github.io/categories/pytorch/"/>
    
    
    <category term="pytorch" scheme="https://khalitt.github.io/tags/pytorch/"/>
    
  </entry>
  
  <entry>
    <title>screenä½¿ç”¨</title>
    <link href="https://khalitt.github.io/2021/02/04/screen-usage/"/>
    <id>https://khalitt.github.io/2021/02/04/screen-usage/</id>
    <published>2021-02-04T04:10:00.000Z</published>
    <updated>2021-02-04T04:15:28.169Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¿®æ”¹srceenrcåä¸é‡å¯screenç”Ÿæ•ˆ"><a href="#ä¿®æ”¹srceenrcåä¸é‡å¯screenç”Ÿæ•ˆ" class="headerlink" title="ä¿®æ”¹srceenrcåä¸é‡å¯screenç”Ÿæ•ˆ"></a>ä¿®æ”¹<code>srceenrc</code>åä¸é‡å¯screenç”Ÿæ•ˆ</h1><p>æ¥è‡ª <a href="https://serverfault.com/questions/194597/how-to-reload-screenrc-without-restarting-screen">How to reload screenrc without restarting screen?</a></p><p><code>Ctrl-a :source ~/.screenrc</code>.</p><h1 id="å¼€å¯è‡ªåŠ¨åˆ·æ–°ï¼ˆaltscreenï¼‰"><a href="#å¼€å¯è‡ªåŠ¨åˆ·æ–°ï¼ˆaltscreenï¼‰" class="headerlink" title="å¼€å¯è‡ªåŠ¨åˆ·æ–°ï¼ˆaltscreenï¼‰"></a>å¼€å¯è‡ªåŠ¨åˆ·æ–°ï¼ˆ<code>altscreen</code>ï¼‰</h1><p>å…·ä½“åŸç†è¯´æ˜å‚è€ƒï¼š</p><ol><li><a href="https://serverfault.com/a/270169">GNU screen clearing on vim,less,etc. exit</a></li><li><a href="https://superuser.com/a/137751">Using screen, commands like less and man donâ€™t clear the screen afterwards</a>ï¼Œæ¨èï¼Œè¯´çš„éå¸¸è¯¦ç»†</li></ol><p>è¿™æ˜¯éå¸¸å¿…è¦çš„è®¾ç½®ï¼Œé»˜è®¤åº”è¯¥æ˜¯å…³é—­ï¼Œåˆ™åœ¨ä½¿ç”¨vimç­‰åº”ç”¨ä¹‹åï¼Œä¸Šä¸€é¡µä¼šæ®‹ç•™ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·ï¼š</p><p><img src="/2021/02/04/screen-usage/image-20210204121301491.png" alt="image-20210204121301491"></p><p>å¼€å¯<code>altscreen on</code>ä¹‹åï¼Œç¼–è¾‘å®Œç›´æ¥é€€å‡ºï¼Œä¸ä¼šæœ‰æ®‹ç•™</p><p><img src="/2021/02/04/screen-usage/image-20210204121411454.png" alt="image-20210204121411454"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ä¿®æ”¹srceenrcåä¸é‡å¯screenç”Ÿæ•ˆ&quot;&gt;&lt;a href=&quot;#ä¿®æ”¹srceenrcåä¸é‡å¯screenç”Ÿæ•ˆ&quot; class=&quot;headerlink&quot; title=&quot;ä¿®æ”¹srceenrcåä¸é‡å¯screenç”Ÿæ•ˆ&quot;&gt;&lt;/a&gt;ä¿®æ”¹&lt;code&gt;srceenrc&lt;/co</summary>
      
    
    
    
    <category term="linux" scheme="https://khalitt.github.io/categories/linux/"/>
    
    
    <category term="linux" scheme="https://khalitt.github.io/tags/linux/"/>
    
    <category term="screen" scheme="https://khalitt.github.io/tags/screen/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³Pytorch RuntimeError: element 0 of tensors does not require grad and does not have a grad_fn</title>
    <link href="https://khalitt.github.io/2021/02/03/problems-record/pytorch-does-not-require-grad-and-does-not-have-a-grad_fn/"/>
    <id>https://khalitt.github.io/2021/02/03/problems-record/pytorch-does-not-require-grad-and-does-not-have-a-grad_fn/</id>
    <published>2021-02-02T16:36:43.000Z</published>
    <updated>2021-02-03T06:09:56.361Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>ä½¿ç”¨IEGç³»åˆ—è¿‡ç¨‹ä¸­ï¼Œå‘ç”Ÿå¦‚ä¸‹é—®é¢˜<code>RuntimeError: element 0 of tensors does not require grad and does not have a grad_fn</code>ï¼š</p><p><img src="/2021/02/03/problems-record/pytorch-does-not-require-grad-and-does-not-have-a-grad_fn/image-20210203004302851.png" alt="image-20210203004302851"></p><h1 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h1><p>æ¨¡å‹å†™é”™äº†ï¼ï¼è¦æ³¨æ„è¦ç”¨meta moduleï¼ï¼ä¸èƒ½å¸¸è§„çš„<code>nn.Module</code>ï¼Œå› ä¸ºè¿™é‡Œé¢è¿”å›çš„<code>params</code>éƒ½æ˜¯<code>nn.Paramter</code>è€Œéåƒ<code>MetaModule</code>é‚£æ ·æ˜¯<code>torch.tensor</code></p><p><img src="/2021/02/03/problems-record/pytorch-does-not-require-grad-and-does-not-have-a-grad_fn/image-20210203004956976.png" alt="image-20210203004956976"></p><h1 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h1><p>ç›´æ¥æ”¹å›æ¥å°±å¥½äº†ï¼ï¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é—®é¢˜&quot;&gt;&lt;a href=&quot;#é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;é—®é¢˜&quot;&gt;&lt;/a&gt;é—®é¢˜&lt;/h1&gt;&lt;p&gt;ä½¿ç”¨IEGç³»åˆ—è¿‡ç¨‹ä¸­ï¼Œå‘ç”Ÿå¦‚ä¸‹é—®é¢˜&lt;code&gt;RuntimeError: element 0 of tensors does not req</summary>
      
    
    
    
    <category term="pytorch" scheme="https://khalitt.github.io/categories/pytorch/"/>
    
    
    <category term="pytorch" scheme="https://khalitt.github.io/tags/pytorch/"/>
    
  </entry>
  
  <entry>
    <title>pytorch nanå¤„ç†</title>
    <link href="https://khalitt.github.io/2021/02/01/problems-record/pytorch-handling-nan/"/>
    <id>https://khalitt.github.io/2021/02/01/problems-record/pytorch-handling-nan/</id>
    <published>2021-02-01T12:36:37.000Z</published>
    <updated>2021-02-01T12:49:45.594Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>è®­ç»ƒåˆ°ä¸­é€”å‡ºç°Nan</p><p><img src="/2021/02/01/problems-record/pytorch-handling-nan/image-20210201204028670.png" alt="image-20210201204028670"></p><h1 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h1><p>æš‚æ—¶æœªçŸ¥ï¼ŒæŒ‰ç…§ <a href="https://discuss.pytorch.org/t/weights-become-nan-values-after-first-batch-step/87594">Weights become NaN values after first batch step</a>ä¸­æåˆ°çš„æ–¹æ³•ï¼š</p><ul><li><p><code>torch.autograd.set_detect_anomaly(True)</code></p></li><li><pre><code class="python">for name, param in model.named_parameters():    print(name, torch.isfinite(param.grad).all())<pre class="line-numbers language-none"><code class="language-none">å¥½åƒåœ¨å‘ç”Ÿé—®é¢˜ä¹‹å‰éƒ½æ˜¯æ­£å¸¸çš„ï¼š![image-20210201204550453](&#x2F;image-20210201204550453.png)![image-20210201204701789](&#x2F;image-20210201204701789.png)# è§£å†³æ–¹æ³•åŸºæœ¬æ— è§£ï¼Œåªèƒ½åšä¸€ä¸ªå¼‚å¸¸æ•æ‰çš„å¤„ç†&#96;&#96;&#96;python            loss &#x3D; (w_loss + eps_loss) &#x2F; 2. + un_loss + penalty            if torch.isnan(loss):                raise ValueError(f&quot;Found invalid nan trains at batch &#123;batch_idx&#125; &#x2F; epoch &#123;epoch&#125;&quot;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>    res <span class="token operator">=</span> trainer<span class="token punctuation">.</span>train<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">except</span> ValueError <span class="token keyword">as</span> e<span class="token punctuation">:</span>    logger<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">&#123;</span>e<span class="token punctuation">&#125;</span></span><span class="token string">, return 0.0 res"</span></span><span class="token punctuation">)</span>    <span class="token keyword">break</span><span class="token keyword">if</span> res <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>    all_res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>res<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é—®é¢˜&quot;&gt;&lt;a href=&quot;#é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;é—®é¢˜&quot;&gt;&lt;/a&gt;é—®é¢˜&lt;/h1&gt;&lt;p&gt;è®­ç»ƒåˆ°ä¸­é€”å‡ºç°Nan&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2021/02/01/problems-record/pytorch-handli</summary>
      
    
    
    
    <category term="pytorch" scheme="https://khalitt.github.io/categories/pytorch/"/>
    
    
    <category term="pytorch" scheme="https://khalitt.github.io/tags/pytorch/"/>
    
  </entry>
  
  <entry>
    <title>hydraå¯é‡å¤æ€§</title>
    <link href="https://khalitt.github.io/2021/02/01/problems-record/hydra-reproducibility/"/>
    <id>https://khalitt.github.io/2021/02/01/problems-record/hydra-reproducibility/</id>
    <published>2021-01-31T16:06:31.000Z</published>
    <updated>2021-01-31T16:20:51.345Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>è™½ç„¶è®¾ç½®äº†pytorchå’Œnumpyçš„seedï¼Œç„¶è€ŒåŒæ ·çš„å‚æ•°ï¼Œç”¨<code>joblib</code>è·‘å‡ºæ¥çš„å®éªŒç»“æœä»ç„¶æ˜¯ä¸åŒçš„ï¼Œä½†æ˜¯å¥‡æ€ªçš„æ˜¯å¦‚æœä¸ç”¨<code>joblib</code>ï¼Œé»˜è®¤çš„launcheråŒæ ·çš„å‚æ•°ç›´æ¥è·‘å´æ²¡é—®é¢˜</p><h1 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h1><p>å…·ä½“åŸå› ä¸è¯¦ï¼ŒçŒœæµ‹æ˜¯å’Œ<code>joblib</code>æœ‰å…³ã€‚åé€šè¿‡å®éªŒéªŒè¯ï¼šåœ¨<code>main()</code>å¤–é¢è®¾ç½®çš„seedï¼Œåœ¨<code>joblib</code>çš„ç¯å¢ƒä¸‹ä¸èµ·æ•ˆã€‚</p><h1 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h1><h2 id="numpy"><a href="#numpy" class="headerlink" title="numpy"></a>numpy</h2><p>å¾ˆç®€å•ï¼Œç›´æ¥åœ¨<code>main()</code>å‡½æ•°å†…éƒ¨è®¾ç½®<code>seed</code>å°±å¯ä»¥äº†</p><h2 id="pytorch"><a href="#pytorch" class="headerlink" title="pytorch"></a>pytorch</h2><p>ç¨å¾®æœ‰ç‚¹éº»çƒ¦ï¼š</p><ul><li>å¦‚æœä¸ç”¨gpuï¼Œå³ä¸è®¾ç½®CUDAç›¸å…³çš„<code>deterministic</code>çš„è¡Œä¸ºï¼Œå’Œnumpyä¸€æ ·åœ¨<code>main</code>å‡½æ•°å†…éƒ¨ç›´æ¥è®¾ç½®<code>seed</code>å³å¯</li><li>ä½†æ˜¯å¦‚æœè¦ä½¿ç”¨<code>gpu</code>ï¼Œåˆ™å¤§æ¦‚ç‡è¦è®¾ç½®CUDAç›¸å…³çš„<code>deterministic</code>çš„å‚æ•°ï¼Œæ­¤æ—¶ç›´æ¥åœ¨<code>main()</code>å†…éƒ¨è®¾ç½®<code>seed</code>å°†ä¼šç›´æ¥æŠ¥é”™ï¼š<code>TypeError: can&#39;t pickle CudnnModule objects</code>ï¼ŒåæŸ¥é˜…èµ„æ–™ï¼Œ<a href="https://github.com/ray-project/ray/issues/8569#issuecomment-632993176">Canâ€™t pickle CudnnModule objects</a>ï¼Œå‘ç°rayä¹Ÿæœ‰è¿™ä¸ªé—®é¢˜ï¼Œå‚è€ƒè¿™ä¸ªå›ç­”çš„åšæ³•å°±å¯ä»¥äº†</li></ul><h2 id="æ±‡æ€»"><a href="#æ±‡æ€»" class="headerlink" title="æ±‡æ€»"></a>æ±‡æ€»</h2><p>ä»åŸæ¥çš„ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> logging<span class="token keyword">import</span> hydra<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> torchlogger <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>SEED <span class="token operator">=</span> <span class="token number">1234</span>np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>seed<span class="token punctuation">(</span>SEED<span class="token punctuation">)</span>torch<span class="token punctuation">.</span>backends<span class="token punctuation">.</span>cudnn<span class="token punctuation">.</span>deterministic <span class="token operator">=</span> <span class="token boolean">True</span>torch<span class="token punctuation">.</span>backends<span class="token punctuation">.</span>cudnn<span class="token punctuation">.</span>benchmark <span class="token operator">=</span> <span class="token boolean">False</span>torch<span class="token punctuation">.</span>manual_seed<span class="token punctuation">(</span>SEED<span class="token punctuation">)</span><span class="token decorator annotation punctuation">@hydra<span class="token punctuation">.</span>main</span><span class="token punctuation">(</span>config_path<span class="token operator">=</span><span class="token string">'./'</span><span class="token punctuation">,</span> config_name<span class="token operator">=</span><span class="token string">'myconfig_multi'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">hydra_main</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># logger.info(f"num iter:&#123;config.num_iters&#125; pytorch int:&#123;torch.randint(10, (1,))&#125;")</span>    logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"num iter:</span><span class="token interpolation"><span class="token punctuation">&#123;</span>config<span class="token punctuation">.</span>num_iters<span class="token punctuation">&#125;</span></span><span class="token string"> int:</span><span class="token interpolation"><span class="token punctuation">&#123;</span>np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></span><span class="token string"> pytorch int:</span><span class="token interpolation"><span class="token punctuation">&#123;</span>torch<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    hydra_main<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ”¹æˆä¸‹é¢è¿™ç§</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> logging<span class="token keyword">import</span> hydra<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> torchlogger <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>SEED <span class="token operator">=</span> <span class="token number">1234</span><span class="token decorator annotation punctuation">@hydra<span class="token punctuation">.</span>main</span><span class="token punctuation">(</span>config_path<span class="token operator">=</span><span class="token string">'./'</span><span class="token punctuation">,</span> config_name<span class="token operator">=</span><span class="token string">'myconfig_multi'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">hydra_main</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">import</span> torch    torch<span class="token punctuation">.</span>manual_seed<span class="token punctuation">(</span>SEED<span class="token punctuation">)</span>    torch<span class="token punctuation">.</span>backends<span class="token punctuation">.</span>cudnn<span class="token punctuation">.</span>deterministic <span class="token operator">=</span> <span class="token boolean">True</span>    torch<span class="token punctuation">.</span>backends<span class="token punctuation">.</span>cudnn<span class="token punctuation">.</span>benchmark <span class="token operator">=</span> <span class="token boolean">False</span>    np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>seed<span class="token punctuation">(</span>SEED<span class="token punctuation">)</span>    <span class="token comment"># logger.info(f"num iter:&#123;config.num_iters&#125; pytorch int:&#123;torch.randint(10, (1,))&#125;")</span>    logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"num iter:</span><span class="token interpolation"><span class="token punctuation">&#123;</span>config<span class="token punctuation">.</span>num_iters<span class="token punctuation">&#125;</span></span><span class="token string"> int:</span><span class="token interpolation"><span class="token punctuation">&#123;</span>np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></span><span class="token string"> pytorch int:</span><span class="token interpolation"><span class="token punctuation">&#123;</span>torch<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    hydra_main<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åé¢è„šæœ¬çš„æ•ˆæœ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:23,724<span class="token punctuation">]</span><span class="token punctuation">[</span>HYDRA<span class="token punctuation">]</span> Joblib.Parallel<span class="token punctuation">(</span>n_jobs<span class="token operator">=</span><span class="token number">5</span>,backend<span class="token operator">=</span>loky,prefer<span class="token operator">=</span>processes,require<span class="token operator">=</span>None,verbose<span class="token operator">=</span><span class="token number">0</span>,timeout<span class="token operator">=</span>None,pre_dispatch<span class="token operator">=</span><span class="token number">2</span>*n_jobs,batch_size<span class="token operator">=</span>auto,temp_folder<span class="token operator">=</span>None,max_nbytes<span class="token operator">=</span>None,mmap_mode<span class="token operator">=</span>r<span class="token punctuation">)</span> is launching <span class="token number">10</span> <span class="token function">jobs</span><span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:23,725<span class="token punctuation">]</span><span class="token punctuation">[</span>HYDRA<span class="token punctuation">]</span> Launching jobs, sweep output <span class="token function">dir</span> <span class="token builtin class-name">:</span> multirun/2021-02-01/00-18-21<span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:23,725<span class="token punctuation">]</span><span class="token punctuation">[</span>HYDRA<span class="token punctuation">]</span>        <span class="token comment">#0 : num_iters=0</span><span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:23,725<span class="token punctuation">]</span><span class="token punctuation">[</span>HYDRA<span class="token punctuation">]</span>        <span class="token comment">#1 : num_iters=1</span><span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:23,725<span class="token punctuation">]</span><span class="token punctuation">[</span>HYDRA<span class="token punctuation">]</span>        <span class="token comment">#2 : num_iters=2</span><span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:23,725<span class="token punctuation">]</span><span class="token punctuation">[</span>HYDRA<span class="token punctuation">]</span>        <span class="token comment">#3 : num_iters=3</span><span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:23,725<span class="token punctuation">]</span><span class="token punctuation">[</span>HYDRA<span class="token punctuation">]</span>        <span class="token comment">#4 : num_iters=4</span><span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:23,726<span class="token punctuation">]</span><span class="token punctuation">[</span>HYDRA<span class="token punctuation">]</span>        <span class="token comment">#5 : num_iters=5</span><span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:23,726<span class="token punctuation">]</span><span class="token punctuation">[</span>HYDRA<span class="token punctuation">]</span>        <span class="token comment">#6 : num_iters=6</span><span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:23,726<span class="token punctuation">]</span><span class="token punctuation">[</span>HYDRA<span class="token punctuation">]</span>        <span class="token comment">#7 : num_iters=7</span><span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:23,726<span class="token punctuation">]</span><span class="token punctuation">[</span>HYDRA<span class="token punctuation">]</span>        <span class="token comment">#8 : num_iters=8</span><span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:23,726<span class="token punctuation">]</span><span class="token punctuation">[</span>HYDRA<span class="token punctuation">]</span>        <span class="token comment">#9 : num_iters=9</span><span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:52,994<span class="token punctuation">]</span><span class="token punctuation">[</span>__main__<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> - num iter:0 int:3 pytorch int:2<span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:53,089<span class="token punctuation">]</span><span class="token punctuation">[</span>__main__<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> - num iter:1 int:3 pytorch int:2<span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:53,350<span class="token punctuation">]</span><span class="token punctuation">[</span>__main__<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> - num iter:2 int:3 pytorch int:2<span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:54,099<span class="token punctuation">]</span><span class="token punctuation">[</span>__main__<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> - num iter:4 int:3 pytorch int:2<span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:54,232<span class="token punctuation">]</span><span class="token punctuation">[</span>__main__<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> - num iter:3 int:3 pytorch int:2<span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:54,610<span class="token punctuation">]</span><span class="token punctuation">[</span>__main__<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> - num iter:5 int:3 pytorch int:2<span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:54,740<span class="token punctuation">]</span><span class="token punctuation">[</span>__main__<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> - num iter:6 int:3 pytorch int:2<span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:54,860<span class="token punctuation">]</span><span class="token punctuation">[</span>__main__<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> - num iter:7 int:3 pytorch int:2<span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:55,134<span class="token punctuation">]</span><span class="token punctuation">[</span>__main__<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> - num iter:8 int:3 pytorch int:2<span class="token punctuation">[</span><span class="token number">2021</span>-02-01 00:18:55,147<span class="token punctuation">]</span><span class="token punctuation">[</span>__main__<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> - num iter:9 int:3 pytorch int:2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é—®é¢˜&quot;&gt;&lt;a href=&quot;#é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;é—®é¢˜&quot;&gt;&lt;/a&gt;é—®é¢˜&lt;/h1&gt;&lt;p&gt;è™½ç„¶è®¾ç½®äº†pytorchå’Œnumpyçš„seedï¼Œç„¶è€ŒåŒæ ·çš„å‚æ•°ï¼Œç”¨&lt;code&gt;joblib&lt;/code&gt;è·‘å‡ºæ¥çš„å®éªŒç»“æœä»ç„¶æ˜¯ä¸åŒçš„ï¼Œä½†æ˜¯å¥‡</summary>
      
    
    
    
    <category term="hydra" scheme="https://khalitt.github.io/categories/hydra/"/>
    
    
    <category term="hydra" scheme="https://khalitt.github.io/tags/hydra/"/>
    
    <category term="joblib" scheme="https://khalitt.github.io/tags/joblib/"/>
    
  </entry>
  
  <entry>
    <title>pytorchä¸åŒDataloaderå®ç°æ–¹å¼çš„æ¯”è¾ƒ</title>
    <link href="https://khalitt.github.io/2021/01/21/problems-record/comparision-different_loading_methods/"/>
    <id>https://khalitt.github.io/2021/01/21/problems-record/comparision-different_loading_methods/</id>
    <published>2021-01-21T07:15:16.000Z</published>
    <updated>2021-01-21T07:57:23.807Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>ä¸»è¦æ˜¯ä¸¤ç§å®ç°æ–¹å¼ï¼š</p><ul><li>åŒä¸€ä¸ªæ•°æ®é›†ï¼ŒæŒ‰ç…§ä¸åŒsplitçš„æ–¹å¼åˆ‡åˆ†ï¼ˆæ¯”å¦‚5 Fold Validationï¼‰ï¼Œä¿å­˜åˆ°æœ¬åœ°ï¼Œç„¶åä¾æ¬¡è¯»å…¥5ç§split</li><li>åŒä¸€ä¸ªæ•°æ®é›†ï¼Œå…¨éƒ¨ä¸€æ¬¡æ€§è¯»å…¥ï¼Œç„¶åæŒ‰ç…§ä¸åŒçš„splitçš„æ–¹å¼è¿›è¡Œåˆ‡åˆ†ï¼ŒæŒ‰ç…§è¿­ä»£å™¨æˆ–è€…ç”Ÿæˆå™¨çš„æ–¹å¼è¿”å›åˆ‡åˆ†åçš„datasetæˆ–è€…Dataloader</li></ul><p>æ ¸å¿ƒä»£ç ï¼š</p><p>ç¬¬ä¸€ç§æ–¹å¼</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Reuters</span><span class="token punctuation">(</span>BaseDataLoader<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> root<span class="token punctuation">,</span> batch_size<span class="token punctuation">,</span> dataset_type<span class="token punctuation">,</span> noise_type<span class="token punctuation">,</span> noise_rate<span class="token punctuation">,</span> seed<span class="token punctuation">,</span> balance<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> shuffle<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>                 modalities<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> num_workers<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>dataset <span class="token operator">=</span> ReutersDataset<span class="token punctuation">(</span>root<span class="token punctuation">,</span> dataset_type<span class="token punctuation">,</span> noise_type<span class="token punctuation">,</span> noise_rate<span class="token punctuation">,</span> seed<span class="token punctuation">,</span> balance<span class="token punctuation">,</span> modalities<span class="token punctuation">)</span>        logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'&#123;&#125; dataset with &#123;&#125; samples'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>dataset_type<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>dataset<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">.</span>dataset<span class="token punctuation">,</span> batch_size<span class="token punctuation">,</span> shuffle<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> num_workers<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¬¬äºŒç§æ–¹å¼ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">get_reuters_cv_dataloader</span><span class="token punctuation">(</span>og_data<span class="token punctuation">,</span> batch_size<span class="token punctuation">,</span> noise_type<span class="token punctuation">,</span> noise_rate<span class="token punctuation">,</span> n_classes<span class="token punctuation">,</span> seed<span class="token punctuation">,</span> val_test_split<span class="token punctuation">,</span> n_splits<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>                              deal_imbalance<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>                              modalities<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> num_workers<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> shuffle<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># List[Dataset]</span>    all_train_dataset<span class="token punctuation">,</span> all_val_dataset<span class="token punctuation">,</span> all_test_dataset <span class="token operator">=</span> get_reuters_cv_dataset<span class="token punctuation">(</span>og_data<span class="token punctuation">,</span> noise_type<span class="token punctuation">,</span> noise_rate<span class="token punctuation">,</span>                                                                                  n_classes<span class="token punctuation">,</span> seed<span class="token punctuation">,</span> val_test_split<span class="token punctuation">,</span>                                                                                  n_splits<span class="token operator">=</span>n_splits<span class="token punctuation">,</span>                                                                                  deal_imbalance<span class="token operator">=</span>deal_imbalance<span class="token punctuation">,</span>                                                                                  modalities<span class="token operator">=</span>modalities<span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n_splits<span class="token punctuation">)</span><span class="token punctuation">:</span>        train_data_loader <span class="token operator">=</span> BaseDataLoader<span class="token punctuation">(</span>all_train_dataset<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> batch_size<span class="token punctuation">,</span> shuffle<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> num_workers<span class="token punctuation">)</span>        val_data_loader <span class="token operator">=</span> BaseDataLoader<span class="token punctuation">(</span>all_val_dataset<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> batch_size<span class="token punctuation">,</span> shuffle<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> num_workers<span class="token punctuation">)</span>        test_data_loader <span class="token operator">=</span> BaseDataLoader<span class="token punctuation">(</span>all_test_dataset<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> batch_size<span class="token punctuation">,</span> shuffle<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> num_workers<span class="token punctuation">)</span>        <span class="token keyword">yield</span> train_data_loader<span class="token punctuation">,</span> val_data_loader<span class="token punctuation">,</span> test_data_loader<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æ¯”è¾ƒ"><a href="#æ¯”è¾ƒ" class="headerlink" title="æ¯”è¾ƒ"></a>æ¯”è¾ƒ</h1><p>æ¯”è¾ƒçš„æ–¹å¼ï¼š5ç§åˆ‡åˆ†æ–¹å¼ï¼ˆ5 Fold Validationï¼‰ï¼Œè·‘10æ¬¡å–å¹³å‡ï¼Œå¹¶è¾“å‡ºæ¯ä¸€æ¬¡ä¸¤ç§åˆå§‹åŒ–æ–¹å¼çš„æ€»æ—¶é—´</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> omegaconf <span class="token keyword">import</span> OmegaConf<span class="token keyword">from</span> srcs<span class="token punctuation">.</span>data_loader<span class="token punctuation">.</span>all_data_loaders <span class="token keyword">import</span> get_reuters_cv_dataloader<span class="token keyword">from</span> srcs<span class="token punctuation">.</span>utils <span class="token keyword">import</span> instantiateconfig <span class="token operator">=</span> OmegaConf<span class="token punctuation">.</span>load<span class="token punctuation">(</span>    <span class="token string">'/home/weitaotang/multimodal/hydra_templates/srcs/independent_utlis/test_different_loaders/reuters_all_cv_train.yaml'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">independent_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    begin <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>n_splits<span class="token punctuation">)</span><span class="token punctuation">:</span>        config<span class="token punctuation">.</span>root <span class="token operator">=</span> config<span class="token punctuation">.</span>root<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>        train_data_loader <span class="token operator">=</span> instantiate<span class="token punctuation">(</span>config<span class="token punctuation">.</span>train<span class="token punctuation">)</span>        valid_data_loader <span class="token operator">=</span> instantiate<span class="token punctuation">(</span>config<span class="token punctuation">.</span>val<span class="token punctuation">)</span>        test_data_loader <span class="token operator">=</span> instantiate<span class="token punctuation">(</span>config<span class="token punctuation">.</span>test<span class="token punctuation">)</span>        <span class="token comment"># end = time.time()</span>        <span class="token comment"># print("Split &#123;&#125; used &#123;:.3f&#125;s".format(i, end - begin))</span>    end <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Independent init used &#123;:.3f&#125; seconds'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>end <span class="token operator">-</span> begin<span class="token punctuation">)</span><span class="token punctuation">)</span>    res <span class="token operator">=</span> end <span class="token operator">-</span> begin    <span class="token keyword">return</span> res<span class="token keyword">def</span> <span class="token function">all_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    begin <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>    cv_dataloader <span class="token operator">=</span> get_reuters_cv_dataloader<span class="token punctuation">(</span>config<span class="token punctuation">.</span>og_data<span class="token punctuation">,</span> config<span class="token punctuation">.</span>batch_size<span class="token punctuation">,</span> config<span class="token punctuation">.</span>noise_type<span class="token punctuation">,</span> config<span class="token punctuation">.</span>noise_rate<span class="token punctuation">,</span>                                              config<span class="token punctuation">.</span>n_classes<span class="token punctuation">,</span> config<span class="token punctuation">.</span>seed<span class="token punctuation">,</span> config<span class="token punctuation">.</span>val_test_split<span class="token punctuation">,</span>                                              config<span class="token punctuation">.</span>n_splits<span class="token punctuation">,</span> config<span class="token punctuation">.</span>deal_imbalance<span class="token punctuation">,</span> config<span class="token punctuation">.</span>modalities<span class="token punctuation">,</span>                                              config<span class="token punctuation">.</span>num_workers<span class="token punctuation">,</span> config<span class="token punctuation">.</span>shuffle<span class="token punctuation">)</span>    <span class="token comment"># cv_dataloader_iter = iter(cv_dataloader)</span>    <span class="token comment"># train, valid, test = next(cv_dataloader_iter)</span>    <span class="token keyword">for</span> i<span class="token punctuation">,</span> <span class="token punctuation">(</span>train<span class="token punctuation">,</span> valid<span class="token punctuation">,</span> test<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>cv_dataloader<span class="token punctuation">)</span><span class="token punctuation">:</span>        end <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># print("Split &#123;&#125; used &#123;:.3f&#125;s".format(i, end - begin))</span>        <span class="token keyword">pass</span>    end <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'ALL init used &#123;:.3f&#125; seconds'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>end <span class="token operator">-</span> begin<span class="token punctuation">)</span><span class="token punctuation">)</span>    res <span class="token operator">=</span> end <span class="token operator">-</span> begin    <span class="token keyword">return</span> res<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    all_res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        all_res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>independent_init<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        all_res<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>all_init<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Independent avg:&#123;:.6f&#125; | all avg: &#123;:.6f&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token builtin">sum</span><span class="token punctuation">(</span>all_res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">.</span> <span class="token operator">/</span> <span class="token builtin">len</span><span class="token punctuation">(</span>all_res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                                            <span class="token builtin">sum</span><span class="token punctuation">(</span>all_res<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">.</span> <span class="token operator">/</span> <span class="token builtin">len</span><span class="token punctuation">(</span>all_res<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Independent init used <span class="token number">6.621</span> secondsALL init used <span class="token number">6.215</span> secondsIndependent init used <span class="token number">6.875</span> secondsALL init used <span class="token number">6.074</span> secondsIndependent init used <span class="token number">6.661</span> secondsALL init used <span class="token number">6.247</span> secondsIndependent init used <span class="token number">6.416</span> secondsALL init used <span class="token number">5.833</span> secondsIndependent init used <span class="token number">6.244</span> secondsALL init used <span class="token number">6.292</span> secondsIndependent init used <span class="token number">7.124</span> secondsALL init used <span class="token number">5.922</span> secondsIndependent init used <span class="token number">6.636</span> secondsALL init used <span class="token number">6.253</span> secondsIndependent init used <span class="token number">6.307</span> secondsALL init used <span class="token number">6.150</span> secondsIndependent init used <span class="token number">6.520</span> secondsALL init used <span class="token number">5.989</span> secondsIndependent init used <span class="token number">6.841</span> secondsALL init used <span class="token number">6.281</span> secondsIndependent avg:6.624528 <span class="token operator">|</span> all avg: <span class="token number">6.125607</span>Process finished with <span class="token builtin class-name">exit</span> code <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°æ€»ä½“ä¸Šè¿˜æ˜¯<strong>æ–¹å¼äºŒå¿«ä¸€äº›</strong>ï¼Œ<strong>ç›´æ¥è¯»å…¥æ‰€æœ‰æ•°æ®ç„¶åç›´æ¥è¿›è¡Œå¤„ç†</strong>ã€‚<strong>ä½†æ˜¯å¼Šç«¯ä¹Ÿæ¯”è¾ƒæ˜æ˜¾</strong>ï¼š</p><ul><li>ä¸å¤Ÿçµæ´»ï¼Œæ¯”å¦‚ä¸æƒ³è¿›è¡Œvalidationçš„æ—¶å€™ï¼Œå°±éœ€è¦å¦å¤–å†é‡æ–°å®ç°</li><li>å ç”¨å†…å­˜å¯èƒ½è¾ƒå¤§ï¼Œæ¯”å¦‚ä¸æƒ³è½½å…¥å…¨éƒ¨æ•°æ®æ—¶å€™ï¼Œç­‰äºæµªè´¹äº†å†…å­˜</li></ul><p>å› æ­¤å¦‚æœ<strong>ä¸æ˜¯å¯†é›†ioçš„æƒ…å†µï¼Œæ–¹å¼ä¸€å°±å¤Ÿäº†ï¼Œæ›´çµæ´»</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¿°&quot;&gt;&lt;/a&gt;æ¦‚è¿°&lt;/h1&gt;&lt;p&gt;ä¸»è¦æ˜¯ä¸¤ç§å®ç°æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒä¸€ä¸ªæ•°æ®é›†ï¼ŒæŒ‰ç…§ä¸åŒsplitçš„æ–¹å¼åˆ‡åˆ†ï¼ˆæ¯”å¦‚5 Fold Validationï¼‰ï¼Œä¿å­˜åˆ°</summary>
      
    
    
    
    <category term="python" scheme="https://khalitt.github.io/categories/python/"/>
    
    
    <category term="python" scheme="https://khalitt.github.io/tags/python/"/>
    
    <category term="io" scheme="https://khalitt.github.io/tags/io/"/>
    
  </entry>
  
  <entry>
    <title>hydra optuna sweeper TypeError: &#39;float&#39; object is not iterableçš„é”™è¯¯</title>
    <link href="https://khalitt.github.io/2021/01/20/problems-record/hydra-optuna-TypeError/"/>
    <id>https://khalitt.github.io/2021/01/20/problems-record/hydra-optuna-TypeError/</id>
    <published>2021-01-20T08:42:06.000Z</published>
    <updated>2021-01-20T12:47:28.710Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>ä¸è®ºæ˜¯ç›´æ¥è·‘ <a href="https://github.com/toshihikoyanase/hydra-optuna-sweeper">hydra-optuna-sweeper</a>æˆ–è€… <a href="https://github.com/facebookresearch">facebookresearch</a>/**<a href="https://github.com/facebookresearch/hydra">hydra</a>**çš„å®˜æ–¹ä¾‹å­ï¼Œéƒ½ä¼šæŠ¥é”™<code>TypeError: &#39;float&#39; object is not iterable</code></p><p><img src="/2021/01/20/problems-record/hydra-optuna-TypeError/image-20210120164237711.png" alt="image-20210120164237711"></p><h1 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h1><p>optunaä»2.4.0å¼€å§‹ä¹‹åï¼Œè¦æ±‚ä¸»å‡½æ•°çš„è¿”å›çš„ç»“æœå¿…é¡»å¾—æ˜¯<code>List[]</code>ç±»å‹çš„ã€‚è¿™é‡Œå‡ºé”™çš„é˜¶æ®µæ˜¯æŠŠè¿è¡Œç»“æœ<code>tell</code>ç»™optunaçš„è¿‡ç¨‹ä¸­ï¼Œè¿”å›çš„ç»“æœæ˜¯å•ä¸€çš„floatè€Œä¸æ˜¯list</p><h1 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h1><p>åœ¨è¿”å›ç»“æœä¸­æ·»åŠ ä¸€ä¸ª<code>list</code>å³å¯</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> typing <span class="token keyword">import</span> Any<span class="token keyword">import</span> hydra<span class="token keyword">from</span> omegaconf <span class="token keyword">import</span> DictConfig<span class="token decorator annotation punctuation">@hydra<span class="token punctuation">.</span>main</span><span class="token punctuation">(</span>config_path<span class="token operator">=</span><span class="token string">"conf"</span><span class="token punctuation">,</span> config_name<span class="token operator">=</span><span class="token string">"config"</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">evaluate</span><span class="token punctuation">(</span>cfg<span class="token punctuation">:</span> DictConfig<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> Any<span class="token punctuation">:</span>    x <span class="token operator">=</span> cfg<span class="token punctuation">.</span>x    y <span class="token operator">=</span> cfg<span class="token punctuation">.</span>y    <span class="token comment"># return (x - 2) ** 2 + y # æŠ¥é”™çš„åŸç‰ˆ</span>    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">(</span>x <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> y<span class="token punctuation">]</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    evaluate<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é—®é¢˜&quot;&gt;&lt;a href=&quot;#é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;é—®é¢˜&quot;&gt;&lt;/a&gt;é—®é¢˜&lt;/h1&gt;&lt;p&gt;ä¸è®ºæ˜¯ç›´æ¥è·‘ &lt;a href=&quot;https://github.com/toshihikoyanase/hydra-optuna-sweepe</summary>
      
    
    
    
    <category term="optuna" scheme="https://khalitt.github.io/categories/optuna/"/>
    
    
    <category term="hydra" scheme="https://khalitt.github.io/tags/hydra/"/>
    
    <category term="optuna" scheme="https://khalitt.github.io/tags/optuna/"/>
    
  </entry>
  
  <entry>
    <title>docker-mongodb-sacred</title>
    <link href="https://khalitt.github.io/2021/01/19/problems-record/docker-mongdb-sacred/"/>
    <id>https://khalitt.github.io/2021/01/19/problems-record/docker-mongdb-sacred/</id>
    <published>2021-01-19T07:17:46.000Z</published>
    <updated>2021-01-19T13:42:37.362Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Exit-100-çš„é—®é¢˜"><a href="#Exit-100-çš„é—®é¢˜" class="headerlink" title="Exit(100)çš„é—®é¢˜"></a>Exit(100)çš„é—®é¢˜</h1><p>å°è¯•ç”¨ä¸‹è¿°çš„å‘½ä»¤å¯åŠ¨MongoDBï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker run --name mongo -p <span class="token number">27018</span>:27018 -v /home/weitaotang/multimodal/pytorch_hydra_results_temp/mongo_data:/data/db mongo<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2021/01/19/problems-record/docker-mongdb-sacred/image-20210119152405533.png" alt="image-20210119152405533"></p><p>çŒœæµ‹åº”è¯¥æ˜¯æƒé™é—®é¢˜ï¼Œæ ¹æ® <a href="https://stackoverflow.com/a/44782245">Permission error with mongo when running docker</a>ï¼šæœ€ä½³çš„è§£å†³æ–¹æ³•<strong>æ˜¯ä¸æŒ‚è½½ï¼ŒåæœŸå•ç‹¬å¯¼å‡ºå³å¯</strong></p><p>ä½†æ˜¯è¿™é‡Œè¿˜æ˜¯æƒ³å­˜åˆ°ä¸€ä¸ªå›ºå®šçš„åœ°æ–¹ï¼Œåˆ™è¿™é‡Œåªå¯ä»¥å­˜åœ¨<code>/tmp</code>æ——ä¸‹çš„åœ°æ–¹ï¼Œä¸å¥½ã€‚æœ€å¥½è¿˜æ˜¯å®šæœŸçš„exportå³å¯ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Exit-100-çš„é—®é¢˜&quot;&gt;&lt;a href=&quot;#Exit-100-çš„é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;Exit(100)çš„é—®é¢˜&quot;&gt;&lt;/a&gt;Exit(100)çš„é—®é¢˜&lt;/h1&gt;&lt;p&gt;å°è¯•ç”¨ä¸‹è¿°çš„å‘½ä»¤å¯åŠ¨MongoDBï¼š&lt;/p&gt;
&lt;pre cl</summary>
      
    
    
    
    <category term="problems" scheme="https://khalitt.github.io/categories/problems/"/>
    
    
    <category term="docker" scheme="https://khalitt.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>ipythonæ— æ³•å¯åŠ¨</title>
    <link href="https://khalitt.github.io/2021/01/13/problems-record/ipython-hanging/"/>
    <id>https://khalitt.github.io/2021/01/13/problems-record/ipython-hanging/</id>
    <published>2021-01-13T01:41:50.000Z</published>
    <updated>2021-01-13T07:04:33.545Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>ipythonæ— æ³•å¯åŠ¨ï¼š</p><ul><li>æ— æ³•ä½¿ç”¨remote debuggerï¼Œè¡¨ç°ä¸ºåœ¨ipython consoleä¸­ä¸€è¾“å…¥å‘½ä»¤å°±å¡æ­»ã€‚è€Œåå°è¯•å•ç‹¬ç”¨ipython/ipdbï¼Œå‘ç°ç—‡çŠ¶ç±»ä¼¼ï¼ŒåŒæ ·æ˜¯è¾“å…¥ipythonå°±ä¼šå¡æ­»</li><li>ç»†æŸ¥è¿›ç¨‹ï¼Œå‘ç°ä¸€æ—¦åœ¨ipython consoleå¼€å§‹è¾“å…¥å‘½ä»¤åï¼Œå°±ä»åŸæ¥çš„<code>SL+</code>å˜æˆäº†<code>DL+</code></li><li><code>ipython --log-version=DEBUG</code>å‘ç°å¡æ­»åœ¨æœç´¢configä¸­</li></ul><p><img src="/2021/01/13/problems-record/ipython-hanging/image-20210113111830260.png" alt="image-20210113111830260"></p><h1 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h1><p>å‚è€ƒ <a href="https://github.com/ipython/ipython/issues/11678#issuecomment-527597571">ipython wonâ€™t start</a></p><p>NFSæ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç›®å½•å‘ç”Ÿäº†å˜åŒ–ï¼Œå¯¼è‡´é»˜è®¤çš„sqliteæ— æ³•ä½¿ç”¨ã€‚</p><blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#  By default, IPython will put the history database in the IPython profile</span><span class="token comment">#  directory.  If you would rather share one history among profiles, you can set</span><span class="token comment">#  this value in each, so that they are consistent.</span><span class="token comment">#</span><span class="token comment">#  Due to an issue with fcntl, SQLite is known to misbehave on some NFS mounts.</span><span class="token comment">#  If you see IPython hanging, try setting this to something on a local disk,</span><span class="token comment">#  e.g::</span><span class="token comment">#</span><span class="token comment">#      ipython --HistoryManager.hist_file=/tmp/ipython_hist.sqlite</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><h1 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h1><ol><li>é€šè¿‡<code>ipython create profile</code>åœ¨<code>~/.ipython/profile_default</code>ä¸‹åˆ›å»ºä¸¤ä¸ªconfig pythonè„šæœ¬ï¼š<code>ipython_config.py</code> å’Œ<code>ipython_kernel_config.py</code></li><li>ä¿®æ”¹<code>ipython_config.py</code>ä¸­çš„<code>c.HistoryAccessor.hist_file</code>ä¸ºæœ‰æ•ˆçš„ç›®å½•ï¼Œæ¯”å¦‚æŒ‰ç…§æ³¨é‡Šä¸­çš„<code>/tmp/ipython_hist.sqlite</code>ï¼ˆ**æ¨èï¼šç”±äºNFSå­˜åœ¨é—®é¢˜ï¼Œå› æ­¤æœ€å¥½åœ¨<code>/tmp</code>ç›®å½•ä¸‹åˆ›å»ºå±äºè‡ªå·±çš„<code>sqlite</code>ï¼Œæ¯”å¦‚<code>/tmp/xiaoming_ipython_hist.sqlite</code>**ï¼‰ï¼š</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">c.HistoryAccessor.hist_file <span class="token operator">=</span> <span class="token string">'/tmp/ipython_hist.sqlite'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="PS"><a href="#PS" class="headerlink" title="PS"></a>PS</h1><h2 id="ä¿®æ”¹ipythoné»˜è®¤çš„configure-files"><a href="#ä¿®æ”¹ipythoné»˜è®¤çš„configure-files" class="headerlink" title="ä¿®æ”¹ipythoné»˜è®¤çš„configure files"></a>ä¿®æ”¹ipythoné»˜è®¤çš„configure files</h2><p>å‚è€ƒ <a href="https://stackoverflow.com/a/28254181">Setting iPython default profile</a></p><p>æœ€ç®€å•çš„æ–¹æ³•æ˜¯<strong>ç›´æ¥ä¿®æ”¹<code>profile_default</code>ä¸­çš„æ–‡ä»¶</strong>ï¼Œæˆ–è€…<strong>å¯åŠ¨æ—¶æŒ‡å®š<code>profile</code>ï¼š<code>--profile=testing</code></strong></p><blockquote><p>Take a backup of profile_default and then rename profile_testing to profile_default.</p><p>Or you can copy the contents of profile_testing to profile_default.</p></blockquote><h2 id="jupyter-notebookæœ‰ç±»ä¼¼çš„hangingçš„é—®é¢˜"><a href="#jupyter-notebookæœ‰ç±»ä¼¼çš„hangingçš„é—®é¢˜" class="headerlink" title="jupyter notebookæœ‰ç±»ä¼¼çš„hangingçš„é—®é¢˜"></a>jupyter notebookæœ‰ç±»ä¼¼çš„hangingçš„é—®é¢˜</h2><p>åŸå› å’Œipython hangingçš„åŸå› ä¸€æ ·ï¼Œå› æ­¤è§£å†³æ–¹æ³•ç±»ä¼¼ï¼š</p><ol><li>å¦‚æœæ²¡æœ‰configæ–‡ä»¶ï¼Œ é¦–å…ˆé€šè¿‡<code>jupyter notebook --generate-config</code></li><li>ç„¶ååœ¨<code>~/.jupyter</code>ä¸‹æ‰¾åˆ°<code>jupyter_notebook_config.py</code>ï¼Œç„¶åç¼–è¾‘å…¶ä¸­çš„<code>NotebookNotary.db_fileUnicode</code>é€‰é¡¹</li></ol><blockquote><p>NotebookNotary.db_fileUnicode</p><p>Default: <code>&#39;&#39;</code></p><p>The sqlite file in which to store notebook signatures. By default, this will be in your Jupyter data directory. You can set it to â€˜:memory:â€™ to disable sqlite writing to the filesystem.</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">## The sqlite file in which to store notebook signatures. By default, this will</span><span class="token comment">#  be in your Jupyter data directory. You can set it to ':memory:' to disable</span><span class="token comment">#  sqlite writing to the filesystem.</span>c<span class="token punctuation">.</span>NotebookNotary<span class="token punctuation">.</span>db_file <span class="token operator">=</span> <span class="token string">'/tmp/weitaotang_jupyter.sqlite'</span><span class="token comment">#c.NotebookNotary.db_file = ''</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é—®é¢˜&quot;&gt;&lt;a href=&quot;#é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;é—®é¢˜&quot;&gt;&lt;/a&gt;é—®é¢˜&lt;/h1&gt;&lt;p&gt;ipythonæ— æ³•å¯åŠ¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ— æ³•ä½¿ç”¨remote debuggerï¼Œè¡¨ç°ä¸ºåœ¨ipython consoleä¸­ä¸€è¾“å…¥å‘½</summary>
      
    
    
    
    <category term="problems" scheme="https://khalitt.github.io/categories/problems/"/>
    
    
    <category term="ipython" scheme="https://khalitt.github.io/tags/ipython/"/>
    
  </entry>
  
  <entry>
    <title>experiments-record</title>
    <link href="https://khalitt.github.io/2021/01/12/experiments-record/"/>
    <id>https://khalitt.github.io/2021/01/12/experiments-record/</id>
    <published>2021-01-12T04:41:49.000Z</published>
    <updated>2021-02-28T01:09:18.607Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Imageå•æ¨¡æ€ï¼ŒLRè®¾ä¸º0-1ä¸å¯è®­ç»ƒï¼ˆä¸å¯è¡Œï¼‰"><a href="#Imageå•æ¨¡æ€ï¼ŒLRè®¾ä¸º0-1ä¸å¯è®­ç»ƒï¼ˆä¸å¯è¡Œï¼‰" class="headerlink" title="Imageå•æ¨¡æ€ï¼ŒLRè®¾ä¸º0.1ä¸å¯è®­ç»ƒï¼ˆä¸å¯è¡Œï¼‰"></a>Imageå•æ¨¡æ€ï¼ŒLRè®¾ä¸º0.1ä¸å¯è®­ç»ƒï¼ˆä¸å¯è¡Œï¼‰</h1><p><strong>å¹¶æ²¡æœ‰tanakaåœ¨joint optimizationä¸­æåˆ°çš„high learning rateèƒ½æœ‰åŠ©äºä¸å­¦ä¹ label noise</strong></p><p>å¯ä»¥çœ‹åˆ°symmetric 0.4æˆ–è€…asymmetric 0.6åœ¨lr 0.1(10x)çš„æƒ…å†µä¸‹ï¼Œå‡†ç¡®ç‡å¾ˆå·®</p><p><img src="/2021/01/12/experiments-record/image-20210112124443147.png" alt="image-20210112124443147"></p><ul><li>symmetric noise 0.4ï¼Œlr 0.1 vs lr 0.01</li></ul><p><img src="/2021/01/12/experiments-record/image-20210112124654925.png" alt="image-20210112124654925"></p><ul><li>asymmetric 0.4 lr 0.1 vs lr 0.01</li></ul><p><img src="/2021/01/12/experiments-record/image-20210112124934367.png" alt="image-20210112124934367"></p><h2 id="LRè®¾ä¸º0-05-0-005ä¹Ÿä¸å¯è¡Œ"><a href="#LRè®¾ä¸º0-05-0-005ä¹Ÿä¸å¯è¡Œ" class="headerlink" title="LRè®¾ä¸º0.05 0.005ä¹Ÿä¸å¯è¡Œ"></a>LRè®¾ä¸º0.05 0.005ä¹Ÿä¸å¯è¡Œ</h2><ul><li>symmetric noise 0.4çš„æƒ…å†µä¸‹ï¼Œå¯¹æ¯”å¯ä»¥çœ‹åˆ°0.1ï¼Œ0.05,0.005éƒ½ä¸å¤ªè¡Œï¼Œåªæœ‰0.01æ¯”è¾ƒå¥½</li></ul><p><img src="/2021/01/12/experiments-record/image-20210112142024373.png" alt="image-20210112142024373"></p><p>çœ‹lossä¹Ÿå¯ä»¥ä¸€å¼€å§‹çš„losséƒ½æ˜¯ä¸å¤ªä¸€æ ·çš„ï¼Œä½†æ˜¯åé¢è¶Šè®­ç»ƒè¶Šè¶‹è¿‘</p><p><img src="/2021/01/12/experiments-record/image-20210112142103537.png" alt="image-20210112142103537"></p><h1 id="T-Revision-MNISTæµ‹è¯•"><a href="#T-Revision-MNISTæµ‹è¯•" class="headerlink" title="T Revision MNISTæµ‹è¯•"></a>T Revision MNISTæµ‹è¯•</h1><h2 id="symmetric-noise-0-4"><a href="#symmetric-noise-0-4" class="headerlink" title="symmetric noise 0.4"></a>symmetric noise 0.4</h2><h3 id="é»˜è®¤å‚æ•°æµ‹è¯•"><a href="#é»˜è®¤å‚æ•°æµ‹è¯•" class="headerlink" title="é»˜è®¤å‚æ•°æµ‹è¯•"></a>é»˜è®¤å‚æ•°æµ‹è¯•</h3><p>MNIST é»˜è®¤<code>batch_size=128</code>æ¥çœ‹ï¼Œä¼°è®¡çš„è¿˜ç®—æ¯”è¾ƒå‡†ç¡®</p><p><img src="/2021/01/12/experiments-record/image-20210112142453614.png" alt="image-20210112142453614"></p><h4 id="batch-size-12800-lr-0-1"><a href="#batch-size-12800-lr-0-1" class="headerlink" title="batch_size = 12800, lr = 0.1"></a><code>batch_size = 12800, lr = 0.1</code></h4><p>å¯ä»¥çœ‹åˆ°æ•ˆæœæ›´å·®äº†ï¼Œè¿˜æ˜¯é»˜è®¤çš„å‚æ•°æ¯”è¾ƒå¥½ã€‚<strong>è€Œä¸”ä¹Ÿå’Œä¼°è®¡å‰å­¦ä¹ åˆ°çš„classifieræœ‰å…³</strong></p><p><img src="/2021/01/12/experiments-record/image-20210112144126932.png" alt="image-20210112144126932"></p><h2 id="asymmetric-noise-0-4"><a href="#asymmetric-noise-0-4" class="headerlink" title="asymmetric noise 0.4"></a>asymmetric noise 0.4</h2><h4 id="é»˜è®¤å‚æ•°"><a href="#é»˜è®¤å‚æ•°" class="headerlink" title="é»˜è®¤å‚æ•°"></a>é»˜è®¤å‚æ•°</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Estimated transition matrix:tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">7</span>.2138e-01, <span class="token number">2</span>.7854e-01, <span class="token number">3</span>.0262e-06, <span class="token number">3</span>.6738e-07, <span class="token number">1</span>.2981e-07, <span class="token number">5</span>.1001e-06,         <span class="token number">1</span>.8148e-05, <span class="token number">3</span>.1714e-05, <span class="token number">1</span>.3197e-06, <span class="token number">1</span>.8157e-05<span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">5</span>.7726e-04, <span class="token number">6</span>.2115e-01, <span class="token number">3</span>.7681e-01, <span class="token number">1</span>.3360e-04, <span class="token number">3</span>.5784e-04, <span class="token number">8</span>.6032e-05,         <span class="token number">5</span>.3814e-05, <span class="token number">1</span>.9459e-04, <span class="token number">4</span>.5552e-04, <span class="token number">1</span>.8873e-04<span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">9</span>.7088e-06, <span class="token number">8</span>.9477e-04, <span class="token number">6</span>.8011e-01, <span class="token number">3</span>.0870e-01, <span class="token number">6</span>.0487e-03, <span class="token number">1</span>.5677e-04,         <span class="token number">2</span>.0933e-04, <span class="token number">3</span>.5460e-04, <span class="token number">3</span>.0163e-03, <span class="token number">4</span>.9286e-04<span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">1</span>.3503e-05, <span class="token number">7</span>.5012e-05, <span class="token number">9</span>.7758e-04, <span class="token number">5</span>.4234e-01, <span class="token number">4</span>.5637e-01, <span class="token number">1</span>.6872e-04,         <span class="token number">5</span>.0566e-05, <span class="token number">1</span>.7940e-07, <span class="token number">3</span>.3701e-06, <span class="token number">8</span>.3027e-06<span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">4</span>.8065e-06, <span class="token number">9</span>.4964e-06, <span class="token number">6</span>.2487e-05, <span class="token number">3</span>.7153e-05, <span class="token number">7</span>.0554e-01, <span class="token number">2</span>.9411e-01,         <span class="token number">1</span>.7484e-04, <span class="token number">4</span>.4826e-05, <span class="token number">8</span>.6875e-06, <span class="token number">5</span>.9524e-06<span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">7</span>.3357e-05, <span class="token number">1</span>.3101e-05, <span class="token number">1</span>.3800e-06, <span class="token number">5</span>.4869e-05, <span class="token number">6</span>.3327e-04, <span class="token number">6</span>.3130e-01,         <span class="token number">3</span>.6769e-01, <span class="token number">9</span>.2295e-05, <span class="token number">6</span>.4091e-05, <span class="token number">7</span>.0743e-05<span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">1</span>.5855e-03, <span class="token number">8</span>.7621e-04, <span class="token number">3</span>.1088e-05, <span class="token number">7</span>.7596e-06, <span class="token number">6</span>.9697e-05, <span class="token number">2</span>.1452e-02,         <span class="token number">6</span>.4550e-01, <span class="token number">3</span>.3030e-01, <span class="token number">6</span>.9375e-05, <span class="token number">1</span>.0396e-04<span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">8</span>.1278e-04, <span class="token number">2</span>.3544e-04, <span class="token number">5</span>.0871e-05, <span class="token number">7</span>.7580e-05, <span class="token number">7</span>.5762e-05, <span class="token number">8</span>.7224e-04,         <span class="token number">3</span>.7420e-04, <span class="token number">6</span>.6014e-01, <span class="token number">3</span>.3609e-01, <span class="token number">1</span>.2711e-03<span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">1</span>.9071e-03, <span class="token number">3</span>.5230e-04, <span class="token number">2</span>.1717e-03, <span class="token number">9</span>.8912e-04, <span class="token number">1</span>.4255e-03, <span class="token number">3</span>.2609e-04,         <span class="token number">2</span>.6533e-04, <span class="token number">1</span>.0653e-04, <span class="token number">6</span>.1251e-01, <span class="token number">3</span>.7995e-01<span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">4</span>.0376e-01, <span class="token number">5</span>.3920e-07, <span class="token number">3</span>.7207e-07, <span class="token number">5</span>.6868e-06, <span class="token number">4</span>.2000e-04, <span class="token number">1</span>.2035e-04,         <span class="token number">7</span>.1814e-07, <span class="token number">1</span>.5838e-04, <span class="token number">2</span>.0765e-04, <span class="token number">5</span>.9533e-01<span class="token punctuation">]</span><span class="token punctuation">]</span>, <span class="token assign-left variable">device</span><span class="token operator">=</span><span class="token string">'cuda:0'</span><span class="token punctuation">)</span>True transition matrix:<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span><span class="token punctuation">]</span><span class="token punctuation">]</span>The estimation error is <span class="token number">0.11802714886404604</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ€»ä½“è¿˜æ˜¯ä¼°è®¡çš„æ¯”è¾ƒå‡†</p><h1 id="T-Revision-CIFAR10æµ‹è¯•"><a href="#T-Revision-CIFAR10æµ‹è¯•" class="headerlink" title="T Revision CIFAR10æµ‹è¯•"></a>T Revision CIFAR10æµ‹è¯•</h1><h2 id="symmetric-noise-0-4-1"><a href="#symmetric-noise-0-4-1" class="headerlink" title="symmetric noise 0.4"></a>symmetric noise 0.4</h2><p>é»˜è®¤å‚æ•°</p><ul><li>å¯ä»¥çœ‹åˆ°è¿˜æ˜¯æœ‰ä¸€å®šçš„å‡†ç¡®ç‡çš„ï¼Œè‡³å°‘èƒ½å¤Ÿä¿è¯å¯¹è§’çº¿ä¸Šçš„å…ƒç´ ä¸ä¼šæ¥è¿‘äº1ï¼Œä½†åŒæ—¶ä¹Ÿæ˜¯åŒä¸€è¡Œæœ€å¤§çš„å…ƒç´ </li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.6</span>        <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.6</span>        <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.6</span>        <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.6</span>        <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.6</span>        <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.6</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.6</span>        <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.6</span>        <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.6</span>        <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.6</span>       <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.6</span>        <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.6</span>        <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.6</span>        <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.6</span>        <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.6</span>        <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.6</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.6</span>        <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.6</span>        <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.6</span>        <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.6</span>       <span class="token punctuation">]</span><span class="token punctuation">]</span>Val Loss: <span class="token number">1.945421</span>, Acc: <span class="token number">0.431000</span>                                                                                                                                                                     <span class="token punctuation">[</span><span class="token number">0</span>/373<span class="token punctuation">]</span>epoch <span class="token number">20</span>Train Loss: <span class="token number">1.740070</span>, Acc: <span class="token number">0.479556</span>Val Loss: <span class="token number">1.973744</span>, Acc: <span class="token number">0.431400</span>Estimated transition matrix:tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.4469</span>, <span class="token number">0.0260</span>, <span class="token number">0.1041</span>, <span class="token number">0.0390</span>, <span class="token number">0.1306</span>, <span class="token number">0.0741</span>, <span class="token number">0.0450</span>, <span class="token number">0.0878</span>, <span class="token number">0.0115</span>,         <span class="token number">0.0351</span><span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">0.0220</span>, <span class="token number">0.6145</span>, <span class="token number">0.0254</span>, <span class="token number">0.0339</span>, <span class="token number">0.0490</span>, <span class="token number">0.0716</span>, <span class="token number">0.0512</span>, <span class="token number">0.0372</span>, <span class="token number">0.0461</span>,         <span class="token number">0.0492</span><span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">0.0606</span>, <span class="token number">0.0301</span>, <span class="token number">0.4259</span>, <span class="token number">0.0794</span>, <span class="token number">0.0816</span>, <span class="token number">0.0407</span>, <span class="token number">0.0582</span>, <span class="token number">0.0853</span>, <span class="token number">0.0927</span>,         <span class="token number">0.0454</span><span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">0.0399</span>, <span class="token number">0.0185</span>, <span class="token number">0.0344</span>, <span class="token number">0.5259</span>, <span class="token number">0.0116</span>, <span class="token number">0.1639</span>, <span class="token number">0.0885</span>, <span class="token number">0.0600</span>, <span class="token number">0.0253</span>,         <span class="token number">0.0321</span><span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">0.0338</span>, <span class="token number">0.0265</span>, <span class="token number">0.0805</span>, <span class="token number">0.0910</span>, <span class="token number">0.5191</span>, <span class="token number">0.0445</span>, <span class="token number">0.0589</span>, <span class="token number">0.0735</span>, <span class="token number">0.0252</span>,         <span class="token number">0.0470</span><span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">0.0309</span>, <span class="token number">0.0330</span>, <span class="token number">0.0383</span>, <span class="token number">0.0972</span>, <span class="token number">0.0380</span>, <span class="token number">0.4335</span>, <span class="token number">0.0312</span>, <span class="token number">0.2013</span>, <span class="token number">0.0714</span>,         <span class="token number">0.0252</span><span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">0.0274</span>, <span class="token number">0.0401</span>, <span class="token number">0.0219</span>, <span class="token number">0.0906</span>, <span class="token number">0.1141</span>, <span class="token number">0.0547</span>, <span class="token number">0.5203</span>, <span class="token number">0.0391</span>, <span class="token number">0.0442</span>,         <span class="token number">0.0476</span><span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">0.0377</span>, <span class="token number">0.0196</span>, <span class="token number">0.0225</span>, <span class="token number">0.0213</span>, <span class="token number">0.0454</span>, <span class="token number">0.0261</span>, <span class="token number">0.0224</span>, <span class="token number">0.7676</span>, <span class="token number">0.0175</span>,         <span class="token number">0.0199</span><span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">0.0248</span>, <span class="token number">0.0538</span>, <span class="token number">0.0659</span>, <span class="token number">0.0488</span>, <span class="token number">0.0559</span>, <span class="token number">0.0609</span>, <span class="token number">0.0244</span>, <span class="token number">0.0700</span>, <span class="token number">0.4952</span>,         <span class="token number">0.1002</span><span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">0.0261</span>, <span class="token number">0.0160</span>, <span class="token number">0.0332</span>, <span class="token number">0.0479</span>, <span class="token number">0.0088</span>, <span class="token number">0.0322</span>, <span class="token number">0.0142</span>, <span class="token number">0.0486</span>, <span class="token number">0.0229</span>,         <span class="token number">0.7501</span><span class="token punctuation">]</span><span class="token punctuation">]</span>, <span class="token assign-left variable">device</span><span class="token operator">=</span><span class="token string">'cuda:0'</span><span class="token punctuation">)</span>True transition matrix:<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.6</span>        <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.6</span>        <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.6</span>        <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.6</span>        <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.6</span>        <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.6</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.6</span>        <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.6</span>        <span class="token number">0.04444444</span> <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.6</span>        <span class="token number">0.04444444</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span>  <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.04444444</span> <span class="token number">0.6</span>       <span class="token punctuation">]</span><span class="token punctuation">]</span>The estimation error is <span class="token number">0.32300532655583486</span>Estimate finish<span class="token punctuation">..</span><span class="token punctuation">..</span>.Training<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="asymmetric-0-4"><a href="#asymmetric-0-4" class="headerlink" title="asymmetric 0.4"></a>asymmetric 0.4</h2><ul><li>é»˜è®¤å‚æ•°</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Actual noise <span class="token number">0.40</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span><span class="token punctuation">]</span><span class="token punctuation">]</span>Actual noise <span class="token number">0.40</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span><span class="token punctuation">]</span><span class="token punctuation">]</span>Estimate transition matirx<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>Waiting<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>epoch <span class="token number">1</span>Train Loss: <span class="token number">1.020411</span>, Acc: <span class="token number">0.518000</span>Val Loss: <span class="token number">1.220109</span>, Acc: <span class="token number">0.464000</span>epoch <span class="token number">20</span>Train Loss: <span class="token number">1.005580</span>, Acc: <span class="token number">0.521067</span>Val Loss: <span class="token number">1.226898</span>, Acc: <span class="token number">0.463200</span>Estimated transition matrix:tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">7</span>.4242e-01, <span class="token number">2</span>.4246e-01, <span class="token number">2</span>.7850e-03, <span class="token number">8</span>.4317e-04, <span class="token number">4</span>.9211e-04, <span class="token number">5</span>.2459e-04,         <span class="token number">1</span>.8819e-04, <span class="token number">7</span>.3340e-04, <span class="token number">4</span>.9761e-03, <span class="token number">4</span>.5775e-03<span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">6</span>.8398e-04, <span class="token number">6</span>.4443e-01, <span class="token number">3</span>.5391e-01, <span class="token number">2</span>.6642e-05, <span class="token number">1</span>.2400e-05, <span class="token number">1</span>.3245e-05,         <span class="token number">1</span>.8296e-04, <span class="token number">1</span>.0236e-04, <span class="token number">2</span>.1593e-04, <span class="token number">4</span>.2654e-04<span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">3</span>.7985e-05, <span class="token number">5</span>.2442e-01, <span class="token number">4</span>.7549e-01, <span class="token number">2</span>.8910e-07, <span class="token number">3</span>.6711e-08, <span class="token number">6</span>.9056e-08,         <span class="token number">1</span>.0048e-07, <span class="token number">3</span>.4097e-07, <span class="token number">4</span>.7454e-06, <span class="token number">4</span>.9120e-05<span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">8</span>.2929e-03, <span class="token number">1</span>.5819e-03, <span class="token number">3</span>.0692e-02, <span class="token number">5</span>.7357e-01, <span class="token number">3</span>.0599e-01, <span class="token number">2</span>.9479e-02,         <span class="token number">2</span>.8462e-02, <span class="token number">1</span>.5182e-02, <span class="token number">2</span>.5711e-03, <span class="token number">4</span>.1792e-03<span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">1</span>.3662e-03, <span class="token number">1</span>.9915e-04, <span class="token number">7</span>.3622e-03, <span class="token number">1</span>.8071e-02, <span class="token number">5</span>.7474e-01, <span class="token number">3</span>.8528e-01,         <span class="token number">9</span>.2216e-03, <span class="token number">3</span>.4835e-03, <span class="token number">2</span>.1991e-04, <span class="token number">5</span>.0631e-05<span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">1</span>.0864e-03, <span class="token number">6</span>.3302e-04, <span class="token number">8</span>.7667e-03, <span class="token number">6</span>.2122e-02, <span class="token number">5</span>.6899e-02, <span class="token number">4</span>.8854e-01,         <span class="token number">3</span>.3600e-01, <span class="token number">3</span>.4640e-02, <span class="token number">1</span>.1092e-02, <span class="token number">2</span>.2156e-04<span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">1</span>.5093e-04, <span class="token number">8</span>.9852e-05, <span class="token number">1</span>.7349e-04, <span class="token number">4</span>.1022e-04, <span class="token number">3</span>.8422e-04, <span class="token number">1</span>.3375e-04,         <span class="token number">6</span>.2308e-01, <span class="token number">3</span>.7530e-01, <span class="token number">1</span>.9503e-04, <span class="token number">8</span>.2571e-05<span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">1</span>.1851e-03, <span class="token number">1</span>.3255e-03, <span class="token number">7</span>.4400e-04, <span class="token number">3</span>.6824e-04, <span class="token number">1</span>.6724e-03, <span class="token number">1</span>.8169e-03,         <span class="token number">4</span>.6614e-04, <span class="token number">6</span>.3631e-01, <span class="token number">3</span>.5525e-01, <span class="token number">8</span>.6169e-04<span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">3</span>.1831e-03, <span class="token number">1</span>.4675e-03, <span class="token number">2</span>.6400e-04, <span class="token number">5</span>.8988e-05, <span class="token number">7</span>.8735e-05, <span class="token number">3</span>.5662e-05,         <span class="token number">1</span>.6588e-05, <span class="token number">1</span>.1765e-04, <span class="token number">6</span>.6807e-01, <span class="token number">3</span>.2671e-01<span class="token punctuation">]</span>,        <span class="token punctuation">[</span><span class="token number">2</span>.4795e-01, <span class="token number">5</span>.7143e-02, <span class="token number">4</span>.9979e-02, <span class="token number">6</span>.4383e-06, <span class="token number">8</span>.2659e-07, <span class="token number">1</span>.5378e-06,         <span class="token number">5</span>.9085e-06, <span class="token number">2</span>.6324e-06, <span class="token number">4</span>.2720e-05, <span class="token number">6</span>.4487e-01<span class="token punctuation">]</span><span class="token punctuation">]</span>, <span class="token assign-left variable">device</span><span class="token operator">=</span><span class="token string">'cuda:0'</span><span class="token punctuation">)</span>True transition matrix:<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span> <span class="token number">0</span>. <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span> <span class="token number">0.4</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.4</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0.6</span><span class="token punctuation">]</span><span class="token punctuation">]</span>The estimation error is <span class="token number">0.2717611408448902</span>Estimate finish<span class="token punctuation">..</span><span class="token punctuation">..</span>.Training<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å…³äºDMI"><a href="#å…³äºDMI" class="headerlink" title="å…³äºDMI"></a>å…³äºDMI</h1><h2 id="æ— è®ºæ˜¯å“ªä¸ªä»»åŠ¡ï¼Œéƒ½éœ€è¦åœ¨pretrain"><a href="#æ— è®ºæ˜¯å“ªä¸ªä»»åŠ¡ï¼Œéƒ½éœ€è¦åœ¨pretrain" class="headerlink" title="æ— è®ºæ˜¯å“ªä¸ªä»»åŠ¡ï¼Œéƒ½éœ€è¦åœ¨pretrain"></a>æ— è®ºæ˜¯å“ªä¸ªä»»åŠ¡ï¼Œéƒ½éœ€è¦åœ¨pretrain</h2><p>å‚è€ƒ <a href="https://github.com/Newbeeer/L_DMI/issues/11#issuecomment-655433642">Why bad performance without model pre-training?</a></p><p>ä½œè€…çš„è§‚ç‚¹ï¼š</p><blockquote><p>Hi,</p><p>Sorry for the late response. Itâ€™s a very good question. My guess is that if we donâ€™t pretrain and directly apply L_dmi for training, the gradient is exploded and itâ€™s very hard to schedule the learning rate.</p><p>To illustrate this, the gradient to the matrix A under $L_dmi$ loss is : $\partial log(âˆ£det(A)âˆ£) =(A^{âˆ’1})^T$. <strong>Note that when we random intialize a classifiers, the $det(A)$ or $det(submatrix of A)$ is rathely small</strong>. It leads to very large elements in $(A^{âˆ’1})^T$. <strong>Hence the gradient explode</strong>.</p><p><strong>If we pretrain the model for a while, det(A) or det(submatrix of A) would be much more amendable.</strong></p><p>Thanks.</p><p>Yilun</p></blockquote><p>å…·ä½“æ“ä½œï¼š</p><ol><li>æŠŠåŸæ¥çš„noisy train setåˆ’åˆ†å‡ºä¸€ä¸ªnoisy validation setï¼Œé¢„è®­ç»ƒå’Œæ­£å¼è®­ç»ƒå·®ä¸å¤šçš„epochæ•°ï¼Œç„¶å<strong>ä¿å­˜åœ¨noisy/clean validationä¸Šæœ€å¥½çš„æ¨¡å‹</strong></li><li>load 1ä¸­è·å¾—çš„æ¨¡å‹ï¼Œç»§ç»­ç”¨DMI LOSSåœ¨åŒä¸€çš„noisy validation setä¸Šè®­ç»ƒï¼ŒåŒæ ·é€šè¿‡noisy/clean validation setç­›é€‰å‡ºâ€œæœ€å¥½çš„â€æ¨¡å‹ï¼Œåœ¨clean test setä¸Šå­¦ä¹ ã€‚</li></ol><p>ä¾‹å¦‚ï¼š</p><ol><li>åœ¨CIFAR10çš„å®éªŒä¸­ï¼Œç”¨çš„æ˜¯noisy validation</li><li>åœ¨Clothing 1Mä¸­ï¼Œåˆ™æ˜¯ç”¨çš„clean validationï¼ˆ50k clean trainingæ•°æ®ï¼‰</li></ol><h2 id="å¯¹DMIçš„å°è¯•"><a href="#å¯¹DMIçš„å°è¯•" class="headerlink" title="å¯¹DMIçš„å°è¯•"></a>å¯¹DMIçš„å°è¯•</h2><h3 id="symmetric-noise-0-4-pretrain-15-epochs"><a href="#symmetric-noise-0-4-pretrain-15-epochs" class="headerlink" title="symmetric noise 0.4 + pretrain 15 epochs"></a>symmetric noise 0.4 + pretrain 15 epochs</h3><ul><li>åŠ è½½ckpt <code>/home/weitaotang/multimodal/results_temp/image_single_frame/models/ravdess_symmetric_image_single_frame_0.4_no_h_score/0111_180507_93108/checkpoint-epoch15.pth</code></li><li>SGD: lr 1e-07, mementum 0.9, weight_decay 1e-3</li></ul><p>å¯ä»¥çœ‹åˆ°æ€»ä½“æ¥è¯´æ˜¯<strong>èƒ½å¤Ÿå­¦ä¹ åˆ°cleançš„ä¿¡æ¯çš„</strong>ï¼š</p><ul><li>clean sampleçš„frame accuracyæ¯”noisy sampleçš„å¤§</li><li>åœ¨validation setä¸Šçš„accuracyç»è¿‡16ä¸ªepochçš„è®­ç»ƒåä¸¤ä¸ªç‚¹çš„æå‡</li></ul><p><img src="/2021/01/12/experiments-record/image-20210113221318924.png" alt="image-20210113221318924"></p><p>ä½†æ˜¯è®­ç»ƒä¸æ˜¯éå¸¸ç¨³å®šï¼Œæ¯”å¦‚lossæœ‰æ‰€åå¼¹ï¼š</p><p><img src="/2021/01/12/experiments-record/image-20210113221527155.png" alt="image-20210113221527155"></p><p><img src="/2021/01/12/experiments-record/image-20210113221541423.png" alt="image-20210113221541423"></p><h1 id="image-single-frameå®éªŒç»“æœ"><a href="#image-single-frameå®éªŒç»“æœ" class="headerlink" title="image single frameå®éªŒç»“æœ"></a>image single frameå®éªŒç»“æœ</h1><h2 id="symmetric"><a href="#symmetric" class="headerlink" title="symmetric"></a>symmetric</h2><ul><li>val frame acc</li></ul><p><img src="/2021/01/12/experiments-record/image-20210119224313250.png" alt="image-20210119224313250"></p><ul><li>val sample acc</li></ul><p><img src="/2021/01/12/experiments-record/image-20210119224336766.png" alt="image-20210119224336766"></p><h2 id="asymmetric"><a href="#asymmetric" class="headerlink" title="asymmetric"></a>asymmetric</h2><p><img src="/2021/01/12/experiments-record/image-20210119224436046.png" alt="image-20210119224436046"></p><p><img src="/2021/01/12/experiments-record/image-20210119224448660.png" alt="image-20210119224448660"></p><h1 id="audioå®éªŒç»“æœ"><a href="#audioå®éªŒç»“æœ" class="headerlink" title="audioå®éªŒç»“æœ"></a>audioå®éªŒç»“æœ</h1><ul><li>frame acc</li></ul><p><img src="/2021/01/12/experiments-record/image-20210119223953152.png" alt="image-20210119223953152"></p><ul><li>val sample acc</li></ul><p><img src="/2021/01/12/experiments-record/image-20210119224016383.png" alt="image-20210119224016383"></p><h1 id="å¤ç°MINISTçš„learn-clean-patterns-firstçš„ç°è±¡"><a href="#å¤ç°MINISTçš„learn-clean-patterns-firstçš„ç°è±¡" class="headerlink" title="å¤ç°MINISTçš„learn clean patterns firstçš„ç°è±¡"></a>å¤ç°MINISTçš„learn clean patterns firstçš„ç°è±¡</h1><p>ä¸€è¨€è”½ä¹‹ï¼šä¸æ˜¯éå¸¸æ˜æ˜¾ï¼Œå¾ˆéš¾åƒA closer look at â€¦ ä¸­å¦‚æ­¤æ˜æ˜¾ã€‚MLPæœ‰æ‰€ä½“ç°ï¼Œ<strong>CNNå¹²è„†å°±æ²¡æœ‰å…ˆä¸Šå‡åä¸‹é™çš„è¶‹åŠ¿</strong></p><h2 id="2-layer-MLP"><a href="#2-layer-MLP" class="headerlink" title="2-layer  MLP"></a>2-layer  MLP</h2><ul><li>clean val</li></ul><p><img src="/2021/01/12/experiments-record/image-20210119223835696.png" alt="image-20210119223835696"></p><h2 id="CNN"><a href="#CNN" class="headerlink" title="CNN"></a>CNN</h2><ul><li>clean val</li></ul><p><img src="/2021/01/12/experiments-record/image-20210119223658643.png" alt="image-20210119223658643"></p><h1 id="T-Revision-ravdesså°è¯•"><a href="#T-Revision-ravdesså°è¯•" class="headerlink" title="T Revision ravdesså°è¯•"></a>T Revision ravdesså°è¯•</h1><ul><li><p>æ€»ä½“æ¥çœ‹ï¼Œ<strong>æ˜¯æœ‰æ•ˆæœçš„</strong>ï¼Œç‰¹åˆ«æ˜¯å•ä¸€æ¨¡æ€æ—¶ï¼Œerroræ›´å°ã€‚å› æ­¤å¯ä»¥è€ƒè™‘<strong>å…ˆå•æ¨¡æ€pretrainï¼Œå†åŸºäºpretrainçš„ç»“æœè¿›è¡Œè®­ç»ƒ</strong>ï¼</p></li><li><p>é™¤æ­¤ä¹‹å¤–ï¼Œå¯ä»¥çœ‹åˆ°epochè¾ƒå°æ—¶çš„checkpointå¯¹åº”çš„Tæ›´å‡†ç¡®ï¼Œ<strong>å› æ­¤ä¸€å¼€å§‹pretrainä¸ç”¨å¤ªä¹…ï¼ï¼</strong></p></li><li><p>symmetricæ€»ä½“ä¼°è®¡å¾—ä¸å¦‚asymmetricå‡†ï¼Œå¯ä»¥<strong>æ¨æµ‹noise rateè¶Šå¤§è¶Šéš¾ä¼°è®¡ï¼ˆä¼°è®¡è¶Šä¸å‡†ï¼‰</strong></p></li></ul><p>å®éªŒè®¾ç½®ï¼šä»epoch 5 ~ 30æ¯5ä¸ªepochçš„ckptè½½å…¥ï¼Œæ‰“å°erroræœ€å°çš„matrixä»¥åŠå¯¹åº”çš„epoch checkpoint</p><h2 id="image"><a href="#image" class="headerlink" title="image"></a>image</h2><ul><li>trial 1</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>01:5<span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>00:00,  <span class="token number">5</span>.97s/it<span class="token punctuation">]</span>Found better revision t with err:0.392519 with ckpt:/home/weitaotang/multimodal/results_temp/image_single_frame/models/ravdess_symmetric_noise_0.4_image_single_frame_no_h_score/0113_220659_93722/checkpoint-epoch5.pth<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">7</span>.37014813e-01 <span class="token number">5</span>.49748095e-02 <span class="token number">1</span>.91551456e-02 <span class="token number">1</span>.06802471e-02  <span class="token number">7</span>.75371623e-03 <span class="token number">1</span>.70421249e-01<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1</span>.49264102e-02 <span class="token number">7</span>.05651750e-01 <span class="token number">1</span>.33411816e-01 <span class="token number">2</span>.91340008e-02  <span class="token number">7</span>.21719406e-02 <span class="token number">4</span>.47040626e-02<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1</span>.69836739e-01 <span class="token number">5</span>.79755422e-02 <span class="token number">5</span>.83608894e-01 <span class="token number">3</span>.76570563e-02  <span class="token number">5</span>.09809138e-02 <span class="token number">9</span>.99408390e-02<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">5</span>.90787815e-03 <span class="token number">6</span>.60515847e-02 <span class="token number">3</span>.96423090e-04 <span class="token number">7</span>.94890272e-01  <span class="token number">4</span>.54765739e-03 <span class="token number">1</span>.28206202e-01<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">5</span>.04207044e-02 <span class="token number">3</span>.06661356e-02 <span class="token number">6</span>.10200234e-02 <span class="token number">3</span>.16125759e-02  <span class="token number">8</span>.15995386e-01 <span class="token number">1</span>.02851814e-02<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1</span>.68665471e-02 <span class="token number">2</span>.29821654e-01 <span class="token number">2</span>.43432482e-03 <span class="token number">6</span>.61020219e-02  <span class="token number">1</span>.24099067e-02 <span class="token number">6</span>.72365573e-01<span class="token punctuation">]</span><span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>01:5<span class="token operator"><span class="token file-descriptor important">9</span>&lt;</span>00:00,  <span class="token number">6</span>.30s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>01:5<span class="token operator"><span class="token file-descriptor important">5</span>&lt;</span>00:00,  <span class="token number">6</span>.05s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>01:5<span class="token operator"><span class="token file-descriptor important">5</span>&lt;</span>00:00,  <span class="token number">6</span>.06s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>01:5<span class="token operator"><span class="token file-descriptor important">4</span>&lt;</span>00:00,  <span class="token number">6</span>.04s/it<span class="token punctuation">]</span>--------------------------------------------------------------------------------noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>01:5<span class="token operator"><span class="token file-descriptor important">5</span>&lt;</span>00:00,  <span class="token number">6</span>.07s/it<span class="token punctuation">]</span>Found better revision t with err:0.077368 with ckpt:/home/weitaotang/multimodal/results_temp/image_single_frame/models/ravdess_asymmetric_noise_0.4_image_single_frame_no_h_score/0114_014042_93722/checkpoint-epoch5.pth<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">9</span>.99978390e-01 <span class="token number">4</span>.24855948e-08 <span class="token number">4</span>.22028800e-06 <span class="token number">7</span>.55608108e-09  <span class="token number">1</span>.72387464e-05 <span class="token number">1</span>.00746411e-07<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">5</span>.97121342e-05 <span class="token number">6</span>.31816556e-01 <span class="token number">7</span>.50882308e-03 <span class="token number">3</span>.53185713e-01  <span class="token number">6</span>.74934108e-03 <span class="token number">6</span>.79860689e-04<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1</span>.92773897e-08 <span class="token number">2</span>.28556597e-05 <span class="token number">5</span>.49387958e-01 <span class="token number">1</span>.72671389e-05  <span class="token number">4</span>.50389371e-01 <span class="token number">1</span>.82462852e-04<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">3</span>.87757505e-06 <span class="token number">4</span>.13954102e-01 <span class="token number">5</span>.28141591e-04 <span class="token number">5</span>.85183560e-01  <span class="token number">2</span>.97371327e-04 <span class="token number">3</span>.29412852e-05<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1</span>.75910082e-07 <span class="token number">2</span>.36618023e-04 <span class="token number">2</span>.86706670e-01 <span class="token number">4</span>.47445345e-05  <span class="token number">7</span>.12622216e-01 <span class="token number">3</span>.89617483e-04<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1</span>.74123657e-04 <span class="token number">2</span>.17408124e-03 <span class="token number">8</span>.70988746e-04 <span class="token number">2</span>.19455221e-03  <span class="token number">1</span>.13185740e-03 <span class="token number">9</span>.93454396e-01<span class="token punctuation">]</span><span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>01:5<span class="token operator"><span class="token file-descriptor important">8</span>&lt;</span>00:00,  <span class="token number">6</span>.23s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>01:5<span class="token operator"><span class="token file-descriptor important">7</span>&lt;</span>00:00,  <span class="token number">6</span>.19s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:0<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>00:00,  <span class="token number">6</span>.40s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>01:5<span class="token operator"><span class="token file-descriptor important">7</span>&lt;</span>00:00,  <span class="token number">6</span>.17s/it<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>trail 2</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:1<span class="token operator"><span class="token file-descriptor important">5</span>&lt;</span>00:00,  <span class="token number">7</span>.14s/it<span class="token punctuation">]</span>Found better revision t with err:0.340032 with ckpt:/home/weitaotang/multimodal/results_temp/image_single_frame/models/ravdess_symmetric_noise_0.4_image_single_frame_no_h_score/0113_220659_93722/checkpoint-epoch5.pth<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.74072658</span> <span class="token number">0.01935282</span> <span class="token number">0.07026559</span> <span class="token number">0.00596408</span> <span class="token number">0.01678354</span> <span class="token number">0.14690741</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.03586634</span> <span class="token number">0.71411037</span> <span class="token number">0.12696856</span> <span class="token number">0.01515382</span> <span class="token number">0.02747697</span> <span class="token number">0.08042397</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.06790715</span> <span class="token number">0.15041716</span> <span class="token number">0.58079056</span> <span class="token number">0.05768638</span> <span class="token number">0.02814293</span> <span class="token number">0.1150558</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04842931</span> <span class="token number">0.04216269</span> <span class="token number">0.00557405</span> <span class="token number">0.80087784</span> <span class="token number">0.0454859</span>  <span class="token number">0.05747022</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.02076734</span> <span class="token number">0.08967834</span> <span class="token number">0.03257319</span> <span class="token number">0.02381871</span> <span class="token number">0.80996074</span> <span class="token number">0.02320168</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.05548994</span> <span class="token number">0.07312605</span> <span class="token number">0.01950351</span> <span class="token number">0.04691109</span> <span class="token number">0.12951871</span> <span class="token number">0.6754507</span> <span class="token punctuation">]</span><span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:0<span class="token operator"><span class="token file-descriptor important">9</span>&lt;</span>00:00,  <span class="token number">6</span>.82s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:0<span class="token operator"><span class="token file-descriptor important">9</span>&lt;</span>00:00,  <span class="token number">6</span>.83s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:1<span class="token operator"><span class="token file-descriptor important">4</span>&lt;</span>00:00,  <span class="token number">7</span>.06s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:1<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>00:00,  <span class="token number">6</span>.93s/it<span class="token punctuation">]</span>--------------------------------------------------------------------------------noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:1<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>00:00,  <span class="token number">6</span>.98s/it<span class="token punctuation">]</span>Found better revision t with err:0.071826 with ckpt:/home/weitaotang/multimodal/results_temp/image_single_frame/models/ravdess_asymmetric_noise_0.4_image_single_frame_no_h_score/0114_014042_93722/checkpoint-epoch5.pth<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">9</span>.99978176e-01 <span class="token number">8</span>.94074767e-08 <span class="token number">3</span>.23012549e-07 <span class="token number">1</span>.69097617e-07  <span class="token number">3</span>.21461266e-07 <span class="token number">2</span>.09213347e-05<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">2</span>.55739884e-08 <span class="token number">6</span>.30913114e-01 <span class="token number">1</span>.07774438e-04 <span class="token number">3</span>.68945120e-01  <span class="token number">3</span>.26208051e-05 <span class="token number">1</span>.32215717e-06<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">5</span>.65324598e-06 <span class="token number">7</span>.42724068e-03 <span class="token number">5</span>.52161788e-01 <span class="token number">4</span>.20391930e-03  <span class="token number">4</span>.35413689e-01 <span class="token number">7</span>.87712614e-04<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">4</span>.74741598e-06 <span class="token number">4</span>.17344832e-01 <span class="token number">2</span>.14540049e-04 <span class="token number">5</span>.82112667e-01  <span class="token number">9</span>.40623789e-05 <span class="token number">2</span>.29176453e-04<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">5</span>.60341346e-08 <span class="token number">3</span>.45309488e-04 <span class="token number">2</span>.88416076e-01 <span class="token number">1</span>.09513552e-04  <span class="token number">7</span>.11108615e-01 <span class="token number">2</span>.04272590e-05<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1</span>.81705001e-03 <span class="token number">2</span>.85893997e-03 <span class="token number">2</span>.13714621e-04 <span class="token number">1</span>.92421779e-03  <span class="token number">2</span>.76464435e-04 <span class="token number">9</span>.92909613e-01<span class="token punctuation">]</span><span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:1<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>00:00,  <span class="token number">6</span>.88s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:1<span class="token operator"><span class="token file-descriptor important">6</span>&lt;</span>00:00,  <span class="token number">7</span>.17s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:1<span class="token operator"><span class="token file-descriptor important">9</span>&lt;</span>00:00,  <span class="token number">7</span>.32s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:1<span class="token operator"><span class="token file-descriptor important">6</span>&lt;</span>00:00,  <span class="token number">7</span>.20s/it<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="audio"><a href="#audio" class="headerlink" title="audio"></a>audio</h2><ul><li>trail 1</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">8</span>&lt;</span>00:00,  <span class="token number">1</span>.04it/s<span class="token punctuation">]</span>Found better revision t with err:0.415975 with ckpt:/home/weitaotang/multimodal/results_temp/audio/models/ravdess_symmetric_noise_0.4_audio_no_h_score/0113_215056_93711/checkpoint-epoch5.pth<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.25389571</span> <span class="token number">0.09228479</span> <span class="token number">0.20698934</span> <span class="token number">0.27409103</span> <span class="token number">0.09113397</span> <span class="token number">0.08160515</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.08750636</span> <span class="token number">0.51496097</span> <span class="token number">0.0436491</span>  <span class="token number">0.10722706</span> <span class="token number">0.17794909</span> <span class="token number">0.06870737</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.15156065</span> <span class="token number">0.07283055</span> <span class="token number">0.35790298</span> <span class="token number">0.07674008</span> <span class="token number">0.29612027</span> <span class="token number">0.04484543</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.24321621</span> <span class="token number">0.06782876</span> <span class="token number">0.12313364</span> <span class="token number">0.49200456</span> <span class="token number">0.04399101</span> <span class="token number">0.02982585</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.06249942</span> <span class="token number">0.11504411</span> <span class="token number">0.2359151</span>  <span class="token number">0.01695025</span> <span class="token number">0.52651856</span> <span class="token number">0.04307259</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.13342992</span> <span class="token number">0.10467964</span> <span class="token number">0.05116186</span> <span class="token number">0.06034019</span> <span class="token number">0.08603964</span> <span class="token number">0.56434879</span><span class="token punctuation">]</span><span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>00:00,  <span class="token number">1</span>.38it/s<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>00:00,  <span class="token number">1</span>.40it/s<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">7</span>&lt;</span>00:00,  <span class="token number">1</span>.09it/s<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">4</span>&lt;</span>00:00,  <span class="token number">1</span>.31it/s<span class="token punctuation">]</span>--------------------------------------------------------------------------------noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>00:00,  <span class="token number">1</span>.40it/s<span class="token punctuation">]</span>Found better revision t with err:0.128727 with ckpt:/home/weitaotang/multimodal/results_temp/audio/models/ravdess_asymmetric_noise_0.4_audio_no_h_score/0113_232736_93711/checkpoint-epoch5.pth<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">9</span>.94958350e-01 <span class="token number">1</span>.78187583e-03 <span class="token number">3</span>.13801594e-04 <span class="token number">1</span>.89794601e-03  <span class="token number">9</span>.41193957e-04 <span class="token number">1</span>.06832134e-04<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">7</span>.20291405e-03 <span class="token number">5</span>.80317192e-01 <span class="token number">8</span>.54483371e-04 <span class="token number">4</span>.06137146e-01  <span class="token number">5</span>.16415342e-03 <span class="token number">3</span>.24093753e-04<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">9</span>.26777205e-04 <span class="token number">2</span>.19786319e-04 <span class="token number">4</span>.24290703e-01 <span class="token number">1</span>.18924458e-04  <span class="token number">5</span>.74408175e-01 <span class="token number">3</span>.56532273e-05<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">9</span>.01317605e-02 <span class="token number">3</span>.95732577e-01 <span class="token number">2</span>.24156240e-06 <span class="token number">5</span>.10228427e-01  <span class="token number">5</span>.46904859e-06 <span class="token number">3</span>.89954887e-03<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">3</span>.46361430e-04 <span class="token number">3</span>.27936719e-04 <span class="token number">3</span>.12342425e-01 <span class="token number">3</span>.77159894e-04  <span class="token number">6</span>.86280551e-01 <span class="token number">3</span>.25555057e-04<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1</span>.31755906e-03 <span class="token number">4</span>.51953487e-05 <span class="token number">8</span>.15807118e-04 <span class="token number">6</span>.51472547e-05  <span class="token number">1</span>.80661353e-03 <span class="token number">9</span>.95949677e-01<span class="token punctuation">]</span><span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">7</span>&lt;</span>00:00,  <span class="token number">1</span>.09it/s<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">5</span>&lt;</span>00:00,  <span class="token number">1</span>.19it/s<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">5</span>&lt;</span>00:00,  <span class="token number">1</span>.23it/s<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">6</span>&lt;</span>00:00,  <span class="token number">1</span>.17it/s<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>trail 2</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">6</span>&lt;</span>00:00,  <span class="token number">1</span>.17it/s<span class="token punctuation">]</span>Found better revision t with err:0.478438 with ckpt:/home/weitaotang/multimodal/results_temp/audio/models/ravdess_symmetric_noise_0.4_audio_no_h_score/0113_215056_93711/checkpoint-epoch5.pth<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.25386552</span> <span class="token number">0.02816301</span> <span class="token number">0.09211877</span> <span class="token number">0.6069223</span>  <span class="token number">0.01289129</span> <span class="token number">0.00603905</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.08574092</span> <span class="token number">0.52417734</span> <span class="token number">0.04768458</span> <span class="token number">0.10971049</span> <span class="token number">0.15698343</span> <span class="token number">0.07570327</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.21533155</span> <span class="token number">0.06798532</span> <span class="token number">0.35652673</span> <span class="token number">0.10144213</span> <span class="token number">0.12699098</span> <span class="token number">0.1317233</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.15600043</span> <span class="token number">0.18612409</span> <span class="token number">0.03740445</span> <span class="token number">0.48830468</span> <span class="token number">0.06292662</span> <span class="token number">0.06923976</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.06397119</span> <span class="token number">0.06777771</span> <span class="token number">0.29985431</span> <span class="token number">0.00756286</span> <span class="token number">0.52437398</span> <span class="token number">0.03645993</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.16910183</span> <span class="token number">0.04342578</span> <span class="token number">0.11727054</span> <span class="token number">0.06100427</span> <span class="token number">0.03611601</span> <span class="token number">0.57308157</span><span class="token punctuation">]</span><span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">4</span>&lt;</span>00:00,  <span class="token number">1</span>.28it/s<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">4</span>&lt;</span>00:00,  <span class="token number">1</span>.32it/s<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">4</span>&lt;</span>00:00,  <span class="token number">1</span>.28it/s<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">6</span>&lt;</span>00:00,  <span class="token number">1</span>.17it/s<span class="token punctuation">]</span>--------------------------------------------------------------------------------noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">4</span>&lt;</span>00:00,  <span class="token number">1</span>.29it/s<span class="token punctuation">]</span>Found better revision t with err:0.132613 with ckpt:/home/weitaotang/multimodal/results_temp/audio/models/ravdess_asymmetric_noise_0.4_audio_no_h_score/0113_232736_93711/checkpoint-epoch5.pth<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">9</span>.95695854e-01 <span class="token number">6</span>.25396754e-07 <span class="token number">4</span>.48640111e-04 <span class="token number">7</span>.03666878e-07  <span class="token number">6</span>.73638844e-04 <span class="token number">3</span>.18053830e-03<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">2</span>.93859078e-03 <span class="token number">5</span>.79728069e-01 <span class="token number">2</span>.81209447e-05 <span class="token number">4</span>.16929769e-01  <span class="token number">2</span>.67289118e-04 <span class="token number">1</span>.08146436e-04<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">2</span>.07288345e-02 <span class="token number">1</span>.81161874e-02 <span class="token number">4</span>.22044809e-01 <span class="token number">1</span>.34290555e-02  <span class="token number">5</span>.08058915e-01 <span class="token number">1</span>.76222138e-02<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1</span>.08152351e-02 <span class="token number">4</span>.81431427e-01 <span class="token number">2</span>.01069297e-04 <span class="token number">5</span>.06482765e-01  <span class="token number">9</span>.92116654e-04 <span class="token number">7</span>.74050277e-05<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">9</span>.88331764e-05 <span class="token number">9</span>.43107348e-03 <span class="token number">3</span>.02070525e-01 <span class="token number">3</span>.79505090e-03  <span class="token number">6</span>.84582485e-01 <span class="token number">2</span>.20230922e-05<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">2</span>.28925497e-03 <span class="token number">4</span>.81048368e-04 <span class="token number">1</span>.09156753e-04 <span class="token number">7</span>.81982182e-04  <span class="token number">1</span>.99329388e-04 <span class="token number">9</span>.96139228e-01<span class="token punctuation">]</span><span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">4</span>&lt;</span>00:00,  <span class="token number">1</span>.30it/s<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">4</span>&lt;</span>00:00,  <span class="token number">1</span>.30it/s<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">6</span>&lt;</span>00:00,  <span class="token number">1</span>.17it/s<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>00:1<span class="token operator"><span class="token file-descriptor important">5</span>&lt;</span>00:00,  <span class="token number">1</span>.25it/s<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="fusion"><a href="#fusion" class="headerlink" title="fusion"></a>fusion</h2><ul><li>trail 1</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:2<span class="token operator"><span class="token file-descriptor important">7</span>&lt;</span>00:00,  <span class="token number">7</span>.78s/it<span class="token punctuation">]</span>Found better revision t with err:0.245888 with ckpt:/home/weitaotang/multimodal/results_temp/fusion_no_h_score/models/ravdess_symmetric_noise_0.4_fusion_no_h_score/0111_034422_93107/checkpoint-epoch5.pth<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.69146853</span> <span class="token number">0.04797358</span> <span class="token number">0.07543566</span> <span class="token number">0.0422144</span>  <span class="token number">0.0418038</span>  <span class="token number">0.10110403</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.06336676</span> <span class="token number">0.67239938</span> <span class="token number">0.04360678</span> <span class="token number">0.06516055</span> <span class="token number">0.06039333</span> <span class="token number">0.09507321</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.02475316</span> <span class="token number">0.22107349</span> <span class="token number">0.59225173</span> <span class="token number">0.08914785</span> <span class="token number">0.03218814</span> <span class="token number">0.04058563</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.11797382</span> <span class="token number">0.08672993</span> <span class="token number">0.0874175</span>  <span class="token number">0.56456794</span> <span class="token number">0.11069051</span> <span class="token number">0.03262029</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.08571974</span> <span class="token number">0.04161564</span> <span class="token number">0.08419766</span> <span class="token number">0.04760431</span> <span class="token number">0.70514424</span> <span class="token number">0.03571841</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.19450805</span> <span class="token number">0.11750432</span> <span class="token number">0.02888204</span> <span class="token number">0.01387309</span> <span class="token number">0.0077209</span>  <span class="token number">0.63751161</span><span class="token punctuation">]</span><span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:0<span class="token operator"><span class="token file-descriptor important">9</span>&lt;</span>00:00,  <span class="token number">6</span>.80s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples <span class="token number">42</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–                                                                                                 <span class="token operator">|</span> <span class="token number">8</span>/19 <span class="token punctuation">[</span>01:0<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>00:32,  <span class="token number">2</span>.97s/it<span class="token punctuation">]</span><span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:0<span class="token operator"><span class="token file-descriptor important">8</span>&lt;</span>00:00,  <span class="token number">6</span>.75s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:0<span class="token operator"><span class="token file-descriptor important">9</span>&lt;</span>00:00,  <span class="token number">6</span>.80s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:0<span class="token operator"><span class="token file-descriptor important">4</span>&lt;</span>00:00,  <span class="token number">6</span>.55s/it<span class="token punctuation">]</span>--------------------------------------------------------------------------------noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:0<span class="token operator"><span class="token file-descriptor important">6</span>&lt;</span>00:00,  <span class="token number">6</span>.65s/it<span class="token punctuation">]</span>Found better revision t with err:0.118717 with ckpt:/home/weitaotang/multimodal/results_temp/fusion_no_h_score/models/ravdess_asymmetric_noise_0.4_fusion_no_h_score/0111_060526_93108/checkpoint-epoch5.pth<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">9</span>.99985077e-01 <span class="token number">3</span>.33303029e-09 <span class="token number">1</span>.19833905e-05 <span class="token number">9</span>.64756076e-11  <span class="token number">1</span>.57460504e-06 <span class="token number">1</span>.36118361e-06<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">9</span>.70278939e-03 <span class="token number">4</span>.84771640e-01 <span class="token number">4</span>.20865655e-03 <span class="token number">4</span>.39756108e-01  <span class="token number">3</span>.93429270e-03 <span class="token number">5</span>.76265214e-02<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">5</span>.33318368e-03 <span class="token number">1</span>.10967220e-03 <span class="token number">6</span>.32902630e-01 <span class="token number">4</span>.49600731e-04  <span class="token number">3</span>.57397716e-01 <span class="token number">2</span>.80720290e-03<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">7</span>.46599467e-07 <span class="token number">2</span>.64882552e-01 <span class="token number">4</span>.20716284e-05 <span class="token number">7</span>.35061120e-01  <span class="token number">6</span>.29869710e-06 <span class="token number">7</span>.20326376e-06<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">4</span>.85154986e-05 <span class="token number">1</span>.44868214e-03 <span class="token number">3</span>.41783826e-01 <span class="token number">4</span>.48218386e-04  <span class="token number">6</span>.56216939e-01 <span class="token number">5</span>.38136212e-05<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1</span>.01609887e-03 <span class="token number">1</span>.56412889e-03 <span class="token number">1</span>.38539968e-04 <span class="token number">2</span>.01553172e-03  <span class="token number">2</span>.38128770e-04 <span class="token number">9</span>.95027572e-01<span class="token punctuation">]</span><span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:1<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>00:00,  <span class="token number">6</span>.98s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:1<span class="token operator"><span class="token file-descriptor important">5</span>&lt;</span>00:00,  <span class="token number">7</span>.12s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:1<span class="token operator"><span class="token file-descriptor important">4</span>&lt;</span>00:00,  <span class="token number">7</span>.08s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:1<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>00:00,  <span class="token number">6</span>.93s/it<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>trail 2</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:4<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>00:00,  <span class="token number">8</span>.47s/it<span class="token punctuation">]</span>Found better revision t with err:0.269013 with ckpt:/home/weitaotang/multimodal/results_temp/fusion_no_h_score/models/ravdess_symmetric_noise_0.4_fusion_no_h_score/0111_034422_93107/checkpoint-epoch5.pth<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.69253284</span> <span class="token number">0.01924669</span> <span class="token number">0.16257553</span> <span class="token number">0.08773406</span> <span class="token number">0.01293883</span> <span class="token number">0.02497208</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.04376511</span> <span class="token number">0.67207418</span> <span class="token number">0.10325625</span> <span class="token number">0.03216256</span> <span class="token number">0.07928783</span> <span class="token number">0.06945408</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.07502832</span> <span class="token number">0.09878149</span> <span class="token number">0.58612365</span> <span class="token number">0.20223092</span> <span class="token number">0.02060406</span> <span class="token number">0.01723154</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.11923723</span> <span class="token number">0.04975081</span> <span class="token number">0.12028455</span> <span class="token number">0.56648084</span> <span class="token number">0.03154257</span> <span class="token number">0.11270397</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.07270622</span> <span class="token number">0.03229545</span> <span class="token number">0.12604801</span> <span class="token number">0.05031482</span> <span class="token number">0.70455036</span> <span class="token number">0.01408514</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0.10690363</span> <span class="token number">0.08137329</span> <span class="token number">0.1370423</span>  <span class="token number">0.01977044</span> <span class="token number">0.01520107</span> <span class="token number">0.63970925</span><span class="token punctuation">]</span><span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:3<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>00:00,  <span class="token number">7</span>.99s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:3<span class="token operator"><span class="token file-descriptor important">8</span>&lt;</span>00:00,  <span class="token number">8</span>.36s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:4<span class="token operator"><span class="token file-descriptor important">4</span>&lt;</span>00:00,  <span class="token number">8</span>.68s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:0<span class="token operator"><span class="token file-descriptor important">5</span>&lt;</span>00:00,  <span class="token number">6</span>.59s/it<span class="token punctuation">]</span>--------------------------------------------------------------------------------noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:0<span class="token operator"><span class="token file-descriptor important">6</span>&lt;</span>00:00,  <span class="token number">6</span>.68s/it<span class="token punctuation">]</span>Found better revision t with err:0.121845 with ckpt:/home/weitaotang/multimodal/results_temp/fusion_no_h_score/models/ravdess_asymmetric_noise_0.4_fusion_no_h_score/0111_060526_93108/checkpoint-epoch5.pth<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">9</span>.99986581e-01 <span class="token number">6</span>.27810544e-08 <span class="token number">1</span>.22991693e-05 <span class="token number">1</span>.14747236e-08  <span class="token number">9</span>.95566532e-07 <span class="token number">5</span>.01988354e-08<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">6</span>.52518578e-07 <span class="token number">4</span>.85241528e-01 <span class="token number">4</span>.11671817e-05 <span class="token number">5</span>.14657624e-01  <span class="token number">3</span>.47765738e-05 <span class="token number">2</span>.42646967e-05<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">2</span>.75373673e-04 <span class="token number">3</span>.39331788e-07 <span class="token number">6</span>.35205075e-01 <span class="token number">1</span>.25685331e-08  <span class="token number">3</span>.64508174e-01 <span class="token number">1</span>.10258772e-05<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1</span>.24452450e-06 <span class="token number">2</span>.44520915e-01 <span class="token number">1</span>.56135444e-02 <span class="token number">7</span>.34597455e-01  <span class="token number">5</span>.13995242e-03 <span class="token number">1</span>.26881283e-04<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">2</span>.60336132e-04 <span class="token number">7</span>.43004952e-04 <span class="token number">3</span>.45211557e-01 <span class="token number">1</span>.79845275e-04  <span class="token number">6</span>.53511809e-01 <span class="token number">9</span>.34460413e-05<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">4</span>.71479600e-03 <span class="token number">9</span>.33652473e-05 <span class="token number">5</span>.41087780e-05 <span class="token number">6</span>.36025079e-05  <span class="token number">7</span>.86016301e-05 <span class="token number">9</span>.94995526e-01<span class="token punctuation">]</span><span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:0<span class="token operator"><span class="token file-descriptor important">5</span>&lt;</span>00:00,  <span class="token number">6</span>.61s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:0<span class="token operator"><span class="token file-descriptor important">8</span>&lt;</span>00:00,  <span class="token number">6</span>.76s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:0<span class="token operator"><span class="token file-descriptor important">6</span>&lt;</span>00:00,  <span class="token number">6</span>.66s/it<span class="token punctuation">]</span>noisy_train dataset with <span class="token number">24180</span> samples<span class="token number">100</span>%<span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">19</span>/19 <span class="token punctuation">[</span>02:0<span class="token operator"><span class="token file-descriptor important">5</span>&lt;</span>00:00,  <span class="token number">6</span>.58s/it<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="reuters-éªŒè¯learn-clean-patterns-first"><a href="#reuters-éªŒè¯learn-clean-patterns-first" class="headerlink" title="reuters éªŒè¯learn clean patterns first"></a>reuters éªŒè¯learn clean patterns first</h1><ul><li>æ€»ä½“ä¸Šæ¥è¯´æ˜¯æœ‰learn clean pattern firstçš„ç°è±¡çš„ï¼Œå› ä¸º<strong>å¯ä»¥çœ‹åˆ°åœ¨å‰5~10ä¸ªepochså†…ï¼Œclean accå§‹ç»ˆæ¯”nosiy accé«˜ï¼Œä¸”clean ce loss å§‹ç»ˆæ¯” nosiy ce loss é«˜</strong></li><li>å› æ­¤å¯ä»¥è€ƒè™‘dividemixé‚£ä¸€ç±»æ–¹æ³•</li></ul><h2 id="0æ¨¡æ€"><a href="#0æ¨¡æ€" class="headerlink" title="0æ¨¡æ€"></a>0æ¨¡æ€</h2><h2 id="01æ¨¡æ€"><a href="#01æ¨¡æ€" class="headerlink" title="01æ¨¡æ€"></a>01æ¨¡æ€</h2><ul><li>loss</li></ul><p><img src="/2021/01/12/experiments-record/image-20210115204346546.png" alt="image-20210115204346546"></p><ul><li>accuracy</li></ul><p><img src="/2021/01/12/experiments-record/image-20210115204521254.png" alt="image-20210115204521254"></p><h1 id="L2R-reuterså°è¯•"><a href="#L2R-reuterså°è¯•" class="headerlink" title="L2R reuterså°è¯•"></a>L2R reuterså°è¯•</h1><p>æ€»ä½“æ¥çœ‹ï¼Œ<strong>ç”¨SGDä¼˜åŒ–</strong>çš„æƒ…å†µä¸‹æ˜¯æœ‰æ•ˆæœçš„ï¼Œåœ¨æœªè°ƒå‚çš„æƒ…å†µä¸‹èƒ½å¤Ÿå¯¹æ¯”baselineæœ‰4-5ä¸ªç‚¹çš„æå‡ä¹ƒè‡³10ä¸ªç‚¹çš„æå‡ã€‚ä½†æ˜¯è§‚å¯Ÿæ›²çº¿å¯ä»¥å‘ç°<strong>noisy accå§‹ç»ˆè¿˜æ˜¯åœ¨ä¸Šå‡çš„ï¼Œå³ä»ç„¶ä¼šå¯¹noisy samplesè¿‡æ‹Ÿåˆï¼Œå› æ­¤è¦å°½å¿«è€ƒè™‘regularizationçš„æ–¹æ³•æ¯”å¦‚mixup</strong></p><p><img src="/2021/01/12/experiments-record/image-20210119114745327.png" alt="image-20210119114745327"></p><p><img src="/2021/01/12/experiments-record/image-20210119114805972.png" alt="image-20210119114805972"></p><h2 id="å¯¹æ¯”-baseline"><a href="#å¯¹æ¯”-baseline" class="headerlink" title="å¯¹æ¯” baseline"></a>å¯¹æ¯” baseline</h2><ul><li>0.4</li></ul><p><img src="/2021/01/12/experiments-record/image-20210119120427076.png" alt="image-20210119120427076"></p><p><img src="/2021/01/12/experiments-record/image-20210119120437196.png" alt="image-20210119120437196"></p><ul><li>0.6</li></ul><p><img src="/2021/01/12/experiments-record/image-20210119120456236.png" alt="image-20210119120456236"></p><p><img src="/2021/01/12/experiments-record/image-20210119120508626.png" alt="image-20210119120508626"></p><ul><li>0.7</li></ul><p><img src="/2021/01/12/experiments-record/image-20210119120609912.png" alt="image-20210119120609912"></p><p><img src="/2021/01/12/experiments-record/image-20210119120627710.png" alt="image-20210119120627710"></p><h1 id="DivideMix"><a href="#DivideMix" class="headerlink" title="DivideMix"></a>DivideMix</h1><h2 id="sym-0-4"><a href="#sym-0-4" class="headerlink" title="sym 0.4"></a>sym 0.4</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">-------------------------------------------------------------------------------------------------------------------------------------------------------------Exp: reuters-balance-symmetric_0.4-dividemix-fusion_<span class="token punctuation">[</span><span class="token number">0</span>, <span class="token number">1</span><span class="token punctuation">]</span>-SGD_lr0.01-clean_val         h_score  loss    loss_2 label_loss_1  loss    loss_1   entropy unlabeled_loss_1 unlabeled_loss_2    loss_2 label_loss_2    loss_1 duration  accuracy           train valid     valid        train train     valid     valid            train            train     train        train     train    train     validepoch-25     NaN   NaN  <span class="token number">1.177624</span>     <span class="token number">0.777585</span>   NaN  <span class="token number">1.060939</span>  <span class="token number">0.767858</span>         <span class="token number">0.008861</span>         <span class="token number">0.011454</span>  <span class="token number">1.231793</span>     <span class="token number">0.860347</span>  <span class="token number">1.097191</span>  <span class="token number">19</span>.891s  <span class="token number">0.660138</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>Best val epoch on run <span class="token number">2</span>:11, <span class="token builtin class-name">test</span> accuracy: <span class="token number">0.6828</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token number">3</span> runs avg accuracy: <span class="token number">0.6897</span>/0.0051. Each run <span class="token builtin class-name">test</span> accuracy:<span class="token punctuation">[</span><span class="token string">'0.6914'</span>, <span class="token string">'0.6948'</span>, <span class="token string">'0.6828'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="sym-0-6"><a href="#sym-0-6" class="headerlink" title="sym 0.6"></a>sym 0.6</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">-------------------------------------------------------------------------------------------------------------------------------------------------------------Exp: reuters-balance-symmetric_0.6-dividemix-fusion_<span class="token punctuation">[</span><span class="token number">0</span>, <span class="token number">1</span><span class="token punctuation">]</span>-SGD_lr0.01-clean_val           entropy  loss_1 h_score unlabeled_loss_2 label_loss_2    loss_2           label_loss_1  accuracy    loss_1 unlabeled_loss_1  loss duration  loss             valid   train   train            train        train     valid     train        train     valid     valid            train train    train validepoch-25  <span class="token number">0.753669</span>  <span class="token number">1.4467</span>     NaN         <span class="token number">0.007444</span>      <span class="token number">0.23004</span>  <span class="token number">2.827142</span>  <span class="token number">1.358757</span>     <span class="token number">0.354897</span>  <span class="token number">0.165899</span>  <span class="token number">2.842674</span>         <span class="token number">0.016391</span>   NaN  <span class="token number">23</span>.219s   NaN<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>Best val epoch on run <span class="token number">2</span>:11, <span class="token builtin class-name">test</span> accuracy: <span class="token number">0.1672</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token number">3</span> runs avg accuracy: <span class="token number">0.3029</span>/0.0976. Each run <span class="token builtin class-name">test</span> accuracy:<span class="token punctuation">[</span><span class="token string">'0.3931'</span>, <span class="token string">'0.3483'</span>, <span class="token string">'0.1672'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="sym-0-7"><a href="#sym-0-7" class="headerlink" title="sym 0.7"></a>sym 0.7</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">-------------------------------------------------------------------------------------------------------------------------------------------------------------Exp: reuters-balance-symmetric_0.7-dividemix-fusion_<span class="token punctuation">[</span><span class="token number">0</span>, <span class="token number">1</span><span class="token punctuation">]</span>-SGD_lr0.01-clean_val           entropy    loss_1 h_score unlabeled_loss_2 label_loss_2    loss_2           label_loss_1  accuracy    loss_1 unlabeled_loss_1  loss duration  loss             valid     train   train            train        train     valid     train        train     valid     valid            train train    train validepoch-25  <span class="token number">0.897166</span>  <span class="token number">1.642383</span>     NaN         <span class="token number">0.007334</span>     <span class="token number">0.228026</span>  <span class="token number">2.936547</span>  <span class="token number">1.381694</span>     <span class="token number">0.562114</span>  <span class="token number">0.167051</span>  <span class="token number">2.332163</span>         <span class="token number">0.029605</span>   NaN  <span class="token number">14</span>.290s   NaN<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>Best val epoch on run <span class="token number">2</span>:17, <span class="token builtin class-name">test</span> accuracy: <span class="token number">0.3069</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token number">3</span> runs avg accuracy: <span class="token number">0.3397</span>/0.0283. Each run <span class="token builtin class-name">test</span> accuracy:<span class="token punctuation">[</span><span class="token string">'0.3759'</span>, <span class="token string">'0.3362'</span>, <span class="token string">'0.3069'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="IEG"><a href="#IEG" class="headerlink" title="IEG"></a>IEG</h1><h2 id="å¯èƒ½å°è¯•çš„ç‚¹ï¼ˆDONEï¼‰"><a href="#å¯èƒ½å°è¯•çš„ç‚¹ï¼ˆDONEï¼‰" class="headerlink" title="å¯èƒ½å°è¯•çš„ç‚¹ï¼ˆDONEï¼‰"></a>å¯èƒ½å°è¯•çš„ç‚¹ï¼ˆDONEï¼‰</h2><h3 id="æ— æ³•augmentçš„æ•°æ®"><a href="#æ— æ³•augmentçš„æ•°æ®" class="headerlink" title="æ— æ³•augmentçš„æ•°æ®"></a>æ— æ³•augmentçš„æ•°æ®</h3><ul><li>å¯¹äºreutersè¿™ç§éš¾ä»¥augmentçš„æ•°æ®ï¼Œä¸»è¦ä¼šå½±å“çš„ç‚¹åœ¨äºåŸç‰ˆä¸­çš„pseudo labeléƒ¨åˆ†ï¼Œå› æ­¤å¯ä»¥è€ƒè™‘ï¼š<ul><li>æŒ‰ç…§K=1çš„æƒ…å†µè¿›è¡Œï¼Œå³ç›´æ¥ç”¨iteration outputä½œä¸ºpseudo labelï¼Œç„¶åä¹Ÿå»é™¤æ‰KL lossï¼Œå‰©ä¸‹åŸæ¥çš„å››éƒ¨åˆ†</li><li>ç±»ä¼¼äºICTè¿™ç§ç”¨åŒä¸€ä¸ªbatchå†…çš„unlabelled sampleè¿›è¡Œmixupç„¶åç®—ä¸€ä¸ªunsupervised lossï¼Œä»£æ›¿KL lossï¼Œè¿™ä¹ˆåšç­‰ä»·äº5ä¸ªlossä¸­æœ‰ä¸‰ä¸ªmixup loss</li></ul></li><li>æ ¹æ®noisy studentçš„è§‚ç‚¹ï¼šnoiseå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šinput noiseå’Œmodel noiseã€‚å‰è€…ä¸»è¦æŒ‡çš„æ˜¯data augmentationï¼Œåè€…åˆ™æ˜¯dropoutå’Œstochastic depth<ul><li>mixmatchåŠå…¶å˜ç§ä¸­å¤§å¤šæ•°æ˜¯åˆ©ç”¨äº†data augmentationå³input noiseï¼Œä½†æ˜¯å¾ˆå¤šæ•°æ®æ¯”å¦‚åƒreutersè¿™ç§ç›´æ¥æå–å¥½ç‰¹å¾æ‰¾ä¸åˆ°å…ƒæ•°æ®çš„æ•°æ®é›†ï¼Œæ˜¯æ²¡åŠæ³•ç›´æ¥è¿›è¡Œaugmentçš„ã€‚</li><li>å› æ­¤å¯¹äºè¿™ç§æƒ…å†µï¼Œåªèƒ½è€ƒè™‘åé¢çš„model noiseã€‚ä½†æ˜¯æ˜¾ç„¶model noiseå¹¶ä¸æ˜¯å¯¹sampleè¿›è¡Œå¤„ç†çš„ï¼Œç›´æ¥å¥—å¹¶ä¸ç°å®ã€‚<strong>å¹¶ä¸”model noiseå’Œinput noiseåœ¨theoryä¸Šæ˜¯å¦ç­‰åŒï¼Ÿ</strong>è¿™ä¸ªç‚¹ä¹Ÿæ˜¯éœ€è¦è€ƒè™‘çš„ã€‚å¦‚æœä¸ç­‰åŒï¼Œæ˜¾ç„¶ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚</li><li>mixmatchä¸­ç”¨åˆ°çš„data augmentationå¤§å¤šæ•°è¿˜æ˜¯ä¸ºäº†ä¿è¯consistency regularizationï¼Œè€Œconsistency regularizationåœ¨ICTçš„æ–‡ç« ä¸­è¯´çš„ä¹ŸæŒºæ¸…æ¥šçš„ï¼Œæœ€æ ¸å¿ƒè¦æŠŠæ¡çš„ç‚¹å°±æ˜¯ä¿è¯åœ¨low density regionä¸­çš„æ ·æœ¬æœ‰consistency regularizationï¼Œå³small perturbationä¸ä¼šè®©æ¨¡å‹çš„è¾“å‡ºå‘ç”Ÿå˜åŒ–</li></ul></li></ul><h3 id="hard-weightså’Œpercentileçš„å½±å“"><a href="#hard-weightså’Œpercentileçš„å½±å“" class="headerlink" title="hard weightså’Œpercentileçš„å½±å“"></a>hard weightså’Œpercentileçš„å½±å“</h3><p>å½“å‰çš„å®ç°æ˜¯ä½¿ç”¨å½’ä¸€åŒ–åçš„weightï¼ˆ-min / max - minï¼‰æ¥å®ç°çš„ï¼Œä½†æ˜¯å®é™…ä¸Š<strong>å¯èƒ½æ›´å¥½çš„æ–¹å¼ç›´æ¥åˆ©ç”¨<code>torch.quantile</code>æ‰¾å‡ºå¯¹åº”çš„åˆ†ä½æ•°</strong>ï¼Œç„¶åç”¨è¿™ä¸ªä½œä¸ºé˜ˆå€¼ç›´æ¥å»å¡<code>weights</code>ã€‚å½“å‰å®æµ‹ä¸¤ç§æ–¹æ³•ç­›é€‰å‡ºæ¥çš„æ ·æœ¬æœ‰ä¸€å®šå·®å¼‚(7/256)ï¼Œ<strong>æ€»ä½“å·®å¼‚å¯èƒ½ä¸æ˜¯å¤ªå¤§ï¼Œå¾…å®éªŒ</strong></p><h2 id="æ³¨æ„TensorFlowçš„å®ç°ä¸­æ˜¯æ²¡æœ‰ä½¿ç”¨thresholdçš„"><a href="#æ³¨æ„TensorFlowçš„å®ç°ä¸­æ˜¯æ²¡æœ‰ä½¿ç”¨thresholdçš„" class="headerlink" title="æ³¨æ„TensorFlowçš„å®ç°ä¸­æ˜¯æ²¡æœ‰ä½¿ç”¨thresholdçš„"></a>æ³¨æ„TensorFlowçš„å®ç°ä¸­æ˜¯æ²¡æœ‰ä½¿ç”¨thresholdçš„</h2><p>åŸæ–‡ä¸­çš„Algorithmçš„step 4æœ‰æåˆ°è¯´æœ‰ä¸€ä¸ªthresholdçš„è®¾ç½®ï¼Œåªæœ‰ä½äºthresholdçš„æ‰è®¤ä¸ºæ˜¯possibly mislabeledçš„samplesï¼Œéœ€è¦ç”¨guessed  labelså»ä»£æ›¿ã€‚ä½†æ˜¯æ³¨æ„çœ‹Appendix Bï¼Œé‡Œé¢æœ€åæåˆ°äº†ï¼š</p><blockquote><p>Algorithm 1 step 4 uses a weight threshold T to divide the training batch to possibly clean set and possibly mislabeled set. <strong>In our experiments, we find setting T to be highest is optimal in terms of training stability</strong>, i.e. <strong>all data is treated as possibly mislabeled</strong>, because it makes the batch size fixed to compute other losses that use data with pseudo labels  </p></blockquote><p>è¿™é‡Œå¯ä»¥ç†è§£ä¸ºï¼šå¯¹äº Sec 4.4é‡Œé¢çš„ä¸¤ä¸ªCE lossï¼Œå¦‚æœä¸æ˜¯æŒ‰ç…§åŸæ–‡é‚£æ ·çš„è®¾ç½®ï¼Œå°†ä¼šå¯¼è‡´è¿™ä¸¤ä¸ªlosså¯¹åº”çš„æ ·æœ¬å§‹ç»ˆåœ¨å˜åŒ–ï¼Œä¹Ÿå³å¯¼è‡´lossçš„å¤§å°å¯èƒ½å˜åŒ–åœ°å¾ˆå‰§çƒˆã€‚</p><p><strong>å…·ä½“å®éªŒçš„æ—¶å€™è¿˜è¦å…·ä½“è€ƒè™‘ä¸€ä¸‹ã€‚å¯èƒ½éœ€è¦è¿˜åŸå›åŸæ–‡çš„è®¾ç½®</strong></p><h2 id="æ³¨æ„batch-sizeå¯¹meta-valid-data-loaderçš„å½±å“"><a href="#æ³¨æ„batch-sizeå¯¹meta-valid-data-loaderçš„å½±å“" class="headerlink" title="æ³¨æ„batch sizeå¯¹meta_valid_data_loaderçš„å½±å“"></a>æ³¨æ„batch sizeå¯¹<code>meta_valid_data_loader</code>çš„å½±å“</h2><p>é»˜è®¤æ˜¯ä½¿ç”¨ä¸‹é¢è¿™ä¸ª<code>inf_loop</code>æ¥å®ç°æ— ç©·æšä¸¾</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">inf_loop</span><span class="token punctuation">(</span>data_loader<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">''' wrapper function for endless data loader. '''</span>    <span class="token keyword">for</span> loader <span class="token keyword">in</span> repeat<span class="token punctuation">(</span>data_loader<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">yield</span> <span class="token keyword">from</span> loader<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä½†è¿™ç§æ–¹å¼æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>ç”±äºé»˜è®¤<code>drop_last=False</code>ï¼Œå› æ­¤å¦‚æœ<code>len(dataset)</code>ä¸èƒ½è¢«<code>batch_size</code>æ•´é™¤ï¼Œåˆ™<strong>æœ€åä¸€å°éƒ¨åˆ†ä¼šè¢«å•ç‹¬å–å‡º</strong>ï¼ˆå› ä¸ºè¿™é‡Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸æ–­æŠŠä¸€ä¸ªä¸ªbatchä»data_loaderä¸­å¾ªç¯å–å‡ºï¼‰ã€‚å¯¼è‡´<code>batch_size</code>ä¸æ˜¯æ’å®šçš„ã€‚</li><li>å¦‚æœæ•´ä¸ª<code>len(dataset)</code>é»˜è®¤å°±æ¯”<code>batch_size</code>å°ï¼Œåˆ™æ¯æ¬¡å–å‡ºçš„batchå¿…ç„¶éƒ½ä¼šæ¯”è®¾å®šçš„<code>batch_size</code>å°</li></ol><p>ç‰¹åˆ«ä¸Šé¢ï¼Œä¸‹é¢è¿™ç§åšæ³•åœ¨<code>meta_valid_data_loader.dataset</code>çš„å¤§å°æ¯”é»˜è®¤çš„<code>batch_size</code>å°çš„æ—¶å€™ï¼Œæ¯æ¬¡å–å‡ºçš„<code>meta_data</code>å¿…ç„¶æ˜¯ä¸è¶³çš„ï¼›å¦‚æœä¸èƒ½è¢«æ•´é™¤ï¼Œåˆ™æœ«å°¾é‚£ä¸ª<code>meta_batch</code>çš„å¤§å°ä¹Ÿä¸æ­£å¸¸ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">for</span> batch_idx<span class="token punctuation">,</span> <span class="token punctuation">(</span>batch_data<span class="token punctuation">,</span> meta_data<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span><span class="token builtin">zip</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>data_loader<span class="token punctuation">,</span> self<span class="token punctuation">.</span>meta_valid_data_loader<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ­£ç¡®åšæ³•å¯ä»¥ç”¨ç±»ä¼¼ä¸‹é¢è¿™ç§æ€è·¯ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">g</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    all_res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> t <span class="token keyword">in</span> cycle<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>all_res<span class="token punctuation">)</span> <span class="token operator">>=</span> size<span class="token punctuation">:</span>            <span class="token keyword">yield</span> all_res            all_res <span class="token operator">=</span> <span class="token punctuation">[</span>t<span class="token punctuation">]</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            all_res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>t<span class="token punctuation">)</span>            iter_1 <span class="token operator">=</span> <span class="token builtin">iter</span><span class="token punctuation">(</span>g<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">next</span><span class="token punctuation">(</span>iter_1<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span><span class="token number">0</span>, <span class="token number">1</span>, <span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">0</span>, <span class="token number">1</span>, <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">0</span>, <span class="token number">1</span>, <span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">0</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿™é‡Œéœ€è¦åšçš„æ˜¯æ”¹ä¸€ä¸‹mergeçš„é€»è¾‘</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">inf_loop_v2</span><span class="token punctuation">(</span>data_loader<span class="token punctuation">,</span> batch_size<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">''' wrapper function for endless data loader. Fix batch_size bug for torch only'''</span>    merged_batch <span class="token operator">=</span> <span class="token punctuation">[</span>torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> idx<span class="token punctuation">,</span> batch <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>cycle<span class="token punctuation">(</span>data_loader<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> idx <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            merged_batch <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>batch<span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            merged_batch <span class="token operator">=</span> <span class="token punctuation">[</span>torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span><span class="token punctuation">[</span>data<span class="token punctuation">,</span> cur_data<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">for</span> data<span class="token punctuation">,</span> cur_data <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>merged_batch<span class="token punctuation">,</span> batch<span class="token punctuation">)</span><span class="token punctuation">]</span>        <span class="token keyword">if</span> merged_batch<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">>=</span> batch_size<span class="token punctuation">:</span>            return_data <span class="token operator">=</span> <span class="token punctuation">[</span>data<span class="token punctuation">[</span><span class="token punctuation">:</span>batch_size<span class="token punctuation">]</span> <span class="token keyword">for</span> data <span class="token keyword">in</span> merged_batch<span class="token punctuation">]</span>            <span class="token keyword">yield</span> return_data            merged_batch <span class="token operator">=</span> <span class="token punctuation">[</span>data<span class="token punctuation">[</span>batch_size<span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token keyword">for</span> data <span class="token keyword">in</span> merged_batch<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="unsupervised-lossä¸­å¯¹probe-imageçš„permutationæ“ä½œ"><a href="#unsupervised-lossä¸­å¯¹probe-imageçš„permutationæ“ä½œ" class="headerlink" title="unsupervised lossä¸­å¯¹probe imageçš„permutationæ“ä½œ"></a>unsupervised lossä¸­å¯¹probe imageçš„permutationæ“ä½œ</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python">n_probe_to_mix <span class="token operator">=</span> tf<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>aug_images<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>probe <span class="token operator">=</span> tf<span class="token punctuation">.</span>tile<span class="token punctuation">(</span>tf<span class="token punctuation">.</span>constant<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> tf<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>probe_images<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>idx <span class="token operator">=</span> tf<span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span>tf<span class="token punctuation">.</span>random<span class="token punctuation">.</span>categorical<span class="token punctuation">(</span>probe<span class="token punctuation">,</span> n_probe_to_mix<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢è¿™æ®µæ“ä½œæœ¬è´¨ä¸Šåº”è¯¥æ˜¯ä¸éœ€è¦çš„ï¼Œæ¨æµ‹çš„åŸå› å¯èƒ½æ˜¯<strong>ä¸ºäº†MixModeä¸­ä¸åŒmixupæ“ä½œæ–¹å¼</strong>çš„éœ€è¦ã€‚æ•…å¯ä»¥è€ƒè™‘ä¿ç•™</p><h2 id="augmented-samplesçš„labels"><a href="#augmented-samplesçš„labels" class="headerlink" title="augmented samplesçš„labels"></a>augmented samplesçš„labels</h2><p>æ€»ä½“æ¥è¯´éƒ½æ˜¯å’Œæœªå¢å¼ºå‰çš„sampleså…±ç”¨label</p><ul><li>å¯¹äºpossibly clean samplesæ¥è¯´ï¼Œå°±æ˜¯æœªå¢å¼ºå‰çš„labelï¼Œå³ä¸€ä¸ªhard label</li><li>å¯¹äºpossibly mislabeled samplesæ¥è¯´ï¼Œå°±æ˜¯ç”¨gï¼Œå³ä¸€ä¸ªsoft label</li></ul><h2 id="pytorchå®éªŒå°è¯•"><a href="#pytorchå®éªŒå°è¯•" class="headerlink" title="pytorchå®éªŒå°è¯•"></a>pytorchå®éªŒå°è¯•</h2><h3 id="sym0-4"><a href="#sym0-4" class="headerlink" title="sym0.4"></a>sym0.4</h3><p>æœ€å¥½çš„å°è¯•ï¼šå›ºå®š<code>mis_threshold=1.1</code>å³å¦‚åŸæ–‡é‚£æ ·</p><p><code>2021-01-26/16-47-27-None/</code> </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>Best val epoch on run <span class="token number">0</span>:13, <span class="token builtin class-name">test</span> accuracy: <span class="token number">0.7655</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token number">1</span> runs avg accuracy: <span class="token number">0.7655</span>/0.0000. Each run <span class="token builtin class-name">test</span> accuracy:<span class="token punctuation">[</span><span class="token string">'0.7655'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>2021-01-26/16-51-09-None</code></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>Best val epoch on run <span class="token number">0</span>:18, <span class="token builtin class-name">test</span> accuracy: <span class="token number">0.7655</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token number">1</span> runs avg accuracy: <span class="token number">0.7655</span>/0.0000. Each run <span class="token builtin class-name">test</span> accuracy:<span class="token punctuation">[</span><span class="token string">'0.7655'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å°è¯•ç”¨åŠ¨æ€<code>ce_factor</code>çš„æ–¹æ³•ï¼šä¸å¤ªå¥½ï¼Œä¸å¦‚å›ºå®šçš„</p><p><code>2021-01-26/19-51-01-None/</code></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2021</span>-01-26/19-51-01-None/reuters_ieg_train.log:1619:<span class="token punctuation">[</span><span class="token number">2021</span>-01-26 <span class="token number">20</span>:03:53,889<span class="token punctuation">]</span><span class="token punctuation">[</span>base-trainer<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> - Best val epoch on run <span class="token number">0</span>:14, <span class="token builtin class-name">test</span> accuracy: <span class="token number">0.6948</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="sym-0-6-1"><a href="#sym-0-6-1" class="headerlink" title="sym 0.6"></a>sym 0.6</h3><p>åŒæ ·æ˜¯å›ºå®šce_factor</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2021</span>-01-26/19-50-32-None/reuters_ieg_train.log:3923:<span class="token punctuation">[</span><span class="token number">2021</span>-01-26 <span class="token number">20</span>:24:25,578<span class="token punctuation">]</span><span class="token punctuation">[</span>base-trainer<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> - Best val epoch on run <span class="token number">0</span>:16, <span class="token builtin class-name">test</span> accuracy: <span class="token number">0.6241</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="å°è¯•fake-augmentï¼ˆä¸¤æ¬¡mixupï¼‰"><a href="#å°è¯•fake-augmentï¼ˆä¸¤æ¬¡mixupï¼‰" class="headerlink" title="å°è¯•fake augmentï¼ˆä¸¤æ¬¡mixupï¼‰"></a>å°è¯•fake augmentï¼ˆä¸¤æ¬¡mixupï¼‰</h3><p><strong>æ•ˆæœä¸å¤§</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------Exp: reuters-balance-symmetric_0.4-ieg-meta_fusion_<span class="token punctuation">[</span><span class="token number">0</span>, <span class="token number">1</span><span class="token punctuation">]</span>-SGD_lr0.01-clean_val          meta_acc weight_acc meta_loss  accuracy h_score unlabeled_loss      loss  eps_loss  <span class="token punctuation">..</span>.  ema_loss unlabeled_u_loss      loss unlabeled_kl_loss   eps_acc duration    w_loss unlabeled_l_loss             train      train     train     valid   train          train     valid     train  <span class="token punctuation">..</span>.     valid            train     train             train     train    train     train            trainepoch-25  <span class="token number">0.004568</span>   <span class="token number">0.402382</span>  <span class="token number">0.035882</span>  <span class="token number">0.704598</span>     NaN       <span class="token number">2.032226</span>  <span class="token number">0.856156</span>  <span class="token number">0.713818</span>  <span class="token punctuation">..</span>.  <span class="token number">0.953503</span>         <span class="token number">0.343933</span>  <span class="token number">2.463873</span>           <span class="token number">0.00215</span>  <span class="token number">0.732781</span>  <span class="token number">41</span>.601s  <span class="token number">0.149475</span>         <span class="token number">0.310409</span><span class="token punctuation">[</span><span class="token number">1</span> rows x <span class="token number">17</span> columns<span class="token punctuation">]</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>Best val epoch on run <span class="token number">0</span>:10, <span class="token builtin class-name">test</span> accuracy: <span class="token number">0.7534</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token number">1</span> runs avg accuracy: <span class="token number">0.7534</span>/0.0000. Each run <span class="token builtin class-name">test</span> accuracy:<span class="token punctuation">[</span><span class="token string">'0.7534'</span><span class="token punctuation">]</span>Save at /home/weitaotang/multimodal/pytorch_hydra_results_temp/debug/2021-01-27/16-15-34-None<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------Exp: reuters-balance-symmetric_0.4-ieg-meta_fusion_<span class="token punctuation">[</span><span class="token number">0</span>, <span class="token number">1</span><span class="token punctuation">]</span>-SGD_lr0.01-clean_val         unlabeled_l_loss duration     loss           unlabeled_loss h_score  meta_acc meta_loss  <span class="token punctuation">..</span>.   eps_acc    w_loss  eps_loss  ema_loss  accuracy weight_acc ema_accuracy unlabeled_u_loss                    train    train    valid     train          train   train     train     train  <span class="token punctuation">..</span>.     train     train     train     valid     valid      train        valid            trainepoch-20         <span class="token number">0.454691</span>  <span class="token number">41</span>.396s  <span class="token number">0.78376</span>  <span class="token number">3.406944</span>       <span class="token number">2.877247</span>     NaN  <span class="token number">0.004635</span>  <span class="token number">0.035477</span>  <span class="token punctuation">..</span>.  <span class="token number">0.749871</span>  <span class="token number">0.152077</span>  <span class="token number">0.907316</span>  <span class="token number">0.982341</span>  <span class="token number">0.751724</span>   <span class="token number">0.402382</span>     <span class="token number">0.710345</span>         <span class="token number">0.479111</span><span class="token punctuation">[</span><span class="token number">1</span> rows x <span class="token number">17</span> columns<span class="token punctuation">]</span>Normal model <span class="token builtin class-name">test</span> on <span class="token number">580</span> samples <span class="token operator">|</span> Acc <span class="token number">0.7431</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>Best val epoch on run <span class="token number">0</span>:20, <span class="token builtin class-name">test</span> accuracy: <span class="token number">0.7431</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token number">1</span> runs avg accuracy: <span class="token number">0.7431</span>/0.0000. Each run <span class="token builtin class-name">test</span> accuracy:<span class="token punctuation">[</span><span class="token string">'0.7431'</span><span class="token punctuation">]</span>Save at /home/weitaotang/multimodal/pytorch_hydra_results_temp/debug/2021-01-27/16-40-22-None<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="0128-è°ƒå‚è®°å½•ï¼šæš‚æ—¶æ˜¯æ•ˆæœæœ€å¥½çš„ï¼Œaccèƒ½åˆ°0-81637"><a href="#0128-è°ƒå‚è®°å½•ï¼šæš‚æ—¶æ˜¯æ•ˆæœæœ€å¥½çš„ï¼Œaccèƒ½åˆ°0-81637" class="headerlink" title="0128 è°ƒå‚è®°å½•ï¼šæš‚æ—¶æ˜¯æ•ˆæœæœ€å¥½çš„ï¼Œaccèƒ½åˆ°0.81637"></a>0128 è°ƒå‚è®°å½•ï¼šæš‚æ—¶æ˜¯æ•ˆæœæœ€å¥½çš„ï¼Œaccèƒ½åˆ°0.81637</h2><h1 id="IEG-DivideMix"><a href="#IEG-DivideMix" class="headerlink" title="IEG + DivideMix"></a>IEG + DivideMix</h1><h2 id="å¯èƒ½å¯ä»¥å°è¯•çš„ç‚¹"><a href="#å¯èƒ½å¯ä»¥å°è¯•çš„ç‚¹" class="headerlink" title="å¯èƒ½å¯ä»¥å°è¯•çš„ç‚¹"></a>å¯èƒ½å¯ä»¥å°è¯•çš„ç‚¹</h2><ul><li>inconsistency errorï¼Ÿå°±æ˜¯KLï¼Œä¸è¿‡ä¸æ˜¯minimizeè€Œæ˜¯maximize</li></ul><h2 id="å°è¯•1ï¼š-IEG-ä»…ä»…åŠ å…¥weighted-guessed-labels"><a href="#å°è¯•1ï¼š-IEG-ä»…ä»…åŠ å…¥weighted-guessed-labels" class="headerlink" title="å°è¯•1ï¼š IEG + ä»…ä»…åŠ å…¥weighted guessed labels"></a>å°è¯•1ï¼š IEG + ä»…ä»…åŠ å…¥weighted guessed labels</h2><p>åŸºæœ¬æ˜¯IEGçš„åº•å­ï¼Œä¸¤ä¸ªæ¨¡å‹ï¼ŒåŒæ—¶æ˜¯step-basedçš„æ›´æ–°æ–¹å¼ï¼Œè®¡ç®—æ‰€æœ‰losséƒ½æ˜¯ç”¨è‡ªå·±æ‰€æŒ‘é€‰å‡ºæ¥çš„é‚£ä¸€ä»½æ•°æ®ã€‚åŒºåˆ«åœ¨ä½¿ç”¨äº†weighted  labelsä½œä¸ºæœ€åçš„unlabelledéƒ¨åˆ†çš„è¾“å‡ºã€‚</p><p><code>mis_threshold=1.1</code>å› æ­¤é»˜è®¤æ‰€æœ‰sampleséƒ½æ˜¯unlabelled samplesï¼Œå› æ­¤ç›´æ¥ä½¿ç”¨<code>weighted_guess_labels</code>çš„æ—¶å€™èƒ½å¤Ÿå¾ˆæ–¹ä¾¿åœ°ç›´æ¥ç›¸åŠ </p><p>æœ‰ä¸€å®šæ•ˆæœï¼ˆå–å¹³å‡ï¼Œå¤§æ¦‚2-3ä¸ªç‚¹ï¼‰</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>Best val epoch on run <span class="token number">0</span>:17, <span class="token builtin class-name">test</span> accuracy: <span class="token number">0.8121</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token number">1</span> runs avg accuracy: <span class="token number">0.8121</span>/0.0000. Each run <span class="token builtin class-name">test</span> accuracy:<span class="token punctuation">[</span><span class="token string">'0.8121'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">mis_logits_1<span class="token punctuation">,</span> mis_inputs_1<span class="token punctuation">,</span> all_c_inputs_1<span class="token punctuation">,</span> all_c_labels_1<span class="token punctuation">,</span> mis_idx_1 <span class="token operator">=</span> self<span class="token punctuation">.</span>_get_mis_c<span class="token punctuation">(</span>hard_weight_1<span class="token punctuation">,</span>                                                                                        logits_1<span class="token punctuation">,</span>                                                                                        inputs<span class="token punctuation">,</span>                                                                                        meta_inputs_1<span class="token punctuation">,</span>                                                                                        meta_clean_labels_1<span class="token punctuation">,</span>                                                                                        labels<span class="token punctuation">)</span>mis_logits_2<span class="token punctuation">,</span> mis_inputs_2<span class="token punctuation">,</span> all_c_inputs_2<span class="token punctuation">,</span> all_c_labels_2<span class="token punctuation">,</span> mis_idx_2 <span class="token operator">=</span> self<span class="token punctuation">.</span>_get_mis_c<span class="token punctuation">(</span>hard_weight_2<span class="token punctuation">,</span>                                                                                        logits_2<span class="token punctuation">,</span>                                                                                        inputs<span class="token punctuation">,</span>                                                                                        meta_inputs_2<span class="token punctuation">,</span>                                                                                        meta_clean_labels_2<span class="token punctuation">,</span>                                                                                        labels<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">_weighted_guess_label</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> batch_logits_1<span class="token punctuation">,</span> w1<span class="token punctuation">,</span> batch_logits_2<span class="token punctuation">,</span> w2<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># K = batch_logits.size(0)</span>    <span class="token keyword">with</span> torch<span class="token punctuation">.</span>no_grad<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># old_w1, old_w2 = w1.clone().detach(), w2.clone().detach()</span>        invalid_index <span class="token operator">=</span> torch<span class="token punctuation">.</span>logical_and<span class="token punctuation">(</span>w1 <span class="token operator">==</span> <span class="token number">0.0</span><span class="token punctuation">,</span> w2 <span class="token operator">==</span> <span class="token number">0.0</span><span class="token punctuation">)</span>        w1<span class="token punctuation">[</span>invalid_index<span class="token punctuation">]</span><span class="token punctuation">,</span> w2<span class="token punctuation">[</span>invalid_index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1e</span><span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1e</span><span class="token operator">-</span><span class="token number">8</span>        reweight_w1 <span class="token operator">=</span> <span class="token punctuation">(</span>w1 <span class="token operator">/</span> <span class="token punctuation">(</span>w1 <span class="token operator">+</span> w2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>        reweight_w2 <span class="token operator">=</span> <span class="token punctuation">(</span>w2 <span class="token operator">/</span> <span class="token punctuation">(</span>w1 <span class="token operator">+</span> w2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token comment"># expected K x batch x num_feat</span>        all_u_logits_1 <span class="token operator">=</span> torch<span class="token punctuation">.</span>unbind<span class="token punctuation">(</span>batch_logits_1<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>        norm_logits_1 <span class="token operator">=</span> <span class="token punctuation">[</span>logit_norm<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">*</span> reweight_w1 <span class="token keyword">for</span> x <span class="token keyword">in</span> all_u_logits_1<span class="token punctuation">]</span>        p_model_y_1 <span class="token operator">=</span> torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span><span class="token punctuation">[</span>torch<span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>softmax<span class="token punctuation">(</span>logits<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">for</span> logits <span class="token keyword">in</span> norm_logits_1<span class="token punctuation">]</span><span class="token punctuation">)</span>        p_model_y_1 <span class="token operator">=</span> torch<span class="token punctuation">.</span>mean<span class="token punctuation">(</span>p_model_y_1<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>        all_u_logits_2 <span class="token operator">=</span> torch<span class="token punctuation">.</span>unbind<span class="token punctuation">(</span>batch_logits_2<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>        norm_logits_2 <span class="token operator">=</span> <span class="token punctuation">[</span>logit_norm<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">*</span> reweight_w2 <span class="token keyword">for</span> x <span class="token keyword">in</span> all_u_logits_2<span class="token punctuation">]</span>        p_model_y_2 <span class="token operator">=</span> torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span><span class="token punctuation">[</span>torch<span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>softmax<span class="token punctuation">(</span>logits<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">for</span> logits <span class="token keyword">in</span> norm_logits_2<span class="token punctuation">]</span><span class="token punctuation">)</span>        p_model_y_2 <span class="token operator">=</span> torch<span class="token punctuation">.</span>mean<span class="token punctuation">(</span>p_model_y_2<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>        p_model_y <span class="token operator">=</span> reweight_w1 <span class="token operator">*</span> p_model_y_1 <span class="token operator">+</span> reweight_w2 <span class="token operator">*</span> p_model_y_2        p_target <span class="token operator">=</span> torch<span class="token punctuation">.</span><span class="token builtin">pow</span><span class="token punctuation">(</span>p_model_y<span class="token punctuation">,</span> <span class="token number">1.0</span> <span class="token operator">/</span> self<span class="token punctuation">.</span>config<span class="token punctuation">.</span>T<span class="token punctuation">)</span>        p_target <span class="token operator">/=</span> torch<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>p_target<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> keepdim<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> p_target<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">ema_decay</span><span class="token punctuation">:</span> <span class="token number">0.999</span><span class="token key atrule">meta_momentum</span><span class="token punctuation">:</span> <span class="token number">0.9</span><span class="token key atrule">grad_eps_init</span><span class="token punctuation">:</span> <span class="token number">0.9</span><span class="token key atrule">ce_factor</span><span class="token punctuation">:</span> <span class="token number">9</span><span class="token key atrule">consistency_factor</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token key atrule">T</span><span class="token punctuation">:</span> <span class="token number">0.5</span><span class="token key atrule">beta</span><span class="token punctuation">:</span> <span class="token number">0.5</span><span class="token key atrule">meta_lr</span><span class="token punctuation">:</span> <span class="token number">1e-4</span><span class="token key atrule">mis_threshold</span><span class="token punctuation">:</span> <span class="token number">1.1</span> <span class="token comment"># 1.1 means treat all to be mislabel</span><span class="token key atrule">learning_rate</span><span class="token punctuation">:</span> <span class="token number">0.03</span><span class="token key atrule">use_fake_aug</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">fake_aug_lambda</span><span class="token punctuation">:</span> <span class="token number">0.95</span><span class="token key atrule">use_scheduler</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">use_penalty</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å°è¯•2ï¼šè¿›ä¸€æ­¥äº¤æ¢äºŒè€…ä¿¡æ¯"><a href="#å°è¯•2ï¼šè¿›ä¸€æ­¥äº¤æ¢äºŒè€…ä¿¡æ¯" class="headerlink" title="å°è¯•2ï¼šè¿›ä¸€æ­¥äº¤æ¢äºŒè€…ä¿¡æ¯"></a>å°è¯•2ï¼šè¿›ä¸€æ­¥äº¤æ¢äºŒè€…ä¿¡æ¯</h2><p>æ•ˆæœå·®ä¸å¤š</p><p>å‚æ•°è®¾ç½®åŒæ ·è®¾ç½®<code>mis_threshold=1.1</code>ï¼ˆå³<strong>æœ€åä¸¤ä¸ª<code>weighted_guessed_labels</code>æ˜¯ç›¸åŒçš„</strong>ï¼‰ï¼Œ<code>ce_factor=5, learning_rate=0.01</code>ï¼Œå…¶å®å’Œå°è¯•1æ˜¯å·®ä¸å¤šçš„å‚æ•°ï¼Œå‘ç°æ•ˆæœå’Œ1å…¶å®å·®ä¸å¤š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------Exp: reuters-balance-symmetric_0.4-ieg_dividemix-meta_fusion_<span class="token punctuation">[</span><span class="token number">0</span>, <span class="token number">1</span><span class="token punctuation">]</span>-SGD_lr0.03-clean_val            loss_2    loss_1               acc_1 eps_acc_1  w_loss_2 duration  accuracy  <span class="token punctuation">..</span>. unlabeled_loss_1 weight_acc_2 meta_loss_1  w_loss_1 meta_acc_1 unlabeled_l_loss_2 meta_acc_2 meta_loss_2             valid     train     valid     valid     train     train    train     valid  <span class="token punctuation">..</span>.            train        train       train     train      train              train      train       trainepoch-20  <span class="token number">0.688819</span>  <span class="token number">6.708918</span>  <span class="token number">0.684294</span>  <span class="token number">0.777011</span>  <span class="token number">0.842914</span>  <span class="token number">0.302043</span>  <span class="token number">71</span>.749s  <span class="token number">0.793103</span>  <span class="token punctuation">..</span>.         <span class="token number">6.392279</span>     <span class="token number">0.402382</span>    <span class="token number">0.044373</span>  <span class="token number">0.337714</span>   <span class="token number">0.004645</span>           <span class="token number">0.376796</span>   <span class="token number">0.004645</span>    <span class="token number">0.033203</span><span class="token punctuation">[</span><span class="token number">1</span> rows x <span class="token number">30</span> columns<span class="token punctuation">]</span>Test on <span class="token number">580</span> samples <span class="token operator">|</span> Merged acc <span class="token number">0.8052</span> <span class="token operator">|</span> Acc_1 <span class="token number">0.8000</span> <span class="token operator">|</span> Acc_2 <span class="token number">0.8000</span>Saving current best with max accuracy/valid:0.7931: model_best.pth <span class="token punctuation">..</span>.<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>Best val epoch on run <span class="token number">0</span>:20, <span class="token builtin class-name">test</span> accuracy: <span class="token number">0.8052</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token number">1</span> runs avg accuracy: <span class="token number">0.8052</span>/0.0000. Each run <span class="token builtin class-name">test</span> accuracy:<span class="token punctuation">[</span><span class="token string">'0.8052'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼šå¯ä»¥çœ‹åˆ°å‡ ä¹æ•´ä¸ªè¾“å…¥éƒ½äº¤æ¢äº†</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">weight_1<span class="token punctuation">,</span> hard_weight_1<span class="token punctuation">,</span> eps_1<span class="token punctuation">,</span> meta_loss_1<span class="token punctuation">,</span> meta_acc_1 <span class="token operator">=</span> self<span class="token punctuation">.</span>meta_optimize<span class="token punctuation">(</span>self<span class="token punctuation">.</span>model<span class="token punctuation">,</span> self<span class="token punctuation">.</span>optimizer<span class="token punctuation">,</span>                                                                             meta_inputs_1<span class="token punctuation">,</span>                                                                             meta_clean_labels_1<span class="token punctuation">,</span>                                                                             labels<span class="token punctuation">,</span>                                                                             inputs<span class="token punctuation">,</span>                                                                             init_guessed_labels_1<span class="token punctuation">)</span>weight_2<span class="token punctuation">,</span> hard_weight_2<span class="token punctuation">,</span> eps_2<span class="token punctuation">,</span> meta_loss_2<span class="token punctuation">,</span> meta_acc_2 <span class="token operator">=</span> self<span class="token punctuation">.</span>meta_optimize<span class="token punctuation">(</span>self<span class="token punctuation">.</span>model2<span class="token punctuation">,</span>                                                                             self<span class="token punctuation">.</span>optimizer2<span class="token punctuation">,</span>                                                                             meta_inputs_2<span class="token punctuation">,</span>                                                                             meta_clean_labels_2<span class="token punctuation">,</span>                                                                             labels<span class="token punctuation">,</span>                                                                             inputs<span class="token punctuation">,</span>                                                                             init_guessed_labels_2<span class="token punctuation">)</span>exchange <span class="token operator">=</span> <span class="token boolean">True</span><span class="token keyword">if</span> exchange<span class="token punctuation">:</span>    weight_1<span class="token punctuation">,</span> weight_2 <span class="token operator">=</span> weight_2<span class="token punctuation">,</span> weight_1    hard_weight_1<span class="token punctuation">,</span> hard_weight_2 <span class="token operator">=</span> hard_weight_2<span class="token punctuation">,</span> hard_weight_1    meta_inputs_1<span class="token punctuation">,</span> meta_inputs_2 <span class="token operator">=</span> meta_inputs_2<span class="token punctuation">,</span> meta_inputs_1    meta_clean_labels_1<span class="token punctuation">,</span> meta_clean_labels_2 <span class="token operator">=</span> meta_clean_labels_2<span class="token punctuation">,</span> meta_clean_labels_1mis_logits_1<span class="token punctuation">,</span> mis_inputs_1<span class="token punctuation">,</span> all_c_inputs_1<span class="token punctuation">,</span> all_c_labels_1<span class="token punctuation">,</span> mis_idx_1 <span class="token operator">=</span> self<span class="token punctuation">.</span>_get_mis_c<span class="token punctuation">(</span>weight_1<span class="token punctuation">,</span>                                                                                        hard_weight_1<span class="token punctuation">,</span>                                                                                        logits_1<span class="token punctuation">,</span>                                                                                        inputs<span class="token punctuation">,</span>                                                                                        meta_inputs_1<span class="token punctuation">,</span>                                                                                        meta_clean_labels_1<span class="token punctuation">,</span>                                                                                        labels<span class="token punctuation">)</span>mis_logits_2<span class="token punctuation">,</span> mis_inputs_2<span class="token punctuation">,</span> all_c_inputs_2<span class="token punctuation">,</span> all_c_labels_2<span class="token punctuation">,</span> mis_idx_2 <span class="token operator">=</span> self<span class="token punctuation">.</span>_get_mis_c<span class="token punctuation">(</span>weight_2<span class="token punctuation">,</span>                                                                                        hard_weight_2<span class="token punctuation">,</span>                                                                                        logits_2<span class="token punctuation">,</span>                                                                                        inputs<span class="token punctuation">,</span>                                                                                        meta_inputs_2<span class="token punctuation">,</span>                                                                                        meta_clean_labels_2<span class="token punctuation">,</span>                                                                                        labels<span class="token punctuation">)</span><span class="token comment"># TODO: try co_guessed_labels</span><span class="token comment"># co_guessed_labels = self._guess_label(torch.cat([logits_1, logits_2], 0))</span><span class="token comment"># weighted_guessed_labels = self._weighted_coguess_label(torch.unsqueeze(mis_logits_1, 0), weight_1,</span><span class="token comment">#                                                        torch.unsqueeze(mis_logits_2, 0), weight_2)</span>weighted_guessed_labels_1 <span class="token operator">=</span> self<span class="token punctuation">.</span>_weighted_single_guess_labels<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span>mis_logits_1<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                                               mis_idx_1<span class="token punctuation">,</span> weight_1<span class="token punctuation">,</span>                                                               torch<span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span>logits_2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                                               weight_2<span class="token punctuation">)</span>weighted_guessed_labels_2 <span class="token operator">=</span> self<span class="token punctuation">.</span>_weighted_single_guess_labels<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span>mis_logits_2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> mis_idx_2<span class="token punctuation">,</span>                                                               weight_2<span class="token punctuation">,</span> torch<span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span>logits_1<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                                               weight_1<span class="token punctuation">)</span><span class="token keyword">assert</span> <span class="token punctuation">(</span>weighted_guessed_labels_1 <span class="token operator">==</span> weighted_guessed_labels_2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>l_loss_1<span class="token punctuation">,</span> u_loss_1<span class="token punctuation">,</span> consistency_loss_1 <span class="token operator">=</span> self<span class="token punctuation">.</span>single_unsupervised_loss<span class="token punctuation">(</span>self<span class="token punctuation">.</span>model<span class="token punctuation">,</span> mis_logits_1<span class="token punctuation">,</span>                                                                       mis_inputs_1<span class="token punctuation">,</span> all_c_inputs_1<span class="token punctuation">,</span>                                                                       all_c_labels_1<span class="token punctuation">,</span>                                                                       weighted_guessed_labels_1<span class="token punctuation">)</span>l_loss_2<span class="token punctuation">,</span> u_loss_2<span class="token punctuation">,</span> consistency_loss_2 <span class="token operator">=</span> self<span class="token punctuation">.</span>single_unsupervised_loss<span class="token punctuation">(</span>self<span class="token punctuation">.</span>model2<span class="token punctuation">,</span> mis_logits_2<span class="token punctuation">,</span>                                                                       mis_inputs_2<span class="token punctuation">,</span> all_c_inputs_2<span class="token punctuation">,</span>                                                                       all_c_labels_2<span class="token punctuation">,</span>                                                                       weighted_guessed_labels_2<span class="token punctuation">)</span><span class="token keyword">if</span> exchange<span class="token punctuation">:</span>    weight_1<span class="token punctuation">,</span> weight_2 <span class="token operator">=</span> weight_2<span class="token punctuation">,</span> weight_1w_loss_1<span class="token punctuation">,</span> eps_loss_1 <span class="token operator">=</span> self<span class="token punctuation">.</span>lambda_weight_loss<span class="token punctuation">(</span>logits_1<span class="token punctuation">,</span> labels<span class="token punctuation">,</span> eps_1<span class="token punctuation">,</span> weight_1<span class="token punctuation">,</span>                                               weighted_guessed_labels_1<span class="token punctuation">)</span>w_loss_2<span class="token punctuation">,</span> eps_loss_2 <span class="token operator">=</span> self<span class="token punctuation">.</span>lambda_weight_loss<span class="token punctuation">(</span>logits_2<span class="token punctuation">,</span> labels<span class="token punctuation">,</span> eps_2<span class="token punctuation">,</span> weight_2<span class="token punctuation">,</span>                                               weighted_guessed_labels_2<span class="token punctuation">)</span>un_loss_1 <span class="token operator">=</span> l_loss_1 <span class="token operator">+</span> self<span class="token punctuation">.</span>config<span class="token punctuation">.</span>ce_factor <span class="token operator">*</span> u_loss_1 <span class="token operator">+</span> self<span class="token punctuation">.</span>config<span class="token punctuation">.</span>consistency_factor <span class="token operator">*</span> consistency_loss_1un_loss_2 <span class="token operator">=</span> l_loss_2 <span class="token operator">+</span> self<span class="token punctuation">.</span>config<span class="token punctuation">.</span>ce_factor <span class="token operator">*</span> u_loss_2 <span class="token operator">+</span> self<span class="token punctuation">.</span>config<span class="token punctuation">.</span>consistency_factor <span class="token operator">*</span> consistency_loss_2loss_1 <span class="token operator">=</span> <span class="token punctuation">(</span>w_loss_1 <span class="token operator">+</span> eps_loss_1<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">.</span> <span class="token operator">+</span> un_loss_1loss_2 <span class="token operator">=</span> <span class="token punctuation">(</span>w_loss_2 <span class="token operator">+</span> eps_loss_2<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">.</span> <span class="token operator">+</span> un_loss_2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="bug-1ï¼šRuntimeError-cannot-sample-n-sample-lt-0-samples"><a href="#bug-1ï¼šRuntimeError-cannot-sample-n-sample-lt-0-samples" class="headerlink" title="bug 1ï¼šRuntimeError: cannot sample n_sample &lt;= 0 samples"></a>bug 1ï¼šRuntimeError: cannot sample n_sample &lt;= 0 samples</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:  File <span class="token string">"/home/weitaotang/.conda/envs/multimodal/lib/python3.7/site-packages/hydra/_internal/utils.py"</span>, line <span class="token number">347</span>, <span class="token keyword">in</span> _run_hydra    lambda: hydra.run<span class="token punctuation">(</span>  File <span class="token string">"/home/weitaotang/.conda/envs/multimodal/lib/python3.7/site-packages/hydra/_internal/utils.py"</span>, line <span class="token number">201</span>, <span class="token keyword">in</span> run_and_report    raise ex  File <span class="token string">"/home/weitaotang/.conda/envs/multimodal/lib/python3.7/site-packages/hydra/_internal/utils.py"</span>, line <span class="token number">198</span>, <span class="token keyword">in</span> run_and_report    <span class="token builtin class-name">return</span> func<span class="token punctuation">(</span><span class="token punctuation">)</span>  File <span class="token string">"/home/weitaotang/.conda/envs/multimodal/lib/python3.7/site-packages/hydra/_internal/utils.py"</span>, line <span class="token number">350</span>, <span class="token keyword">in</span> <span class="token operator">&lt;</span>lambda<span class="token operator">></span>    <span class="token assign-left variable">overrides</span><span class="token operator">=</span>args.overrides,  File <span class="token string">"/home/weitaotang/.conda/envs/multimodal/lib/python3.7/site-packages/hydra/_internal/hydra.py"</span>, line <span class="token number">112</span>, <span class="token keyword">in</span> run    <span class="token assign-left variable">configure_logging</span><span class="token operator">=</span>with_log_configuration,  File <span class="token string">"/home/weitaotang/.conda/envs/multimodal/lib/python3.7/site-packages/hydra/core/utils.py"</span>, line <span class="token number">128</span>, <span class="token keyword">in</span> run_job    ret.return_value <span class="token operator">=</span> task_function<span class="token punctuation">(</span>task_cfg<span class="token punctuation">)</span>  File <span class="token string">"srcs/entry_points/reuters_ieg_dividemix_train.py"</span>, line <span class="token number">145</span>, <span class="token keyword">in</span> main    res <span class="token operator">=</span> trainer.train<span class="token punctuation">(</span><span class="token punctuation">)</span>  File <span class="token string">"/home/weitaotang/multimodal/hydra_templates/srcs/trainer/base.py"</span>, line <span class="token number">99</span>, <span class="token keyword">in</span> train    result <span class="token operator">=</span> self._train_epoch<span class="token punctuation">(</span>epoch<span class="token punctuation">)</span>  File <span class="token string">"/home/weitaotang/multimodal/hydra_templates/srcs/trainer/reuters_ieg_dividemix_trainer.py"</span>, line <span class="token number">197</span>, <span class="token keyword">in</span> _train_epoch    weighted_guessed_labels_1<span class="token punctuation">)</span>  File <span class="token string">"/home/weitaotang/multimodal/hydra_templates/srcs/trainer/reuters_ieg_dividemix_trainer.py"</span>, line <span class="token number">338</span>, <span class="token keyword">in</span> single_unsupervised_loss    idx <span class="token operator">=</span> m.sample<span class="token variable"><span class="token punctuation">((</span>mis_logits.size<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">))</span></span>  File <span class="token string">"/home/weitaotang/.conda/envs/multimodal/lib/python3.7/site-packages/torch/distributions/categorical.py"</span>, line <span class="token number">107</span>, <span class="token keyword">in</span> sample    samples_2d <span class="token operator">=</span> torch.multinomial<span class="token punctuation">(</span>probs_2d, sample_shape.numel<span class="token punctuation">(</span><span class="token punctuation">)</span>, True<span class="token punctuation">)</span>.TRuntimeError: cannot sample n_sample <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">0</span> samples<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">HYDRA_FULL_ERROR</span><span class="token operator">=</span><span class="token number">1</span> python srcs/entry_points/reuters_ieg_dividemix_train.py <span class="token assign-left variable">status</span><span class="token operator">=</span>debug <span class="token assign-left variable">re_split_ratio</span><span class="token operator">=</span><span class="token number">1.0</span> <span class="token assign-left variable">mis_threshold</span><span class="token operator">=</span><span class="token number">0.2</span> <span class="token assign-left variable">learning_rate</span><span class="token operator">=</span><span class="token number">0.005</span> <span class="token assign-left variable">ce_factor</span><span class="token operator">=</span><span class="token number">9</span> <span class="token assign-left variable">meta_momentum</span><span class="token operator">=</span><span class="token number">0.9</span> <span class="token assign-left variable">meta_lr</span><span class="token operator">=</span><span class="token number">0.001</span> exchange_weigh<span class="token assign-left variable">ts</span><span class="token operator">=</span>True <span class="token assign-left variable">noise_rate</span><span class="token operator">=</span><span class="token number">0.4</span> <span class="token assign-left variable">val_type</span><span class="token operator">=</span>clean <span class="token assign-left variable">use_penalty</span><span class="token operator">=</span>True trainer.save_ckpt<span class="token operator">=</span>False trainer.epochs<span class="token operator">=</span><span class="token number">25</span> trainer.test_on_best<span class="token operator">=</span>True <span class="token assign-left variable">n_splits</span><span class="token operator">=</span><span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æŸ¥çœ‹å‘ç°æ˜¯å› ä¸º <strong><code>mis_threshold</code>å¤ªå°ï¼Œå¯¼è‡´åˆ†ä½ç‚¹æ°å¥½æ˜¯æœ€å°å€¼</strong>ï¼Œå› æ­¤æ˜¯ä¸å­˜åœ¨æ¯”ä»–å°çš„idxï¼Œä¹Ÿå°±å¯¼è‡´äº†<code>mis_logits</code>ä¸ºempty tensorã€‚å¯¼è‡´<code>sample_shape.numel()=0</code></p><p>ä¸€ä¸ªå¯ä»¥è€ƒè™‘çš„æ–¹æ³•ï¼šæ‹¿ä¸åˆ°<code>idx</code>æ—¶å–ç­‰</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">_get_mis_c</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> weights<span class="token punctuation">,</span> hard_weight<span class="token punctuation">,</span> logits<span class="token punctuation">,</span> inputs<span class="token punctuation">,</span> meta_inputs<span class="token punctuation">,</span> meta_clean_labels<span class="token punctuation">,</span> labels<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> self<span class="token punctuation">.</span>config<span class="token punctuation">.</span>mis_method <span class="token operator">==</span> <span class="token string">"hard_weights"</span> <span class="token keyword">or</span> self<span class="token punctuation">.</span>config<span class="token punctuation">.</span>mis_threshold <span class="token operator">>=</span> <span class="token number">1.0</span><span class="token punctuation">:</span>        mis_idx <span class="token operator">=</span> hard_weight <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>config<span class="token punctuation">.</span>mis_threshold        <span class="token keyword">if</span> mis_idx<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span> <span class="token comment"># æ‹¿ä¸åˆ°idxæ—¶å–ç­‰</span>            mis_idx <span class="token operator">=</span> hard_weight <span class="token operator">&lt;=</span> self<span class="token punctuation">.</span>config<span class="token punctuation">.</span>mis_threshold    <span class="token keyword">elif</span> self<span class="token punctuation">.</span>config<span class="token punctuation">.</span>mis_method <span class="token operator">==</span> <span class="token string">"quantile"</span><span class="token punctuation">:</span>        mis_idx <span class="token operator">=</span> weights <span class="token operator">&lt;</span> torch<span class="token punctuation">.</span>quantile<span class="token punctuation">(</span>weights<span class="token punctuation">,</span> self<span class="token punctuation">.</span>config<span class="token punctuation">.</span>mis_threshold<span class="token punctuation">)</span>        <span class="token keyword">if</span> mis_idx<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            mis_idx <span class="token operator">=</span> weights <span class="token operator">&lt;=</span> torch<span class="token punctuation">.</span>quantile<span class="token punctuation">(</span>weights<span class="token punctuation">,</span> self<span class="token punctuation">.</span>config<span class="token punctuation">.</span>mis_threshold<span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Invalid mislabeled samples judgment method:</span><span class="token interpolation"><span class="token punctuation">&#123;</span>self<span class="token punctuation">.</span>config<span class="token punctuation">.</span>mis_method<span class="token punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å…³äºexchange-weightsçš„ä¸€äº›æ€è€ƒ"><a href="#å…³äºexchange-weightsçš„ä¸€äº›æ€è€ƒ" class="headerlink" title="å…³äºexchange weightsçš„ä¸€äº›æ€è€ƒ"></a>å…³äºexchange weightsçš„ä¸€äº›æ€è€ƒ</h2><p>å…¶å®<strong>å•çº¯exchange weightsæˆ–è€…exchange weights + epsæ„ä¹‰ä¸å¤§</strong>ï¼š</p><ol><li>weightsç”±äºä½¿ç”¨äº†weights co-guessing labelsï¼Œå› æ­¤å…¶å®äº¤æ¢å‰åçœŸæ­£å—å½±å“å°±æ˜¯è®¡ç®—weight lossçš„éƒ¨åˆ†ï¼Œç„¶è€Œè¿™éƒ¨åˆ†æ˜¾ç„¶è¿˜æ˜¯ä¸è¦äº¤æ¢ä¼šæ›´ç¨³å®š</li><li>epséƒ¨åˆ†ï¼ŒåŒç†å—å½±å“çš„åªæœ‰eps losséƒ¨åˆ†ï¼Œè¿™éƒ¨åˆ†åŒæ ·è¿˜æ˜¯ä¸è¦äº¤æ¢ä¼šæ›´åŠ ç¨³å®š</li></ol><h1 id="æ¯ä¸ªbatchéƒ½è¿›è¡Œhard-weightsæˆ–è€…weights-sum-to-1å…¶å®ä¸æ˜¯éå¸¸åˆç†"><a href="#æ¯ä¸ªbatchéƒ½è¿›è¡Œhard-weightsæˆ–è€…weights-sum-to-1å…¶å®ä¸æ˜¯éå¸¸åˆç†" class="headerlink" title="æ¯ä¸ªbatchéƒ½è¿›è¡Œhard weightsæˆ–è€…weights sum to 1å…¶å®ä¸æ˜¯éå¸¸åˆç†"></a>æ¯ä¸ªbatchéƒ½è¿›è¡Œhard weightsæˆ–è€…weights sum to 1å…¶å®ä¸æ˜¯éå¸¸åˆç†</h1><p>å¼ºè¡ŒæŠŠæ•´ä¸ª<code>weights</code> normalizedåˆ°<code>[0, 1]</code>åŒºé—´å…¶å®ä¸åˆç†ï¼Œç„¶åå†æŒ‰ç…§ä¸€å®šçš„å€¼è¿›è¡Œæˆªå–ï¼ˆhard cutï¼‰ï¼Œä¼šå¯¼è‡´ä¸€å®šä¼šæœ‰é‚£ä¹ˆå¤šæ•°é‡çš„æ ·æœ¬è®¤ä¸ºæ˜¯cleanï¼Œä½†æ˜¯å®é™…ä¸Šæ˜¯å­˜åœ¨è¯´æ•´ä¸ªbatchéƒ½æ˜¯noisy samplesçš„æƒ…å†µã€‚</p><p>åŒç†æŠŠweights sum to 1ï¼Œåªæ˜¯ç¨å¾®å¥½ç‚¹ï¼Œæ¯”å¦‚å…¨éƒ¨çš„samplesçš„æƒé‡éƒ½æ¯”è¾ƒå°ï¼Œæ­¤æ—¶å¼ºè¡Œè®©å…¶sum to 1ï¼Œå°±ä¼šä½¿å¾—æœ‰ä¸€éƒ¨åˆ†çš„weightç›¸å¯¹äºåŸæ¥æœ‰æ‰€å¢åŠ ã€‚</p><p>å¯èƒ½æ¯”è¾ƒå¥½çš„åšæ³•æ˜¯æŠŠæ‰€æœ‰weightséƒ½æ”¶é›†èµ·æ¥ä¹‹åå†è¿›è¡Œnormalizedã€‚ç„¶è€Œè¿™ç§åšæ³•ä¸ç°å®ï¼Œå› ä¸ºè¿™æ ·ç­‰ä»·äºè¦å…¨éƒ¨éƒ½è¿‡ä¸€éå­˜ä¸‹æ¥ï¼Œç„¶åå†forwardä¸€éï¼Œæ— å½¢ä¸­ç­‰ä»·äºå¤šäº†ä¸€æ¬¡forwardçš„è¿‡ç¨‹ï¼Œæ—¶é—´å¤ªé•¿</p><h2 id="20210208-updateï¼ˆå¾…å®éªŒï¼‰"><a href="#20210208-updateï¼ˆå¾…å®éªŒï¼‰" class="headerlink" title="20210208 updateï¼ˆå¾…å®éªŒï¼‰"></a>20210208 updateï¼ˆå¾…å®éªŒï¼‰</h2><blockquote><p>æ‰€æœ‰weightséƒ½æ”¶é›†èµ·æ¥ä¹‹åå†è¿›è¡Œnormalized</p></blockquote><p>å¯¹äºä¸Šè¿°è¿™ç§åšæ³•ï¼Œ<code>step-based</code>çš„æ›´æ–°ä¸æ˜¯å¾ˆå¥½ï¼Œ<strong>è¿˜æ˜¯è¦ç”¨<code>epoch-based</code>çš„æ–¹æ³•æ¥å®éªŒ</strong></p><h1 id="Hydraå¤ç°"><a href="#Hydraå¤ç°" class="headerlink" title="Hydraå¤ç°"></a>Hydraå¤ç°</h1><p>åœ¨ä»£ç ä¸å˜çš„æƒ…å†µä¸‹ï¼Œ<strong>ç›´æ¥è½½å…¥configæ–‡ä»¶ï¼Œæ‰èƒ½ä¿è¯ä¸€è‡´</strong></p><p>æ¯”å¦‚ä¸‹é¢è¿™ç§æ–¹å¼ï¼Œç›´æ¥è½½å…¥ä¿å­˜çš„configæ–‡ä»¶ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token decorator annotation punctuation">@hydra<span class="token punctuation">.</span>main</span><span class="token punctuation">(</span>    config_path<span class="token operator">=</span><span class="token string">'/home/weitaotang/multimodal/pytorch_hydra_results_temp/multirun/2021-02-01/01-00-04-dividemix_tuning_sym0.6_rerun/26_reuters-balance-symmetric_0.6-dividemix-optuna-fusion_N_[0, 1]-SGD_lr0.02-clean_val'</span><span class="token punctuation">,</span>    config_name<span class="token operator">=</span><span class="token string">'config'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>åŸæ¥çš„å®éªŒï¼š</p><p><img src="/2021/01/12/experiments-record/image-20210201114803059.png" alt="image-20210201114803059"></p><p>å¤ç°çš„å®éªŒç»“æœï¼š</p><p><img src="/2021/01/12/experiments-record/image-20210201114823154.png" alt="image-20210201114823154"></p><p>ä½†æ˜¯ç¼ºç‚¹å°±æ˜¯è¿˜è¦å•ç‹¬å®šåˆ¶è¾“å‡ºçš„æ–‡ä»¶å¤¹ï¼Œå¦åˆ™ä¼šå¾ˆéš¾çœ‹ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªå®éªŒå°±æ˜¯ä¼šç›´æ¥ä¿å­˜åˆ°å½“å‰ç›®å½•çš„<code>outputs</code>ä¸‹é¢</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span><span class="token number">2021</span>-02-01 <span class="token number">11</span>:39:25,075<span class="token punctuation">]</span><span class="token punctuation">[</span>base-trainer<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> - Exp: reuters-balance-symmetric_0.6-dividemix-optuna-fusion_N_<span class="token punctuation">[</span><span class="token number">0</span>, <span class="token number">1</span><span class="token punctuation">]</span>-SGD_lr0.02-clean_val<span class="token punctuation">[</span><span class="token number">2021</span>-02-01 <span class="token number">11</span>:39:25,115<span class="token punctuation">]</span><span class="token punctuation">[</span>base-trainer<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> -           loss unlabeled_loss_2  accuracy unlabeled_loss_1   loss_2 label_loss_2 duration    loss_2   entropy h_score label_loss_1  loss    loss_1         train            train     valid            train    valid        train    train     train     valid   train        train valid     valid     trainepoch-25   NaN         <span class="token number">0.005178</span>  <span class="token number">0.542002</span>         <span class="token number">0.005377</span>  <span class="token number">1.43616</span>     <span class="token number">0.751425</span>  <span class="token number">28</span>.738s  <span class="token number">0.979027</span>  <span class="token number">0.949788</span>     NaN     <span class="token number">0.784438</span>   NaN  <span class="token number">1.546014</span>  <span class="token number">1.011149</span><span class="token punctuation">[</span><span class="token number">2021</span>-02-01 <span class="token number">11</span>:39:25,119<span class="token punctuation">]</span><span class="token punctuation">[</span>base-trainer<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> - <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">2021</span>-02-01 <span class="token number">11</span>:39:25,119<span class="token punctuation">]</span><span class="token punctuation">[</span>base-trainer<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> - Best val epoch on run <span class="token number">1</span>:14, <span class="token builtin class-name">test</span> accuracy: <span class="token number">0.6448</span><span class="token punctuation">[</span><span class="token number">2021</span>-02-01 <span class="token number">11</span>:39:25,119<span class="token punctuation">]</span><span class="token punctuation">[</span>base-trainer<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> - <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">2021</span>-02-01 <span class="token number">11</span>:39:25,814<span class="token punctuation">]</span><span class="token punctuation">[</span>train<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> - <span class="token number">2</span> runs avg accuracy: <span class="token number">0.6198</span>/0.0250. Each run <span class="token builtin class-name">test</span> accuracy:<span class="token punctuation">[</span><span class="token string">'0.5948'</span>, <span class="token string">'0.6448'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2021</span>-02-01 <span class="token number">11</span>:39:25,815<span class="token punctuation">]</span><span class="token punctuation">[</span>train<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> - Save at /home/weitaotang/multimodal/hydra_templates/outputs/2021-02-01/10-59-35<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœ<strong>ç›´æ¥ä½¿ç”¨è¶…å‚ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„</strong>ï¼Œä¸è¿‡å°±æ˜¯è¦å•ç‹¬é…ç½®å‚æ•°ï¼Œç¨å¾®æœ‰ç‚¹éº»çƒ¦</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">HYDRA_FULL_ERROR</span><span class="token operator">=</span><span class="token number">1</span> python srcs/entry_points/reuters_dividemix_train.py <span class="token assign-left variable">status</span><span class="token operator">=</span>train   <span class="token assign-left variable">warm_up_epochs</span><span class="token operator">=</span><span class="token number">8</span> <span class="token assign-left variable">p_threshold</span><span class="token operator">=</span><span class="token number">0.6000000000000001</span> <span class="token assign-left variable">alpha</span><span class="token operator">=</span><span class="token number">4</span> <span class="token assign-left variable">lambda_u</span><span class="token operator">=</span><span class="token number">30</span> <span class="token assign-left variable">weight_decay</span><span class="token operator">=</span>1e-05 <span class="token assign-left variable">learning_rate</span><span class="token operator">=</span><span class="token number">0.02</span> <span class="token assign-left variable">fusion</span><span class="token operator">=</span>sum <span class="token assign-left variable">rank</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">noise_rate</span><span class="token operator">=</span><span class="token number">0.6</span> <span class="token assign-left variable">val_type</span><span class="token operator">=</span>clean trainer.save_ckpt<span class="token operator">=</span>False trainer.epochs<span class="token operator">=</span><span class="token number">25</span> trainer.test_on_best<span class="token operator">=</span>True <span class="token assign-left variable">notes</span><span class="token operator">=</span>dividemix_tuning_sym0.6_rerun <span class="token assign-left variable">n_splits</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">model</span><span class="token operator">=</span>reuters_fusion_N<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2021/01/12/experiments-record/image-20210201120439696.png" alt="image-20210201120439696"></p><p><code>/home/weitaotang/multimodal/pytorch_hydra_results_temp/train/2021-02-01/12-09-21-dividemix_tuning_sym0.6_rerun/config.yaml</code></p><p><img src="/2021/01/12/experiments-record/image-20210201123821296.png" alt="image-20210201123821296"></p><h1 id="Profiling-IEG-Train"><a href="#Profiling-IEG-Train" class="headerlink" title="Profiling IEG Train"></a>Profiling IEG Train</h1><p>å‘½ä»¤ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">HYDRA_FULL_ERROR<span class="token operator">=</span><span class="token number">1</span> python srcs<span class="token operator">/</span>entry_points<span class="token operator">/</span>profile_entries<span class="token operator">/</span>profiling_reuters_ieg_train<span class="token punctuation">.</span>py model<span class="token operator">=</span>reuters_meta_fusion_N  notes<span class="token operator">=</span><span class="token string">"test_fast_dl"</span> trainer<span class="token punctuation">.</span>epochs<span class="token operator">=</span><span class="token number">1</span> trainer<span class="token punctuation">.</span>save_ckpt<span class="token operator">=</span>false trainer<span class="token punctuation">.</span>test_on_best<span class="token operator">=</span>true balance<span class="token operator">=</span>balance noise_rate<span class="token operator">=</span><span class="token number">0.4</span> n_splits<span class="token operator">=</span><span class="token number">1</span> data<span class="token operator">=</span>reuters_all_cv_ieg_dividemix_train<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªå¤§å¤´å§‹ç»ˆæ˜¯åˆ›å»ºmeta modelè¿™å—</p><p><img src="/2021/01/12/experiments-record/image-20210206152330584.png" alt="image-20210206152330584"></p><h1 id="reutersç›´æ¥ä¸Šall-cudaä¹Ÿæ˜¯ä¸å¤ªåˆé€‚çš„"><a href="#reutersç›´æ¥ä¸Šall-cudaä¹Ÿæ˜¯ä¸å¤ªåˆé€‚çš„" class="headerlink" title="reutersç›´æ¥ä¸Šall cudaä¹Ÿæ˜¯ä¸å¤ªåˆé€‚çš„"></a>reutersç›´æ¥ä¸Šall cudaä¹Ÿæ˜¯ä¸å¤ªåˆé€‚çš„</h1><p><img src="/2021/01/12/experiments-record/image-20210207105435887.png" alt="image-20210207105435887"></p><p>ä¾ç„¶çˆ†æ˜¾å­˜</p><h1 id="xrmbå’Œreuters-ä¸‰ç§DataLoaderçš„å¯¹æ¯”"><a href="#xrmbå’Œreuters-ä¸‰ç§DataLoaderçš„å¯¹æ¯”" class="headerlink" title="xrmbå’Œreuters ä¸‰ç§DataLoaderçš„å¯¹æ¯”"></a>xrmbå’Œreuters ä¸‰ç§<code>DataLoader</code>çš„å¯¹æ¯”</h1><p>reuters</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Initialized train Reuterstrain dataset with <span class="token number">15006</span> samplesOriginal fast dataloader finish with:15.5962 secondPrefetcher BackgroundGenerator + fast dataloader finish with:16.0180 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/1 with:3.7941 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/2 with:3.8048 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/3 with:3.7636 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/4 with:3.8045 secondDataPrefetcher + fast dataloader finish with:15.5066 secondInitialized train Reuterstrain dataset with <span class="token number">15006</span> samplesOriginal fast dataloader finish with:15.3795 secondPrefetcher BackgroundGenerator + fast dataloader finish with:15.3820 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/1 with:3.6750 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/2 with:3.6984 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/3 with:3.6271 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/4 with:3.7781 secondDataPrefetcher + fast dataloader finish with:15.1373 secondInitialized train Reuterstrain dataset with <span class="token number">15006</span> samplesOriginal fast dataloader finish with:15.2086 secondPrefetcher BackgroundGenerator + fast dataloader finish with:15.8317 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/1 with:3.7164 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/2 with:3.7532 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/3 with:3.7519 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/4 with:3.8027 secondDataPrefetcher + fast dataloader finish with:15.3566 secondInitialized train Reuterstrain dataset with <span class="token number">15007</span> samplesOriginal fast dataloader finish with:15.3415 secondPrefetcher BackgroundGenerator + fast dataloader finish with:15.7691 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/1 with:3.9011 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/2 with:3.8108 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/3 with:3.8389 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/4 with:3.7030 secondDataPrefetcher + fast dataloader finish with:15.6202 secondInitialized train Reuterstrain dataset with <span class="token number">15007</span> samplesOriginal fast dataloader finish with:15.4841 secondPrefetcher BackgroundGenerator + fast dataloader finish with:15.9197 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/1 with:3.7280 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/2 with:3.7924 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/3 with:3.7113 secondDataPrefetcher + fast dataloader finish <span class="token number">59</span> its/4 with:3.8488 secondDataPrefetcher + fast dataloader finish with:15.4055 second<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>xrmb</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">DataPrefetcher + fast dataloader finish <span class="token number">644</span> its/19 with:0.2231 second                                                                                                                               <span class="token punctuation">[</span><span class="token number">23</span>/9811<span class="token punctuation">]</span>DataPrefetcher + fast dataloader finish with:4.0225 secondtrain dataset with <span class="token number">329312</span> samplesOriginal fast dataloader finish with:2.4979 secondPrefetcher BackgroundGenerator + fast dataloader finish with:2.5478 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/1 with:0.2043 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/2 with:0.2065 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/3 with:0.2066 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/4 with:0.2056 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/5 with:0.2080 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/6 with:0.2032 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/7 with:0.2027 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/8 with:0.2055 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/9 with:0.2063 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/10 with:0.2052 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/11 with:0.2046 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/12 with:0.2053 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/13 with:0.2062 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/14 with:0.2065 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/15 with:0.2088 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/16 with:0.2072 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/17 with:0.2063 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/18 with:0.2057 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/19 with:0.2051 secondDataPrefetcher + fast dataloader finish with:3.9212 secondtrain dataset with <span class="token number">329312</span> samplesOriginal fast dataloader finish with:2.5407 secondPrefetcher BackgroundGenerator + fast dataloader finish with:2.5722 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/1 with:0.2071 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/2 with:0.2055 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/3 with:0.2021 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/4 with:0.2035 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/5 with:0.2055 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/6 with:0.2061 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/7 with:0.2042 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/8 with:0.2052 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/9 with:0.2064 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/10 with:0.2053 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/11 with:0.2057 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/12 with:0.2070 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/13 with:0.2101 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/14 with:0.2064 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/15 with:0.2057 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/16 with:0.2052 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/17 with:0.2044 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/18 with:0.2038 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/19 with:0.2065 secondDataPrefetcher + fast dataloader finish with:3.9167 secondtrain dataset with <span class="token number">329312</span> samplesOriginal fast dataloader finish with:2.5503 secondPrefetcher BackgroundGenerator + fast dataloader finish with:2.6478 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/1 with:0.2074 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/2 with:0.2052 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/3 with:0.2072 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/4 with:0.2066 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/5 with:0.2058 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/6 with:0.2084 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/7 with:0.2064 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/8 with:0.2050 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/9 with:0.2063 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/10 with:0.2062 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/11 with:0.2052 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/12 with:0.2042 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/13 with:0.2054 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/14 with:0.2045 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/15 with:0.2064 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/16 with:0.2043 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/17 with:0.2052 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/18 with:0.2068 secondDataPrefetcher + fast dataloader finish <span class="token number">644</span> its/19 with:0.2051 secondDataPrefetcher + fast dataloader finish with:3.9231 second<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°<code>DataPrefecther</code>å¹¶æ²¡æœ‰æ˜æ˜¾çš„ä¼˜åŠ¿ï¼Œ<strong>ç”šè‡³è¯´<code>fast dataloader</code>å·²ç»æ˜¯æœ€ä¼˜äº†</strong></p><p>å®æµ‹ä¹Ÿçš„ç¡®ä¸å¤ªå¥½</p><p><code>fast dataloader</code></p><p><img src="/2021/01/12/experiments-record/image-20210207221701859.png" alt="image-20210207221701859"></p><p><code>DataPrefetcher</code></p><p><img src="/2021/01/12/experiments-record/image-20210207221737088.png" alt="image-20210207221737088"></p><p>ä¹Ÿè®¸è¦åœ¨<code>ravdness</code>è¿™ä¸€ç±»<code>audio visual</code>æ•°æ®é›†ä¸Šæ‰èƒ½ä½“ç°ä¼˜åŠ¿</p><h1 id="ä½¿ç”¨train-test-splitæˆ–è€…StratifyKFoldç­‰Stratify-splitæ—¶è¦æ³¨æ„å¦‚æœå‡ºç°æŸä¸ªç±»åˆ«æ ·æœ¬åªæœ‰ä¸€ä¸ªæƒ…å†µ"><a href="#ä½¿ç”¨train-test-splitæˆ–è€…StratifyKFoldç­‰Stratify-splitæ—¶è¦æ³¨æ„å¦‚æœå‡ºç°æŸä¸ªç±»åˆ«æ ·æœ¬åªæœ‰ä¸€ä¸ªæƒ…å†µ" class="headerlink" title="ä½¿ç”¨train_test_splitæˆ–è€…StratifyKFoldç­‰Stratify splitæ—¶è¦æ³¨æ„å¦‚æœå‡ºç°æŸä¸ªç±»åˆ«æ ·æœ¬åªæœ‰ä¸€ä¸ªæƒ…å†µ"></a>ä½¿ç”¨<code>train_test_split</code>æˆ–è€…<code>StratifyKFold</code>ç­‰Stratify splitæ—¶è¦æ³¨æ„å¦‚æœå‡ºç°æŸä¸ªç±»åˆ«æ ·æœ¬åªæœ‰ä¸€ä¸ªæƒ…å†µ</h1><p>å³å¦‚ä¸‹çš„é”™è¯¯ï¼š</p><p><img src="/2021/01/12/experiments-record/image-20210211222419292.png" alt="image-20210211222419292"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ValueError: The least populated class <span class="token keyword">in</span> y has only <span class="token number">1</span> member, <span class="token function">which</span> is too few. The minimum number of <span class="token function">groups</span> <span class="token keyword">for</span> any class cannot be <span class="token function">less</span> than <span class="token number">2</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¾ˆå®¹æ˜“å¿½ç•¥çš„ä¸€ä¸ªæƒ…å†µï¼Œå¯ä»¥ç”¨å¦‚ä¸‹çš„å¼‚å¸¸æ•æ‰å¤„ç†</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">if</span> stratify<span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        stratify <span class="token operator">=</span> self<span class="token punctuation">.</span>raw_obj<span class="token punctuation">.</span>labels<span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>self<span class="token punctuation">.</span>indices<span class="token punctuation">]</span>        train_idx<span class="token punctuation">,</span> valid_idx <span class="token operator">=</span> train_test_split<span class="token punctuation">(</span>idx_full<span class="token punctuation">,</span> test_size<span class="token operator">=</span>validation_split<span class="token punctuation">,</span> stratify<span class="token operator">=</span>stratify<span class="token punctuation">)</span>    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>        traceback<span class="token punctuation">.</span>print_exc<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token operator">=</span>sys<span class="token punctuation">.</span>stdout<span class="token punctuation">)</span>        logger<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Stratify splits failed due to \"</span><span class="token interpolation"><span class="token punctuation">&#123;</span>e<span class="token punctuation">&#125;</span></span><span class="token string">\".\nreturn to random splits"</span></span><span class="token punctuation">)</span>        np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>shuffle<span class="token punctuation">(</span>idx_full<span class="token punctuation">)</span>        valid_idx <span class="token operator">=</span> idx_full<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span>len_valid<span class="token punctuation">]</span>        train_idx <span class="token operator">=</span> np<span class="token punctuation">.</span>delete<span class="token punctuation">(</span>idx_full<span class="token punctuation">,</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> len_valid<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>    np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>shuffle<span class="token punctuation">(</span>idx_full<span class="token punctuation">)</span>    valid_idx <span class="token operator">=</span> idx_full<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span>len_valid<span class="token punctuation">]</span>    train_idx <span class="token operator">=</span> np<span class="token punctuation">.</span>delete<span class="token punctuation">(</span>idx_full<span class="token punctuation">,</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> len_valid<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å¯¹äºravdessæ¥è¯´prefetcheræœ‰ç”¨"><a href="#å¯¹äºravdessæ¥è¯´prefetcheræœ‰ç”¨" class="headerlink" title="å¯¹äºravdessæ¥è¯´prefetcheræœ‰ç”¨"></a>å¯¹äºravdessæ¥è¯´prefetcheræœ‰ç”¨</h1><p>ä¸€ä¸ªaugmentationï¼š</p><p><img src="/2021/01/12/experiments-record/image-20210211224802970.png" alt="image-20210211224802970"></p><p>ä¸¤ä¸ªaugmentationï¼š</p><p><img src="/2021/01/12/experiments-record/image-20210211224825039.png" alt="image-20210211224825039"></p><p>å¯ä»¥çœ‹åˆ°éƒ½ç¼©çŸ­äº†ä¸å°‘</p><h1 id="submitit-core-utils-UncompletedJobErrorè§£å†³"><a href="#submitit-core-utils-UncompletedJobErrorè§£å†³" class="headerlink" title="submitit.core.utils.UncompletedJobErrorè§£å†³"></a><code>submitit.core.utils.UncompletedJobError</code>è§£å†³</h1><p><img src="/2021/01/12/experiments-record/image-20210212142015518.png" alt="image-20210212142015518"></p><p>é˜…è¯»æºç å‘ç°å¤§æ¦‚ç‡æ˜¯ä¿å­˜çš„æ—¶é—´è¶…æ—¶äº†ï¼Œå› ä¸ºä¹‹åç›´æ¥åœ¨ipython loadè¿›æ¥æ˜¯æ²¡é—®é¢˜çš„ï¼š</p><p><img src="/2021/01/12/experiments-record/image-20210212141921632.png" alt="image-20210212141921632"></p><p><img src="/2021/01/12/experiments-record/image-20210212142142021.png" alt="image-20210212142142021"></p><p>è§£å†³æ–¹æ³•åªèƒ½æ‰‹åŠ¨æŠŠè¿™ä¸ªé˜ˆå€¼æé«˜ï¼Œä»åŸæ¥çš„15å˜ä¸º60</p><p><img src="/2021/01/12/experiments-record/image-20210212142318057.png" alt="image-20210212142318057"></p><p>å¦‚æœæœ¬æ¬¡ä»»åŠ¡æ˜¯optuna tuningï¼Œå¯ä»¥ç›´æ¥ç”¨ä¼šä¸Šä¸€æ¬¡çš„studyï¼ŒåŸºæœ¬ä¸Šèƒ½å¤Ÿä¿è¯å‡ºæ¥çš„å‚æ•°æ˜¯ä¸Šä¸€æ¬¡æœªå®Œæˆçš„å®éªŒ</p><p><img src="/2021/01/12/experiments-record/image-20210212142615203.png" alt="image-20210212142615203"></p><p><img src="/2021/01/12/experiments-record/image-20210212142622931.png" alt="image-20210212142622931"></p><h1 id="ravdess-num-workerså°è¯•"><a href="#ravdess-num-workerså°è¯•" class="headerlink" title="ravdess num_workerså°è¯•"></a>ravdess <code>num_workers</code>å°è¯•</h1><p>ä»2-16éƒ½è¯•äº†ä¸€æ¬¡</p><p><img src="/2021/01/12/experiments-record/image-20210213202244223.png" alt="image-20210213202244223"></p><p><img src="/2021/01/12/experiments-record/image-20210213202342468.png" alt="image-20210213202342468"></p><p><img src="/2021/01/12/experiments-record/image-20210213202403449.png" alt="image-20210213202403449"></p><p>å¯ä»¥çœ‹åˆ°</p><ul><li>èƒ½å¤Ÿæ¯”åŸæ¥200s+æé€Ÿå¾ˆå¤šï¼Œçº¦4å€</li><li>åœ¨6-7çš„æ—¶å€™å°±å·®ä¸å¤šäº†</li><li>é»˜è®¤æœ€å¤§ä¸åº”è¯¥è¶…è¿‡6ï¼Œå› æ­¤è®¾ä¸º6å°±å¤Ÿäº†</li></ul><h1 id="ravdess-apexå°è¯•"><a href="#ravdess-apexå°è¯•" class="headerlink" title="ravdess apexå°è¯•"></a>ravdess apexå°è¯•</h1><ul><li>åœ¨iegä¸Šè¿›è¡Œå°è¯•</li><li>ç”±äºå®ç°é—®é¢˜ï¼Œ<strong>æš‚æ—¶æ— æ³•ä¼˜åŒ–meta optimizeéƒ¨åˆ†</strong>ï¼Œæ‰€ä»¥å®é™…ä¸Šæé€Ÿæ•ˆæœä¸æ˜¯éå¸¸æ˜æ˜¾ã€‚æ˜¾å­˜å ç”¨åªç¼©å°äº†ä¸€ç‚¹ç‚¹ï¼ˆ21000+ -&gt; 19000+ï¼‰</li></ul><p>è€—æ—¶å‡ ä¹æ²¡å˜åŒ–ï¼š</p><p>å¼€å¯AMPå‰ï¼š</p><p><img src="/2021/01/12/experiments-record/image-20210214173822726.png" alt="image-20210214173822726"></p><p>å¼€å¯AMPåï¼š</p><p><img src="/2021/01/12/experiments-record/image-20210214173851816.png" alt="image-20210214173851816"></p><h1 id="ravdess-ç›¸å…³è®ºæ–‡æ‰€ä½¿ç”¨æ¨¡å‹çš„è°ƒç ”"><a href="#ravdess-ç›¸å…³è®ºæ–‡æ‰€ä½¿ç”¨æ¨¡å‹çš„è°ƒç ”" class="headerlink" title="ravdess ç›¸å…³è®ºæ–‡æ‰€ä½¿ç”¨æ¨¡å‹çš„è°ƒç ”"></a>ravdess ç›¸å…³è®ºæ–‡æ‰€ä½¿ç”¨æ¨¡å‹çš„è°ƒç ”</h1><p><a href="https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&amp;arnumber=8644168">https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&amp;arnumber=8644168</a></p><p>audioï¼šä»…ä»…ä½¿ç”¨MFCC ç„¶åç›´æ¥ç”¨ä¸€ä¸ªLMTï¼Œæ²¡æœ‰ç”¨åˆ°visual feature</p><p><a href="https://www.mdpi.com/1424-8220/20/1/183">https://www.mdpi.com/1424-8220/20/1/183</a></p><p>åŒæ ·æ˜¯ä»…ä»…åªä½¿ç”¨audioçš„feature</p><blockquote><p>we evaluated our SER model on IEMOCAP and RAVDESS datasets using<br>spectrograms. The performance of the proposed CNN models compares with recent CNNs architectures<br>for SER using spectrograms.   </p></blockquote><p><img src="/2021/01/12/experiments-record/image-20210219162641512.png" alt="image-20210219162641512"></p><p>å¹¶ä¸”ä¹Ÿåœ¨å…¶ä¸­è¿›è¡Œäº†æ¯”è¾ƒï¼Œå¯ä»¥çœ‹åˆ°<strong>resnet50æ˜¯å¾ˆæ­£å¸¸</strong>çš„</p><p><a href="https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&amp;arnumber=8925444">https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&amp;arnumber=8925444</a></p><p>ç”¨LSTM multimodal</p><p><a href="https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&amp;arnumber=8682553">https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&amp;arnumber=8682553</a></p><p>ç±»ä¼¼transfer learning</p><h1 id="ravdessè®­ç»ƒå¤ªæ…¢ï¼šå¯èƒ½è§£å†³æ–¹æ³•ï¼štransfer-learningï¼Ÿ"><a href="#ravdessè®­ç»ƒå¤ªæ…¢ï¼šå¯èƒ½è§£å†³æ–¹æ³•ï¼štransfer-learningï¼Ÿ" class="headerlink" title="ravdessè®­ç»ƒå¤ªæ…¢ï¼šå¯èƒ½è§£å†³æ–¹æ³•ï¼štransfer learningï¼Ÿ"></a>ravdessè®­ç»ƒå¤ªæ…¢ï¼šå¯èƒ½è§£å†³æ–¹æ³•ï¼štransfer learningï¼Ÿ</h1><p>å‚è€ƒï¼š</p><p><a href="https://pytorch.org/tutorials/beginner/transfer_learning_tutorial.html#convnet-as-fixed-feature-extractor">https://pytorch.org/tutorials/beginner/transfer_learning_tutorial.html#convnet-as-fixed-feature-extractor</a> å®˜æ–¹çš„CNN transfer learningï¼Œ åªtrainæœ€åçš„FC layer</p><p><a href="https://www.kaggle.com/pmigdal/transfer-learning-with-resnet-50-in-pytorch">https://www.kaggle.com/pmigdal/transfer-learning-with-resnet-50-in-pytorch</a> åŒæ ·åªtrainæœ€åçš„FC layer</p><p><a href="https://balajikulkarni.medium.com/transfer-learning-using-resnet-e20598314427">https://balajikulkarni.medium.com/transfer-learning-using-resnet-e20598314427</a> æåˆ°äº†BNä¹Ÿè¦å˜æˆtrainableï¼Œå› ä¸ºBNæœ¬è´¨ä¸Šæ˜¯å’Œæ•°æ®é›†ç›¸å…³çš„ï¼Œå› æ­¤è¦è®©BNè¢«è®­ç»ƒ</p><p><a href="https://medium.com/@kenneth.ca95/a-guide-to-transfer-learning-with-keras-using-resnet50-a81a4a28084b">https://medium.com/@kenneth.ca95/a-guide-to-transfer-learning-with-keras-using-resnet50-a81a4a28084b</a> é™¤äº†FCï¼Œresnet50çš„æœ€åä¸€ä¸ªblockä¹Ÿæ˜¯trainableçš„</p><p><a href="https://keras.io/api/applications/">https://keras.io/api/applications/</a> keras å®˜æ–¹æ•™ç¨‹ã€‚é‡Œé¢å¯¹äºinceptionv3çš„ä½¿ç”¨ï¼šåŒæ ·æ˜¯æŠŠå‰é¢éƒ¨åˆ†çš„inception blockå†»ç»“ï¼Œåé¢çš„è®­ç»ƒï¼Œä»è€Œå‡å°‘å‚æ•°ï¼Œè¿™ä¸ª<strong>å³fine tuning</strong></p><blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># we chose to train the top 2 inception blocks, i.e. we will freeze</span><span class="token comment"># the first 249 layers and unfreeze the rest:</span><span class="token keyword">for</span> layer <span class="token keyword">in</span> model<span class="token punctuation">.</span>layers<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">249</span><span class="token punctuation">]</span><span class="token punctuation">:</span>   layer<span class="token punctuation">.</span>trainable <span class="token operator">=</span> <span class="token boolean">False</span><span class="token keyword">for</span> layer <span class="token keyword">in</span> model<span class="token punctuation">.</span>layers<span class="token punctuation">[</span><span class="token number">249</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">:</span>   layer<span class="token punctuation">.</span>trainable <span class="token operator">=</span> <span class="token boolean">True</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><p><a href="https://thedatafrog.com/en/articles/image-recognition-transfer-learning/">https://thedatafrog.com/en/articles/image-recognition-transfer-learning/</a> éå¸¸è¯¦ç»†çš„VGG16 fine tuningçš„æ•™ç¨‹ï¼ŒåŒæ ·ä¹Ÿæ˜¯å†»ç»“å‰é¢æ‰€æœ‰å±‚</p><h1 id="hydra-basic-local-launcher-ä½¿ç”¨å•ä¾‹æ¨¡å¼æ—¶è¦æ³¨æ„çš„ç‚¹"><a href="#hydra-basic-local-launcher-ä½¿ç”¨å•ä¾‹æ¨¡å¼æ—¶è¦æ³¨æ„çš„ç‚¹" class="headerlink" title="hydra + basic local launcher ä½¿ç”¨å•ä¾‹æ¨¡å¼æ—¶è¦æ³¨æ„çš„ç‚¹"></a>hydra + basic local launcher ä½¿ç”¨å•ä¾‹æ¨¡å¼æ—¶è¦æ³¨æ„çš„ç‚¹</h1><p>åœ¨multirunçš„æ¨¡å¼ä¸‹ï¼Œä½¿ç”¨basic Launcherè‡ªåŠ¨æ‰§è¡Œä¸åŒçš„å‚æ•°æ—¶ï¼Œè¦æ³¨æ„æ¯æ¬¡æ‰§è¡Œå¹¶æ²¡æœ‰é‡å¼€ä¸€ä¸ªæ–°çš„è¿›ç¨‹ï¼Œè€Œä»…ä»…æ˜¯æŒ‰ç…§ä¸åŒçš„å‚æ•°é‡æ–°æ‰§è¡Œä¸€æ¬¡mainå‡½æ•°ï¼Œ<strong>å³ä¸Šä¸€æ¬¡runçš„æ•°æ®å¹¶ä¸ºå®Œå…¨æ¶ˆé™¤</strong>ï¼Œå¦‚æœæ­¤æ—¶å•ä¾‹æ¨¡å¼ä¸­æ‰€ä½¿ç”¨çš„keyåˆæ²¡æ³¨æ„ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§ä¸å¤ŸåŒºåˆ†åº¦çš„ï¼š</p><p><img src="/2021/01/12/experiments-record/image-20210225160054122.png" alt="image-20210225160054122"></p><p>ä¼šå¯¼è‡´åé¢çš„runéƒ½ä¼šé‡å¤ä½¿ç”¨ç¬¬ä¸€ä¸ªrunçš„å‚æ•°ï¼Œå¯¼è‡´æ‰§è¡Œå¤±è´¥ã€‚</p><p>å› æ­¤æœ€ä½³çš„æ–¹æ³•è¿˜æ˜¯æŠŠæ‰€æœ‰çš„argséƒ½æ‹¼æ¥èµ·æ¥ï¼Œä½œä¸ºkey</p><p><img src="/2021/01/12/experiments-record/image-20210225160533554.png" alt="image-20210225160533554"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Imageå•æ¨¡æ€ï¼ŒLRè®¾ä¸º0-1ä¸å¯è®­ç»ƒï¼ˆä¸å¯è¡Œï¼‰&quot;&gt;&lt;a href=&quot;#Imageå•æ¨¡æ€ï¼ŒLRè®¾ä¸º0-1ä¸å¯è®­ç»ƒï¼ˆä¸å¯è¡Œï¼‰&quot; class=&quot;headerlink&quot; title=&quot;Imageå•æ¨¡æ€ï¼ŒLRè®¾ä¸º0.1ä¸å¯è®­ç»ƒï¼ˆä¸å¯è¡Œï¼‰&quot;&gt;&lt;/a&gt;Imageå•æ¨¡æ€ï¼ŒLR</summary>
      
    
    
    
    <category term="noisy-labels" scheme="https://khalitt.github.io/categories/noisy-labels/"/>
    
    
    <category term="noisy-labels" scheme="https://khalitt.github.io/tags/noisy-labels/"/>
    
  </entry>
  
  <entry>
    <title>pytorch-meta-learning</title>
    <link href="https://khalitt.github.io/2021/01/08/pytorch-meta-learning/"/>
    <id>https://khalitt.github.io/2021/01/08/pytorch-meta-learning/</id>
    <published>2021-01-08T10:18:41.000Z</published>
    <updated>2021-01-10T09:40:26.139Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Pytorch-åœ¨Meta-Learningè®¡ç®—ä¸­çš„ä¸è¶³"><a href="#Pytorch-åœ¨Meta-Learningè®¡ç®—ä¸­çš„ä¸è¶³" class="headerlink" title="Pytorch åœ¨Meta Learningè®¡ç®—ä¸­çš„ä¸è¶³"></a>Pytorch åœ¨Meta Learningè®¡ç®—ä¸­çš„ä¸è¶³</h1><p>æ­£å¦‚ <a href="https://higher.readthedocs.io/en/latest/#higher-documentation">higher</a> é¦–é¡µæ‰€è¯´</p><blockquote><p><code>higher</code> is a library providing support for higher-order optimization, e.g. through unrolled first-order optimization loops, of â€œmetaâ€ aspects of these loops. It provides tools for turning existing torch.nn.Module instances â€œstatelessâ€, <strong>meaning that changes to the parameters thereof can be tracked</strong>, <strong>and gradient with regard to intermediate parameters can be taken</strong>. It also provides a suite of differentiable optimizers, to facilitate the implementation of various meta-learning approaches.</p></blockquote><p>å³åŸç‰ˆçš„<code>torch.nn.Module</code>ä¸æ”¯æŒå¯¹parametersçš„æ¢¯åº¦æ“ä½œï¼Œå¯¼è‡´å½¢å¦‚åƒlearning to reweightè¿™ä¸€ç±»æ–¹æ³•ç”¨ä¸èµ·æ¥</p><p>facebookè‡ªå·±çš„å·¥ç¨‹å¸ˆåœ¨ä¹Ÿæœ‰è¯´æ˜ï¼š</p><blockquote><p>Another issue youâ€™re gonna face is that <code>nn.Parameter()</code> are built explicitly to be leaf Tensors (with no history) and so you wonâ€™t be able to change them with a Tensor you try to backprop through.</p><p>You can check the <a href="https://github.com/facebookresearch/higher">higher 2</a> package to do this properly (they solve this problem of nn.Parameter for you). Otherwise, if you want to do it manually, you can find some info in this thread: <a href="https://discuss.pytorch.org/t/how-does-one-have-the-parameters-of-a-model-not-be-leafs/70076/9">How does one have the parameters of a model NOT BE LEAFS?</a></p></blockquote><h1 id="dirtyã€ä¸ç”¨æ¡†æ¶çš„æ–¹æ³•"><a href="#dirtyã€ä¸ç”¨æ¡†æ¶çš„æ–¹æ³•" class="headerlink" title="dirtyã€ä¸ç”¨æ¡†æ¶çš„æ–¹æ³•"></a>dirtyã€ä¸ç”¨æ¡†æ¶çš„æ–¹æ³•</h1><p>å‚è€ƒï¼š</p><ol><li> <a href="https://discuss.pytorch.org/t/how-does-one-have-the-parameters-of-a-model-not-be-leafs/70076/9">How does one have the parameters of a model NOT BE LEAFS?</a>  è¯¦ç»†çš„è®¨è®ºï¼Œ<strong>æ¨èä»”ç»†é˜…è¯»</strong></li></ol><p><strong>ä¸æ¨èï¼ï¼</strong></p><h1 id="æ¨èæ–¹æ³•ï¼šç›´æ¥ç”¨higheræ¡†æ¶"><a href="#æ¨èæ–¹æ³•ï¼šç›´æ¥ç”¨higheræ¡†æ¶" class="headerlink" title="æ¨èæ–¹æ³•ï¼šç›´æ¥ç”¨higheræ¡†æ¶"></a>æ¨èæ–¹æ³•ï¼šç›´æ¥ç”¨higheræ¡†æ¶</h1><p>å‚è€ƒï¼š</p><ol><li><a href="https://github.com/TinfoilHat0/Learning-to-Reweight-Examples-for-Robust-Deep-Learning-with-PyTorch-Higher">Learning-to-Reweight-Examples-for-Robust-Deep-Learning-with-PyTorch-Higher</a> <strong>ç›´æ¥å‚è€ƒå…¶ä¸­çš„notebookï¼ï¼æ¨èï¼ï¼ï¼</strong></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Pytorch-åœ¨Meta-Learningè®¡ç®—ä¸­çš„ä¸è¶³&quot;&gt;&lt;a href=&quot;#Pytorch-åœ¨Meta-Learningè®¡ç®—ä¸­çš„ä¸è¶³&quot; class=&quot;headerlink&quot; title=&quot;Pytorch åœ¨Meta Learningè®¡ç®—ä¸­çš„ä¸è¶³&quot;&gt;&lt;/a&gt;Py</summary>
      
    
    
    
    <category term="pytorch" scheme="https://khalitt.github.io/categories/pytorch/"/>
    
    
    <category term="pytorch" scheme="https://khalitt.github.io/tags/pytorch/"/>
    
    <category term="meta learning" scheme="https://khalitt.github.io/tags/meta-learning/"/>
    
  </entry>
  
  <entry>
    <title>zsh-usage</title>
    <link href="https://khalitt.github.io/2021/01/07/zsh-usage/"/>
    <id>https://khalitt.github.io/2021/01/07/zsh-usage/</id>
    <published>2021-01-07T03:44:20.000Z</published>
    <updated>2021-01-07T05:06:53.682Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å®‰è£…zsh"><a href="#å®‰è£…zsh" class="headerlink" title="å®‰è£…zsh"></a>å®‰è£…zsh</h1><h1 id="é…ç½®zsh"><a href="#é…ç½®zsh" class="headerlink" title="é…ç½®zsh"></a>é…ç½®zsh</h1><pre class="line-numbers language-none"><code class="language-none">source ~&#x2F;.zsh&#x2F;zsh-autosuggestions&#x2F;zsh-autosuggestions.zsh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="æ›´æ”¹é»˜è®¤shell"><a href="#æ›´æ”¹é»˜è®¤shell" class="headerlink" title="æ›´æ”¹é»˜è®¤shell"></a>æ›´æ”¹é»˜è®¤shell</h2><p>å‚è€ƒ <a href="https://unix.stackexchange.com/a/214086">configure tmux to zsh</a></p><p>æœ€ä½³çš„æ–¹å¼ï¼Œ<strong>åœ¨<code>.tmux.conf</code>ä¸­æ›´æ”¹</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">set-option -g default-command <span class="token string">"/home/weitaotang/local/bin/zsh"</span> <span class="token comment"># path_to_zsh</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å®‰è£…zsh&quot;&gt;&lt;a href=&quot;#å®‰è£…zsh&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…zsh&quot;&gt;&lt;/a&gt;å®‰è£…zsh&lt;/h1&gt;&lt;h1 id=&quot;é…ç½®zsh&quot;&gt;&lt;a href=&quot;#é…ç½®zsh&quot; class=&quot;headerlink&quot; title=&quot;é…ç½®z</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>pythonçš„å¤šè¿›ç¨‹ä½¿ç”¨</title>
    <link href="https://khalitt.github.io/2020/06/18/python-multiprocessing-usage/"/>
    <id>https://khalitt.github.io/2020/06/18/python-multiprocessing-usage/</id>
    <published>2020-06-18T11:00:28.000Z</published>
    <updated>2021-03-02T08:16:27.186Z</updated>
    
    <content type="html"><![CDATA[<p>å‚è€ƒï¼š</p><ul><li><p>å¼ºçƒˆæ¨èè¿™ä¸ª <a href="https://thief.one/2016/11/23/Python-multiprocessing/">ã€Multiprocessingç³»åˆ—ã€‘MultiprocessingåŸºç¡€</a>ï¼Œæ¸…æ™°æ˜“æ‡‚ï¼Œå°¤å…¶æ¨èé‡Œé¢çš„ä¸¤ç¯‡èµ„æºå…±äº«ç³»åˆ— <a href="https://thief.one/2016/11/24/Multiprocessing%E5%85%B1%E4%BA%AB%E8%B5%84%E6%BA%90/">ã€Multiprocessingç³»åˆ—ã€‘å…±äº«èµ„æº</a>  <a href="https://thief.one/2016/11/24/Multiprocessing%E5%AD%90%E8%BF%9B%E7%A8%8B%E8%BF%94%E5%9B%9E%E5%80%BC/">ã€Multiprocessingç³»åˆ—ã€‘å­è¿›ç¨‹è¿”å›å€¼</a>ï¼Œå…¶ä¸­åè€…æ›´é€šç”¨ï¼Œå› ä¸ºå‰è€…é‡Œé¢çš„æ–¹æ³•Windowsä¸é€‚ç”¨</p></li><li><p>ç®€å•çš„æ¨¡ç‰ˆå¯ä»¥å‚è€ƒ<a href="https://jingsam.github.io/2015/12/31/multiprocessing.html">æ­£ç¡®ä½¿ç”¨ Multiprocessing çš„å§¿åŠ¿</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/46368084">ä¸€æ–‡çœ‹æ‡‚Pythonå¤šè¿›ç¨‹ä¸å¤šçº¿ç¨‹ç¼–ç¨‹(å·¥ä½œå­¦ä¹ é¢è¯•å¿…è¯»)</a> å¼€ç¯‡å…³äºçº¿ç¨‹ã€è¿›ç¨‹çš„è¯´æ˜å¾ˆæ¸…æ™°</p></li><li><p><a href="https://juejin.im/post/5cce9e20f265da036b4a76d6#heading-4">ä¸€ç¯‡æ–‡ç« æå®šPythonå¤šè¿›ç¨‹(å…¨)</a> å¯ä»¥å‚è€ƒé‡Œé¢çš„ä¾‹å­ã€‚<strong>ç‰¹åˆ«æ˜¯æœ€åä¸€ä¸ªå…³äºmapçš„ä¾‹å­</strong></p></li><li><p>è«å‡¡çš„ä¾‹å­ä¹Ÿä¸é”™ <a href="https://morvanzhou.github.io/tutorials/python-basic/multiprocessing/5-pool/">è¿›ç¨‹æ±  Pool</a></p></li></ul><h1 id="åŸºç¡€æ¦‚å¿µ"><a href="#åŸºç¡€æ¦‚å¿µ" class="headerlink" title="åŸºç¡€æ¦‚å¿µ"></a>åŸºç¡€æ¦‚å¿µ</h1><h2 id="ä¸€äº›api"><a href="#ä¸€äº›api" class="headerlink" title="ä¸€äº›api"></a>ä¸€äº›api</h2><ul><li>åˆ›å»ºProcessç›¸å…³çš„ï¼š<a href="https://docs.python.org/2.7/library/multiprocessing.html#multiprocessing.Process"><code>multiprocessing.Process()</code></a><ul><li>å¯ä»¥ç›´æ¥è°ƒç”¨é»˜è®¤çš„æ„é€ å‡½æ•°ï¼Œåˆ›å»ºæ–°çš„è¿›ç¨‹</li><li>ä¹Ÿå¯ä»¥ç»§æ‰¿<code>Process</code>ï¼ŒåƒThreadçš„ä½¿ç”¨é‚£æ ·</li><li><code>.join()</code>æ–¹æ³•ç”¨æ¥é˜»å¡ä¸»è¿›ç¨‹ï¼ˆå¤šçº¿ç¨‹æ—¶ä¹Ÿæ˜¯ä¸€æ ·çš„å«ä¹‰ï¼‰ï¼Œ**å³æŸå­è¿›ç¨‹è°ƒç”¨<code>.join()</code>æ–¹æ³•ï¼Œåˆ™ä¸»è¿›ç¨‹ä¼šä¸€ç›´ç­‰åˆ°è¯¥å­è¿›ç¨‹ä»‹ç»ï¼Œæˆ–è€…åˆ°è¾¾è®¾å®šçš„æ—¶é—´ï¼Œæ‰ä¼šç»§ç»­æ‰§è¡Œ<code>join</code>åé¢çš„ä»£ç ã€‚è¯¦å‚ <a href="https://www.cnblogs.com/lipijin/p/3709903.html">pythonå¤šè¿›ç¨‹çš„ç†è§£ multiprocessing Process join run</a>**ï¼š</li></ul></li></ul><p><img src="/2020/06/18/python-multiprocessing-usage/image-20200618191653558.png" alt="image-20200618191653558"></p><ul><li>è¿›ç¨‹æ±  Poolï¼Œè®¾å®šå¥½è¿›ç¨‹æ•°ï¼Œé¿å…äº†æ‰‹åŠ¨ç®¡ç†çš„éº»çƒ¦ï¼Œ<strong>è¿™ä¸ªå¾ˆé‡è¦</strong>ï¼š<ul><li>é¡ºåºæ‰§è¡Œä»»åŠ¡ï¼ˆä¸²è¡Œï¼‰ï¼š<ul><li>apply</li><li>mapï¼ˆç±»ä¼¼mapçš„ç”¨æ³•ï¼Œè¾“å…¥ä¸€ä¸ªå¯è¿­ä»£çš„å˜é‡å³å¯ï¼‰ï¼Œ<strong>ä½†æœ€åçš„è¾“å‡ºä¸åŒäºç±»ä¼¼mapï¼ˆæ— éœ€åœ¨å¤–é¢å¥—ä¸€ä¸ªlist)ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›ä¸€ä¸ªlist</strong></li></ul></li></ul></li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># coding=utf-8</span><span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Pool<span class="token keyword">import</span> multiprocessing<span class="token keyword">import</span> time<span class="token keyword">def</span> <span class="token function">task</span><span class="token punctuation">(</span>pid<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># do something</span>    result <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>pid<span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># multiprocessing.freeze_support()</span>    cpus <span class="token operator">=</span> multiprocessing<span class="token punctuation">.</span>cpu_count<span class="token punctuation">(</span><span class="token punctuation">)</span>    pool <span class="token operator">=</span> multiprocessing<span class="token punctuation">.</span>Pool<span class="token punctuation">(</span>cpus<span class="token punctuation">)</span>    results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    rslt <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>task<span class="token punctuation">,</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    pool<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>    pool<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># è¾“å‡º['0', '1', '2', '3', '4', '5', '6', '7', '8', '9']</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>rslt<span class="token punctuation">)</span>         <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    main<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>å¼‚æ­¥æ‰§è¡Œï¼ˆå¹¶è¡Œï¼‰ï¼Œæ³¨æ„è¿”å›çš„å¹¶ä¸æ˜¯listæˆ–è€…æœ€åçš„ç»“æœï¼Œè€Œæ˜¯<a href="https://docs.python.org/2.7/library/multiprocessing.html#multiprocessing.pool.AsyncResult"><code>multiprocessing.pool.AsyncResult</code> </a>ï¼Œéœ€è¦å†è°ƒç”¨<code>get</code> ï¼ˆè¿˜æœ‰ä¸€äº›åˆ«çš„æ–¹æ³•ï¼‰:</p><ul><li>apply_async</li><li>map_asyncï¼ŒåŒæ ·ç±»ä¼¼ä¸Šé¢çš„çš„mapï¼Œåªæ˜¯è¿”å›çš„æ˜¯AsyncResultï¼Œéœ€è¦å†getè·å¾—æœ€åçš„ç»“æœ</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># coding=utf-8</span><span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Pool<span class="token keyword">import</span> multiprocessing<span class="token keyword">import</span> time<span class="token keyword">from</span> time <span class="token keyword">import</span> sleep<span class="token keyword">def</span> <span class="token function">task</span><span class="token punctuation">(</span>pid<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># do something</span>    result <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>pid<span class="token punctuation">)</span>    <span class="token keyword">if</span> pid <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>        sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># multiprocessing.freeze_support()</span>    cpus <span class="token operator">=</span> multiprocessing<span class="token punctuation">.</span>cpu_count<span class="token punctuation">(</span><span class="token punctuation">)</span>    pool <span class="token operator">=</span> multiprocessing<span class="token punctuation">.</span>Pool<span class="token punctuation">(</span>cpus<span class="token punctuation">)</span>    results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    rslt <span class="token operator">=</span> pool<span class="token punctuation">.</span>map_async<span class="token punctuation">(</span>task<span class="token punctuation">,</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    pool<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>    pool<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># æ³¨æ„ï¼Œåªæœ‰å½“æ‰€æœ‰è¿›ç¨‹éƒ½ç»“æŸä¹‹åæ‰ä¼šæ‰§è¡Œä¸‹é¢çš„printï¼Œå› æ­¤ä¸Šé¢taskä¸­çš„sleepæ— æ•ˆ</span>    <span class="token comment"># ç»“æœï¼š['0', '1', '2', '3', '4', '5', '6', '7', '8', '9']</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>rslt<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    main<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>é€šä¿¡ï¼Œæ•°æ®å…±äº«ç›¸å…³çš„ï¼šValueï¼ŒArrayï¼ˆè¿™ä¸¤ä¸ªéƒ½åªèƒ½ç”¨cçš„æ•°æ®ç±»å‹ï¼Œä¸æ¨èï¼‰ï¼Œ<strong>Queue(æœ€å¸¸ç”¨çš„ï¼‰</strong>ï¼ŒManager</p></li></ul><h2 id="åŸºæœ¬çš„æ€è·¯"><a href="#åŸºæœ¬çš„æ€è·¯" class="headerlink" title="åŸºæœ¬çš„æ€è·¯"></a>åŸºæœ¬çš„æ€è·¯</h2><ol><li>åˆ›å»ºå¹¶å¼€å¯å¤šä¸ªè¿›ç¨‹ï¼š</li></ol><ul><li>å¯ä»¥ç±»ä¼¼Threadé‚£æ ·ï¼Œé€šè¿‡å¾ªç¯åˆ›å»ºå¹¶start</li><li>æˆ–è€…é€šè¿‡è¿›ç¨‹æ± Poolåˆ›å»ºï¼Œå°±ä¸éœ€è¦é€šè¿‡start</li></ul><ol start="2"><li>ï¼ˆå¦‚æœæ˜¯Poolï¼Œå…³é—­è¿›ç¨‹æ± <code>Pool.close</code>ï¼‰</li><li>joinï¼Œç­‰æ‰€æœ‰çš„å­è¿›ç¨‹ç»“æŸï¼Œå¤„ç†ç»“æœ</li></ol><h1 id="ä¸€äº›æ¨¡ç‰ˆ"><a href="#ä¸€äº›æ¨¡ç‰ˆ" class="headerlink" title="ä¸€äº›æ¨¡ç‰ˆ"></a>ä¸€äº›æ¨¡ç‰ˆ</h1><h2 id="ç”¨Processåˆ›å»ºè¿›ç¨‹ï¼Œå¹¶ç”¨shared-variableæ”¶é›†ç»“æœï¼ˆç•¥å¤æ‚ï¼‰"><a href="#ç”¨Processåˆ›å»ºè¿›ç¨‹ï¼Œå¹¶ç”¨shared-variableæ”¶é›†ç»“æœï¼ˆç•¥å¤æ‚ï¼‰" class="headerlink" title="ç”¨Processåˆ›å»ºè¿›ç¨‹ï¼Œå¹¶ç”¨shared variableæ”¶é›†ç»“æœï¼ˆç•¥å¤æ‚ï¼‰"></a>ç”¨Processåˆ›å»ºè¿›ç¨‹ï¼Œå¹¶ç”¨<a href="http://docs.python.org/library/multiprocessing.html#sharing-state-between-processes">shared variable</a>æ”¶é›†ç»“æœï¼ˆç•¥å¤æ‚ï¼‰</h2><p><a href="https://segmentfault.com/q/1010000010403117">Pythonå¤šè¿›ç¨‹å¦‚ä½•è·å–å‡½æ•°çš„è¿”å›å€¼</a></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">worker</span><span class="token punctuation">(</span>procnum<span class="token punctuation">,</span> return_dict<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">'''worker function'''</span>    <span class="token keyword">print</span> <span class="token builtin">str</span><span class="token punctuation">(</span>procnum<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' represent!'</span>    return_dict<span class="token punctuation">[</span>procnum<span class="token punctuation">]</span> <span class="token operator">=</span> procnum<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    manager <span class="token operator">=</span> Manager<span class="token punctuation">(</span><span class="token punctuation">)</span>    return_dict <span class="token operator">=</span> manager<span class="token punctuation">.</span><span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    jobs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        p <span class="token operator">=</span> multiprocessing<span class="token punctuation">.</span>Process<span class="token punctuation">(</span>target<span class="token operator">=</span>worker<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>return_dict<span class="token punctuation">)</span><span class="token punctuation">)</span>        jobs<span class="token punctuation">.</span>append<span class="token punctuation">(</span>p<span class="token punctuation">)</span>        p<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> proc <span class="token keyword">in</span> jobs<span class="token punctuation">:</span>        proc<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># æœ€åçš„ç»“æœæ˜¯å¤šä¸ªè¿›ç¨‹è¿”å›å€¼çš„é›†åˆ</span>    <span class="token keyword">print</span> return_dict<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>Manageræ”¯æŒ<code>list</code>, <a href="https://docs.python.org/2.7/library/stdtypes.html#dict"><code>dict</code></a>, <a href="https://docs.python.org/2.7/library/multiprocessing.html#multiprocessing.managers.Namespace"><code>Namespace</code></a>, <a href="https://docs.python.org/2.7/library/multiprocessing.html#multiprocessing.Lock"><code>Lock</code></a>, <a href="https://docs.python.org/2.7/library/multiprocessing.html#multiprocessing.RLock"><code>RLock</code></a>, <a href="https://docs.python.org/2.7/library/multiprocessing.html#multiprocessing.Semaphore"><code>Semaphore</code></a>, <a href="https://docs.python.org/2.7/library/multiprocessing.html#multiprocessing.BoundedSemaphore"><code>BoundedSemaphore</code></a>, <a href="https://docs.python.org/2.7/library/multiprocessing.html#multiprocessing.Condition"><code>Condition</code></a>, <a href="https://docs.python.org/2.7/library/multiprocessing.html#multiprocessing.Event"><code>Event</code></a>, <a href="https://docs.python.org/2.7/library/multiprocessing.html#multiprocessing.Queue"><code>Queue</code></a>, <a href="https://docs.python.org/2.7/library/multiprocessing.html#multiprocessing.Value"><code>Value</code></a> and <a href="https://docs.python.org/2.7/library/multiprocessing.html#multiprocessing.Array"><code>Array</code></a>.</li></ul><p>æ¥è‡ªå®˜æ–¹çš„ä¾‹å­ <a href="https://docs.python.org/2.7/library/multiprocessing.html#sharing-state-between-processes">Sharing state between processes</a></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Process<span class="token punctuation">,</span> Manager<span class="token keyword">def</span> <span class="token function">f</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> l<span class="token punctuation">)</span><span class="token punctuation">:</span>    d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'1'</span>    d<span class="token punctuation">[</span><span class="token string">'2'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>    d<span class="token punctuation">[</span><span class="token number">0.25</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>    l<span class="token punctuation">.</span>reverse<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    manager <span class="token operator">=</span> Manager<span class="token punctuation">(</span><span class="token punctuation">)</span>    d <span class="token operator">=</span> manager<span class="token punctuation">.</span><span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    l <span class="token operator">=</span> manager<span class="token punctuation">.</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    p <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>f<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> l<span class="token punctuation">)</span><span class="token punctuation">)</span>    p<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>    p<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span> d    <span class="token keyword">print</span> l<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åˆ›å»ºè¿›ç¨‹æ± Poolï¼Œä½¿ç”¨map-asyncæˆ–è€…apply-asyncï¼Œç”¨listæŠŠæ‰€æœ‰ç»“æœæ”¶é›†èµ·æ¥"><a href="#åˆ›å»ºè¿›ç¨‹æ± Poolï¼Œä½¿ç”¨map-asyncæˆ–è€…apply-asyncï¼Œç”¨listæŠŠæ‰€æœ‰ç»“æœæ”¶é›†èµ·æ¥" class="headerlink" title="åˆ›å»ºè¿›ç¨‹æ± Poolï¼Œä½¿ç”¨map_asyncæˆ–è€…apply_asyncï¼Œç”¨listæŠŠæ‰€æœ‰ç»“æœæ”¶é›†èµ·æ¥"></a>åˆ›å»ºè¿›ç¨‹æ± Poolï¼Œä½¿ç”¨map_asyncæˆ–è€…apply_asyncï¼Œç”¨listæŠŠæ‰€æœ‰ç»“æœæ”¶é›†èµ·æ¥</h2><p><code>apply_async</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">task</span><span class="token punctuation">(</span>pid<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># do something</span>    <span class="token keyword">return</span> result<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    pool <span class="token operator">=</span> multiprocessing<span class="token punctuation">.</span>Pool<span class="token punctuation">(</span><span class="token punctuation">)</span>    cpus <span class="token operator">=</span> multiprocessing<span class="token punctuation">.</span>cpu_count<span class="token punctuation">(</span><span class="token punctuation">)</span>    results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">xrange</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> cpus<span class="token punctuation">)</span><span class="token punctuation">:</span>        result <span class="token operator">=</span> pool<span class="token punctuation">.</span>apply_async<span class="token punctuation">(</span>task<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        results<span class="token punctuation">.</span>append<span class="token punctuation">(</span>result<span class="token punctuation">)</span>    pool<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>    pool<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> result <span class="token keyword">in</span> results<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>map_async</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># coding=utf-8</span><span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Pool<span class="token keyword">import</span> multiprocessing<span class="token keyword">import</span> time<span class="token keyword">from</span> time <span class="token keyword">import</span> sleep<span class="token keyword">def</span> <span class="token function">task</span><span class="token punctuation">(</span>pid<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># do something</span>    result <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>pid<span class="token punctuation">)</span>    <span class="token keyword">if</span> pid <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>        sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># multiprocessing.freeze_support()</span>    cpus <span class="token operator">=</span> multiprocessing<span class="token punctuation">.</span>cpu_count<span class="token punctuation">(</span><span class="token punctuation">)</span>    pool <span class="token operator">=</span> multiprocessing<span class="token punctuation">.</span>Pool<span class="token punctuation">(</span>cpus<span class="token punctuation">)</span>    results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    rslt <span class="token operator">=</span> pool<span class="token punctuation">.</span>map_async<span class="token punctuation">(</span>task<span class="token punctuation">,</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    pool<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>    pool<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>rslt<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    main<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Pool-map-Pool-map-asyncçš„å®è·µ"><a href="#Pool-map-Pool-map-asyncçš„å®è·µ" class="headerlink" title="Pool.map/ Pool.map_asyncçš„å®è·µ"></a>Pool.map/ Pool.map_asyncçš„å®è·µ</h2><p><a href="https://juejin.im/post/5cce9e20f265da036b4a76d6#heading-9">è¿›ç¨‹æ± mapæ–¹æ³•</a></p><blockquote><p>è¿™æ®µä»£ç çš„ä¸»è¦å·¥ä½œå°±æ˜¯å°†éå†ä¼ å…¥çš„æ–‡ä»¶å¤¹ä¸­çš„å›¾ç‰‡æ–‡ä»¶ï¼Œä¸€ä¸€ç”Ÿæˆç¼©ç•¥å›¾ï¼Œå¹¶å°†è¿™äº›ç¼©ç•¥å›¾ä¿å­˜åˆ°ç‰¹å®šæ–‡ä»¶å¤¹ä¸­ã€‚è¿™æˆ‘çš„æœºå™¨ä¸Šï¼Œç”¨è¿™ä¸€ç¨‹åºå¤„ç† 6000 å¼ å›¾ç‰‡éœ€è¦èŠ±è´¹ 27.9 ç§’ã€‚ map å‡½æ•°å¹¶ä¸æ”¯æŒæ‰‹åŠ¨çº¿ç¨‹ç®¡ç†ï¼Œåè€Œä½¿å¾—ç›¸å…³çš„ debug å·¥ä½œä¹Ÿå˜å¾—å¼‚å¸¸ç®€å•ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> os <span class="token keyword">import</span> PIL <span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Pool <span class="token keyword">from</span> PIL <span class="token keyword">import</span> ImageSIZE <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">)</span>SAVE_DIRECTORY <span class="token operator">=</span> \'thumbs\'<span class="token keyword">def</span> <span class="token function">get_image_paths</span><span class="token punctuation">(</span>folder<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>folder<span class="token punctuation">,</span> f<span class="token punctuation">)</span>             <span class="token keyword">for</span> f <span class="token keyword">in</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>folder<span class="token punctuation">)</span>             <span class="token keyword">if</span> \'jpeg\' <span class="token keyword">in</span> f<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">create_thumbnail</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">:</span>     im <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span>    im<span class="token punctuation">.</span>thumbnail<span class="token punctuation">(</span>SIZE<span class="token punctuation">,</span> Image<span class="token punctuation">.</span>ANTIALIAS<span class="token punctuation">)</span>    base<span class="token punctuation">,</span> fname <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>split<span class="token punctuation">(</span>filename<span class="token punctuation">)</span>     save_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>base<span class="token punctuation">,</span> SAVE_DIRECTORY<span class="token punctuation">,</span> fname<span class="token punctuation">)</span>    im<span class="token punctuation">.</span>save<span class="token punctuation">(</span>save_path<span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> \'__main__\'<span class="token punctuation">:</span>    folder <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>abspath<span class="token punctuation">(</span>        \'11_18_2013_R000_IQM_Big_Sur_Mon__e10d1958e7b766c3e840\'<span class="token punctuation">)</span>    os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>folder<span class="token punctuation">,</span> SAVE_DIRECTORY<span class="token punctuation">)</span><span class="token punctuation">)</span>    images <span class="token operator">=</span> get_image_paths<span class="token punctuation">(</span>folder<span class="token punctuation">)</span>    pool <span class="token operator">=</span> Pool<span class="token punctuation">(</span><span class="token punctuation">)</span>    pool<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>creat_thumbnail<span class="token punctuation">,</span> images<span class="token punctuation">)</span> <span class="token comment">#å…³é”®ç‚¹ï¼Œimagesæ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡</span>    pool<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>    pool<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ä¸€äº›tricks"><a href="#ä¸€äº›tricks" class="headerlink" title="ä¸€äº›tricks"></a>ä¸€äº›tricks</h1><h2 id="Pool-map-Pool-map-asyncä¼ å…¥å¤šä¸ªå‚æ•°"><a href="#Pool-map-Pool-map-asyncä¼ å…¥å¤šä¸ªå‚æ•°" class="headerlink" title="Pool.map/Pool.map_asyncä¼ å…¥å¤šä¸ªå‚æ•°"></a>Pool.map/Pool.map_asyncä¼ å…¥å¤šä¸ªå‚æ•°</h2><p><a href="http://python.omics.wiki/multiprocessing_map/multiprocessing_partial_function_multiple_arguments">pool.map - multiple arguments</a></p><ul><li><p>é€šè¿‡ä¼ å…¥list of list(or anything suitable)</p></li><li><p>partial</p></li></ul><h2 id="é€šè¿‡ctrl-cç»“æŸè¿›ç¨‹æ± "><a href="#é€šè¿‡ctrl-cç»“æŸè¿›ç¨‹æ± " class="headerlink" title="é€šè¿‡ctrl-cç»“æŸè¿›ç¨‹æ± "></a>é€šè¿‡ctrl-cç»“æŸè¿›ç¨‹æ± </h2><p>å¤§ä½“æ€è·¯ï¼šæ›¿æ¢ç³»ç»Ÿçš„signal int</p><p><a href="https://stackoverflow.com/a/35134329">Catch Ctrl+C / SIGINT and exit multiprocesses gracefully in python [duplicate]</a></p><p><img src="/2020/06/18/python-multiprocessing-usage/image-20200619144551444.png" alt="image-20200619144551444"></p><p><strong>ä½†æ˜¯è¿™ä¸ªæ˜¯ä¸è¡Œçš„ï¼Œå®æµ‹ä¸è¡Œ</strong></p><p>å®æµ‹åº”è¯¥ç”¨<a href="https://segmentfault.com/a/1190000004172444">Python ä¸­ Ctrl+C ä¸èƒ½ç»ˆæ­¢ Multiprocessing Pool çš„è§£å†³æ–¹æ¡ˆ</a></p><h1 id="å®æˆ˜"><a href="#å®æˆ˜" class="headerlink" title="å®æˆ˜"></a>å®æˆ˜</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å‚è€ƒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;å¼ºçƒˆæ¨èè¿™ä¸ª &lt;a href=&quot;https://thief.one/2016/11/23/Python-multiprocessing/&quot;&gt;ã€Multiprocessingç³»åˆ—ã€‘MultiprocessingåŸºç¡€&lt;/a&gt;ï¼Œæ¸…æ™°æ˜“æ‡‚ï¼Œå°¤</summary>
      
    
    
    
    <category term="python" scheme="https://khalitt.github.io/categories/python/"/>
    
    
    <category term="python" scheme="https://khalitt.github.io/tags/python/"/>
    
    <category term="å¤šè¿›ç¨‹" scheme="https://khalitt.github.io/tags/%E5%A4%9A%E8%BF%9B%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>shell-scripts-basics</title>
    <link href="https://khalitt.github.io/2020/06/17/shell-scripts-basics/"/>
    <id>https://khalitt.github.io/2020/06/17/shell-scripts-basics/</id>
    <published>2020-06-17T08:46:34.000Z</published>
    <updated>2021-01-10T13:34:16.303Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åˆ¤æ–­è¾“å…¥è„šæœ¬ï¼ˆå‡½æ•°ï¼‰çš„å‚æ•°ä¸ªæ•°"><a href="#åˆ¤æ–­è¾“å…¥è„šæœ¬ï¼ˆå‡½æ•°ï¼‰çš„å‚æ•°ä¸ªæ•°" class="headerlink" title="åˆ¤æ–­è¾“å…¥è„šæœ¬ï¼ˆå‡½æ•°ï¼‰çš„å‚æ•°ä¸ªæ•°"></a>åˆ¤æ–­è¾“å…¥è„šæœ¬ï¼ˆå‡½æ•°ï¼‰çš„å‚æ•°ä¸ªæ•°</h1><p><a href="https://stackoverflow.com/a/18568726">Check number of arguments passed to a Bash script</a></p><p>éƒ½æ˜¯ä½¿ç”¨<code>$#</code></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$#</span>"</span> -eq <span class="token number">2</span> <span class="token punctuation">]</span><span class="token keyword">then</span><span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥ä½¿ç”¨ <code>-eq</code>, <code>-ne</code>, <code>-lt</code>, <code>-le</code>, <code>-gt</code> åˆ¤æ–­ä¸ªæ•°</p><h1 id="logical-and-or-not"><a href="#logical-and-or-not" class="headerlink" title="logical and / or / not"></a>logical and / or / not</h1><p><code>||</code> or , <code>&amp;&amp;</code> and, <code>!</code> not</p><p>ç”¨<code>[[]]</code>æˆ–è€…<code>[]</code></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">HOST</span><span class="token operator">=</span>user1<span class="token keyword">if</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$HOST</span> <span class="token operator">==</span> user1 <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$HOST</span> <span class="token operator">==</span> node* <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">;</span><span class="token keyword">then</span>    <span class="token builtin class-name">echo</span> yes1<span class="token keyword">fi</span><span class="token assign-left variable">HOST</span><span class="token operator">=</span>node001<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$HOST</span> <span class="token operator">==</span> user1 <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$HOST</span> <span class="token operator">==</span> node* <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">;</span><span class="token keyword">then</span>    <span class="token builtin class-name">echo</span> yes2<span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ›´å¤æ‚çš„ä¾‹å­ï¼ˆå‚è€ƒ<a href="https://stackoverflow.com/a/18568726">Check number of arguments passed to a Bash script</a>ï¼‰ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token punctuation">(</span><span class="token variable">$#</span> -eq <span class="token number">1</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token variable">$#</span> -eq <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$2</span> <span class="token operator">==</span> <span class="token operator">&lt;</span>glob pattern<span class="token operator">></span><span class="token punctuation">))</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$1</span> <span class="token operator">=</span>~ <span class="token operator">&lt;</span>regex pattern<span class="token operator">></span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">A</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">'A + 1'</span> -eq <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> <span class="token boolean">true</span>  <span class="token comment">## Prints true.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å‚è€ƒ <a href="https://stackoverflow.com/a/4341647">Checking for the correct number of arguments</a></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$#</span>"</span> -ne <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token operator">!</span> <span class="token punctuation">[</span> -d <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>  <span class="token builtin class-name">echo</span> <span class="token string">"Usage: <span class="token variable">$0</span> DIRECTORY"</span> <span class="token operator">></span><span class="token file-descriptor important">&amp;2</span>  <span class="token builtin class-name">exit</span> <span class="token number">1</span><span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŸå­ä¸²å¼€å§‹æˆ–è€…ç»“æŸ"><a href="#åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŸå­ä¸²å¼€å§‹æˆ–è€…ç»“æŸ" class="headerlink" title="åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŸå­ä¸²å¼€å§‹æˆ–è€…ç»“æŸ"></a>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŸå­ä¸²å¼€å§‹æˆ–è€…ç»“æŸ</h2><p><a href="https://stackoverflow.com/a/2172367">In Bash, how can I check if a string begins with some value?</a></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># The == comparison operator behaves differently within a double-brackets</span><span class="token comment"># test than within single brackets.</span><span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$a</span> <span class="token operator">==</span> z* <span class="token punctuation">]</span><span class="token punctuation">]</span>   <span class="token comment"># True if $a starts with a "z" (wildcard matching).</span><span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$a</span> <span class="token operator">==</span> <span class="token string">"z*"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment"># True if $a is equal to z* (literal matching).</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨<code>z*</code>è€Œä¸è¦ä½¿ç”¨<code>&quot;z*&quot;</code>ï¼Œå‰è€…æ‰æ˜¯çœŸæ­£çš„wildcard matching</p><h2 id="è·å–æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶"><a href="#è·å–æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶" class="headerlink" title="è·å–æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶"></a>è·å–æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</h2><p><a href="https://blog.csdn.net/Quincuntial/article/details/54348471">Linux Shellè·å–æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å</a></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span><span class="token comment"># get all filename in specified path</span><span class="token assign-left variable">path</span><span class="token operator">=</span><span class="token variable">$1</span><span class="token assign-left variable">files</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span> $path<span class="token variable">)</span></span><span class="token keyword">for</span> <span class="token for-or-select variable">filename</span> <span class="token keyword">in</span> <span class="token variable">$files</span><span class="token keyword">do</span>   <span class="token builtin class-name">echo</span> <span class="token variable">$filename</span> <span class="token operator">>></span> filename.txt<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¯¹arrayçš„ä¸€äº›æ“ä½œ"><a href="#å¯¹arrayçš„ä¸€äº›æ“ä½œ" class="headerlink" title="å¯¹arrayçš„ä¸€äº›æ“ä½œ"></a>å¯¹arrayçš„ä¸€äº›æ“ä½œ</h2><h3 id="éå†array"><a href="#éå†array" class="headerlink" title="éå†array"></a>éå†array</h3><p><a href="https://stackoverflow.com/a/8880633">Loop through an array of strings in Bash?</a></p><p>elementså¯ä»¥ä½¿numbersæˆ–è€…ç›´æ¥strings</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">arr</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">"element1"</span> <span class="token string">"element2"</span> <span class="token string">"element3"</span><span class="token punctuation">)</span><span class="token comment">## now loop through the above array</span><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token string">"<span class="token variable">$&#123;arr<span class="token punctuation">[</span>@<span class="token punctuation">]</span>&#125;</span>"</span><span class="token keyword">do</span>   <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$i</span>"</span>   <span class="token comment"># or do whatever with individual element of the array</span><span class="token keyword">done</span><span class="token comment"># You can access them using echo "$&#123;arr[0]&#125;", "$&#123;arr[1]&#125;" also</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŒæ—¶è·å¾—indexå’Œå…ƒç´ ï¼ˆç±»ä¼¼pythonçš„enumerateï¼‰</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">for</span> <span class="token for-or-select variable">index</span> <span class="token keyword">in</span> <span class="token string">"<span class="token variable">$&#123;<span class="token operator">!</span>array<span class="token punctuation">[</span>@<span class="token punctuation">]</span>&#125;</span>"</span><span class="token keyword">do</span>    <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$index</span> <span class="token variable">$&#123;array<span class="token punctuation">[</span>index<span class="token punctuation">]</span>&#125;</span>"</span><span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è®¿é—®arrayçš„å…ƒç´ "><a href="#è®¿é—®arrayçš„å…ƒç´ " class="headerlink" title="è®¿é—®arrayçš„å…ƒç´ "></a>è®¿é—®arrayçš„å…ƒç´ </h3><p><a href="https://stackoverflow.com/a/10586169">Split string into an array in Bash</a></p><p>æ ¹æ®ç´¢å¼•è®¿é—®ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$&#123;array<span class="token punctuation">[</span>0<span class="token punctuation">]</span>&#125;</span>"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è®¿é—®æœ€åä¸€ä¸ªå…ƒç´ ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$&#123;array<span class="token punctuation">[</span>-1<span class="token punctuation">]</span>&#125;</span>"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æˆ–è€…æ›´é€šç”¨çš„</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$&#123;array<span class="token punctuation">[</span>@<span class="token punctuation">]</span><span class="token operator">:</span> -1<span class="token operator">:</span>1&#125;</span>"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="trapå‘½ä»¤"><a href="#trapå‘½ä»¤" class="headerlink" title="trapå‘½ä»¤"></a>trapå‘½ä»¤</h2><blockquote><p><strong>trapå‘½ä»¤</strong>ç”¨äºæŒ‡å®šåœ¨æ¥æ”¶åˆ°ä¿¡å·åå°†è¦é‡‡å–çš„åŠ¨ä½œï¼Œå¸¸è§çš„ç”¨é€”æ˜¯<strong>åœ¨è„šæœ¬ç¨‹åºè¢«ä¸­æ–­æ—¶å®Œæˆæ¸…ç†å·¥ä½œ</strong>ã€‚</p></blockquote><p><a href="https://man.linuxde.net/trap">trapå‘½ä»¤</a></p><h3 id="trapåœ¨é€€å‡ºæ—¶æ¸…é™¤åå°"><a href="#trapåœ¨é€€å‡ºæ—¶æ¸…é™¤åå°" class="headerlink" title="trapåœ¨é€€å‡ºæ—¶æ¸…é™¤åå°"></a>trapåœ¨é€€å‡ºæ—¶æ¸…é™¤åå°</h3><p><a href="https://spin.atomicobject.com/2017/08/24/start-stop-bash-background-process/">Simple Way to Start (and Stop!) Background Processes in Bash</a></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">trap</span> <span class="token string">"exit"</span> INT <span class="token environment constant">TERM</span> ERR<span class="token builtin class-name">trap</span> <span class="token string">"echo killing whole process; kill 0"</span> EXIT<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="shell-bashåˆ¤æ–­æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨"><a href="#shell-bashåˆ¤æ–­æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨" class="headerlink" title="shell bashåˆ¤æ–­æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨"></a>shell bashåˆ¤æ–­æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨</h2><p><a href="https://www.cnblogs.com/emanlee/p/3583769.html">shell bashåˆ¤æ–­æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨</a></p><blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#shellåˆ¤æ–­æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨</span><span class="token comment">#å¦‚æœæ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–‡ä»¶å¤¹</span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"/myfolder"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>  <span class="token function">mkdir</span> /myfolder<span class="token keyword">fi</span><span class="token comment">#shellåˆ¤æ–­æ–‡ä»¶,ç›®å½•æ˜¯å¦å­˜åœ¨æˆ–è€…å…·æœ‰æƒé™</span><span class="token assign-left variable">folder</span><span class="token operator">=</span><span class="token string">"/var/www/"</span><span class="token assign-left variable">file</span><span class="token operator">=</span><span class="token string">"/var/www/log"</span><span class="token comment"># -x å‚æ•°åˆ¤æ–­ $folder æ˜¯å¦å­˜åœ¨å¹¶ä¸”æ˜¯å¦å…·æœ‰å¯æ‰§è¡Œæƒé™</span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -x <span class="token string">"<span class="token variable">$folder</span>"</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>  <span class="token function">mkdir</span> <span class="token string">"<span class="token variable">$folder</span>"</span><span class="token keyword">fi</span><span class="token comment"># -d å‚æ•°åˆ¤æ–­ $folder æ˜¯å¦å­˜åœ¨</span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$folder</span>"</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>  <span class="token function">mkdir</span> <span class="token string">"<span class="token variable">$folder</span>"</span><span class="token keyword">fi</span><span class="token comment"># -f å‚æ•°åˆ¤æ–­ $file æ˜¯å¦å­˜åœ¨</span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -f <span class="token string">"<span class="token variable">$file</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>  <span class="token function">touch</span> <span class="token string">"<span class="token variable">$file</span>"</span><span class="token keyword">fi</span><span class="token comment"># -n åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦æœ‰å€¼</span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -n <span class="token string">"<span class="token variable">$var</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>  <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$var</span> is empty"</span>  <span class="token builtin class-name">exit</span> <span class="token number">0</span><span class="token keyword">fi</span><span class="token comment"># åˆ¤æ–­ä¸¤ä¸ªå˜é‡æ˜¯å¦ç›¸ç­‰</span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$var1</span>"</span> <span class="token operator">=</span> <span class="token string">"<span class="token variable">$var2</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>  <span class="token builtin class-name">echo</span> <span class="token string">'<span class="token variable">$var1</span> eq <span class="token variable">$var2</span>'</span><span class="token keyword">else</span>  <span class="token builtin class-name">echo</span> <span class="token string">'<span class="token variable">$var1</span> not eq <span class="token variable">$var2</span>'</span><span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><p>é‡ç‚¹çœ‹è¿™ä¸ª</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># -d å‚æ•°åˆ¤æ–­ $folder æ˜¯å¦å­˜åœ¨</span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$folder</span>"</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>  <span class="token function">mkdir</span> <span class="token string">"<span class="token variable">$folder</span>"</span><span class="token keyword">fi</span><span class="token comment"># -f å‚æ•°åˆ¤æ–­ $file æ˜¯å¦å­˜åœ¨</span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -f <span class="token string">"<span class="token variable">$file</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>  <span class="token function">touch</span> <span class="token string">"<span class="token variable">$file</span>"</span><span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id><a href="#" class="headerlink" title></a></h2><h2 id="æå–å­—ç¬¦ä¸²ä¸­çš„æ•°å­—"><a href="#æå–å­—ç¬¦ä¸²ä¸­çš„æ•°å­—" class="headerlink" title="æå–å­—ç¬¦ä¸²ä¸­çš„æ•°å­—"></a>æå–å­—ç¬¦ä¸²ä¸­çš„æ•°å­—</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">temp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> $filename <span class="token operator">|</span> <span class="token function">tr</span> -cd <span class="token string">"[0-9]"</span><span class="token variable">`</span></span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><p><code>-c</code>è¡¨ç¤ºå–å</p></li><li><p> <code>-d</code>è¡¨ç¤ºå»é™¤</p></li></ul><p>æ„æ€å°±æ˜¯å»é™¤æ‰éæ•°å­—å­—ç¬¦ï¼ˆä¸åœ¨<code>[0-9]</code>çš„å­—ç¬¦ï¼‰ï¼Œå‰©ä¸‹çš„è‡ªç„¶æ˜¯æ•°å­—</p><h2 id="å¤šè¿›ç¨‹-å¤šçº¿ç¨‹"><a href="#å¤šè¿›ç¨‹-å¤šçº¿ç¨‹" class="headerlink" title="å¤šè¿›ç¨‹/å¤šçº¿ç¨‹"></a>å¤šè¿›ç¨‹/å¤šçº¿ç¨‹</h2><p><a href="https://justcode.ikeepstudying.com/2018/02/linux-shell%E5%AE%9E%E7%8E%B0%E5%A4%9A%E7%BA%BF%E7%A8%8B-forking-multi-threaded-processes-bash/">Linux: shellå®ç°å¤šçº¿ç¨‹, Forking / Multi-Threaded Processes | Bash, shell çº¿ç¨‹æ± </a> å¼ºçƒˆæ¨èè¿™ä¸ªï¼Œè¯´çš„éå¸¸è¯¦ç»†ï¼Œå¾ˆokï¼</p><p><a href="https://cloud.tencent.com/developer/article/1527555">Shell è„šæœ¬å®ç°å¹¶å‘å¤šè¿›ç¨‹ äº†è§£ä¸€ä¸‹~</a>ï¼Œè¿™ä¸ªå¯¹åº”ä¸‹é¢çš„ç¬¬å››ç§æ–¹æ³•</p><p><a href="https://segmentfault.com/a/1190000020531589">Shellå¤šè¿›ç¨‹æ‰§è¡Œä»»åŠ¡</a> è¯¦ç»†ä»‹ç»äº†å‰ä¸‰ç§æ–¹æ³•ï¼Œç‰¹åˆ«æ˜¯ç®¡é“çš„å«ä¹‰</p><p>ä¸»è¦æœ‰å››ç§æ–¹å¼ï¼š</p><ol><li>å¾ªç¯å¼€å¤šä¸ªå‰å°ä»»åŠ¡ï¼Œä¸²è¡Œçš„</li><li>å¾ªç¯å¼€å¤šä¸ªåå°ä»»åŠ¡ï¼Œç”±äºæ‰€æœ‰ä»»åŠ¡éƒ½ä¸€èµ·æ”¾åˆ°äº†åå°ï¼Œå› æ­¤æ¯”è¾ƒè€—è´¹èµ„æº</li><li>å¼€ç®¡é“é˜Ÿåˆ—ï¼Œç±»ä¼¼pythonçš„Queueï¼Œå¤šè¿›ç¨‹</li><li>parallelå‘½ä»¤ï¼ˆTODOï¼Œ<strong>å¼ºçƒˆæ¨èï¼Œéœ€è¦æ·±å…¥å­¦ä¹ </strong>ï¼‰</li><li>ç”¨arrayæ¨¡æ‹Ÿé˜Ÿåˆ—ï¼ˆDeprecatedï¼Œå¤ªå¤æ‚æ²¡æ„ä¹‰ï¼‰</li></ol><h3 id="å¾ªç¯å¼€å¤šä¸ªå‰å°ä»»åŠ¡"><a href="#å¾ªç¯å¼€å¤šä¸ªå‰å°ä»»åŠ¡" class="headerlink" title="å¾ªç¯å¼€å¤šä¸ªå‰å°ä»»åŠ¡"></a>å¾ªç¯å¼€å¤šä¸ªå‰å°ä»»åŠ¡</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span><span class="token assign-left variable">start</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> <span class="token string">"+%s"</span><span class="token variable">`</span></span><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">10</span><span class="token punctuation">&#125;</span><span class="token keyword">do</span>    <span class="token builtin class-name">echo</span> <span class="token variable">$i</span><span class="token punctuation">;</span>    <span class="token function">sleep</span> <span class="token number">2</span><span class="token keyword">done</span><span class="token assign-left variable">end</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> <span class="token string">"+%s"</span><span class="token variable">`</span></span><span class="token builtin class-name">echo</span> <span class="token string">"Time: <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $end - $start<span class="token variable">`</span></span>"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¾ªç¯ç›´æ¥å¼€å¤šä¸ªåå°ä»»åŠ¡"><a href="#å¾ªç¯ç›´æ¥å¼€å¤šä¸ªåå°ä»»åŠ¡" class="headerlink" title="å¾ªç¯ç›´æ¥å¼€å¤šä¸ªåå°ä»»åŠ¡"></a>å¾ªç¯ç›´æ¥å¼€å¤šä¸ªåå°ä»»åŠ¡</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span><span class="token assign-left variable">Njob</span><span class="token operator">=</span><span class="token number">15</span><span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>$Njob<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span>          <span class="token builtin class-name">echo</span>  <span class="token string">"progress <span class="token variable">$i</span> is sleeping for 3 seconds zzzâ€¦"</span>          <span class="token function">sleep</span>  <span class="token number">3</span> <span class="token operator">&amp;</span>       <span class="token comment">#å¾ªç¯å†…å®¹æ”¾åˆ°åå°æ‰§è¡Œ</span><span class="token keyword">done</span><span class="token function">wait</span>      <span class="token comment">#ç­‰å¾…å¾ªç¯ç»“æŸå†æ‰§è¡Œwaitåé¢çš„å†…å®¹</span><span class="token builtin class-name">echo</span> -e <span class="token string">"time-consuming: <span class="token environment constant">$SECONDS</span>    seconds"</span>    <span class="token comment">#æ˜¾ç¤ºè„šæœ¬æ‰§è¡Œè€—æ—¶</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¼€ç®¡é“é˜Ÿåˆ—ï¼Œç±»ä¼¼pythonçš„Queueï¼Œå¤šè¿›ç¨‹"><a href="#å¼€ç®¡é“é˜Ÿåˆ—ï¼Œç±»ä¼¼pythonçš„Queueï¼Œå¤šè¿›ç¨‹" class="headerlink" title="å¼€ç®¡é“é˜Ÿåˆ—ï¼Œç±»ä¼¼pythonçš„Queueï¼Œå¤šè¿›ç¨‹"></a>å¼€ç®¡é“é˜Ÿåˆ—ï¼Œç±»ä¼¼pythonçš„Queueï¼Œå¤šè¿›ç¨‹</h3><p>å°±æ˜¯ä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦+ç®¡é“ï¼Œæ¨¡æ‹Ÿä¸€ä¸ªFIFOçš„é˜Ÿåˆ—</p><p>å‘½ä»¤çš„ä¸€äº›å«ä¹‰å¯ä»¥å‚è€ƒ <a href="https://blog.csdn.net/yeweiouyang/article/details/52512522">[Linux]Linux Shellå¤šè¿›ç¨‹å¹¶å‘ä»¥åŠå¹¶å‘æ•°æ§åˆ¶</a></p><ol><li>trapçš„å«ä¹‰ï¼š</li></ol><blockquote><ul><li>ç¬¬26è¡Œï¼šè¡¨ç¤ºåœ¨è„šæœ¬è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ¥æ”¶åˆ°<code>Ctrl+C</code>ä¸­æ–­å‘½ä»¤ï¼Œåˆ™å…³é—­æ–‡ä»¶æè¿°ç¬¦1000çš„è¯»å†™ï¼Œå¹¶æ­£å¸¸é€€å‡º<ul><li><code>exec 1000&gt;&amp;-;</code>è¡¨ç¤ºå…³é—­æ–‡ä»¶æè¿°ç¬¦1000çš„å†™</li><li><code>exec 1000&lt;&amp;-;</code>è¡¨ç¤ºå…³é—­æ–‡ä»¶æè¿°ç¬¦1000çš„è¯»</li><li>trapæ˜¯æ•è·ä¸­æ–­å‘½ä»¤</li></ul></li></ul></blockquote><ol start="2"><li>æè¿°ç¬¦çš„å«ä¹‰ï¼š</li></ol><blockquote><ul><li>ç¬¬27ï½29è¡Œï¼š<ul><li>ç¬¬27è¡Œï¼Œåˆ›å»ºä¸€ä¸ªç®¡é“æ–‡ä»¶</li><li>ç¬¬28è¡Œï¼Œå°†æ–‡ä»¶æè¿°ç¬¦1000ä¸FIFOè¿›è¡Œç»‘å®šï¼Œ&lt;è¯»çš„ç»‘å®šï¼Œ&gt;å†™çš„ç»‘å®šï¼Œ&lt;&gt;åˆ™æ ‡è¯†å¯¹æ–‡ä»¶æè¿°ç¬¦1000çš„æ‰€æœ‰æ“ä½œç­‰åŒäºå¯¹ç®¡é“æ–‡ä»¶$tempfifoçš„æ“ä½œ</li><li>ç¬¬29è¡Œï¼Œå¯èƒ½ä¼šæœ‰è¿™æ ·çš„ç–‘é—®ï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨ç®¡é“æ–‡ä»¶å‘¢ï¼Ÿäº‹å®ä¸Šè¿™å¹¶éå¤šæ­¤ä¸€ä¸¾ï¼Œç®¡é“çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œå°±æ˜¯è¯»å†™å¿…é¡»åŒæ—¶å­˜åœ¨ï¼Œç¼ºå¤±æŸä¸€ä¸ªæ“ä½œï¼Œå¦ä¸€ä¸ªæ“ä½œå°±æ˜¯æ»ç•™ï¼Œè€Œç¬¬28è¡Œçš„ç»‘å®šæ–‡ä»¶æè¿°ç¬¦ï¼ˆè¯»ã€å†™ç»‘å®šï¼‰æ­£å¥½è§£å†³äº†è¿™ä¸ªé—®é¢˜</li></ul></li></ul></blockquote><ol start="3"><li>å…¶ä½™å‘½ä»¤çš„å«ä¹‰</li></ol><blockquote><ul><li>ç¬¬31ï½34è¡Œï¼šå¯¹æ–‡ä»¶æè¿°ç¬¦1000è¿›è¡Œå†™å…¥æ“ä½œã€‚é€šè¿‡å¾ªç¯å†™å…¥8ä¸ªç©ºè¡Œï¼Œè¿™ä¸ª8å°±æ˜¯æˆ‘ä»¬è¦å®šä¹‰çš„åå°å¹¶å‘çš„çº¿ç¨‹æ•°ã€‚ä¸ºä»€ä¹ˆæ˜¯å†™ç©ºè¡Œè€Œä¸æ˜¯å†™å…¶å®ƒå­—ç¬¦ï¼Ÿå› ä¸ºç®¡é“æ–‡ä»¶çš„è¯»å–ï¼Œæ˜¯ä»¥è¡Œä¸ºå•ä½çš„</li><li>ç¬¬37ï½42è¡Œï¼š<ul><li>ç¬¬37è¡Œï¼Œread -u1000çš„ä½œç”¨å°±æ˜¯è¯»å–ç®¡é“ä¸­çš„ä¸€è¡Œï¼Œåœ¨è¿™é‡Œå°±æ˜¯è¯»å–ä¸€ä¸ªç©ºè¡Œï¼›æ¯æ¬¡è¯»å–ç®¡é“å°±ä¼šå‡å°‘ä¸€ä¸ªç©ºè¡Œ</li><li>ç¬¬39ï½41è¡Œï¼Œæ³¨æ„åˆ°ç¬¬42è¡Œç»“å°¾çš„&amp;å—ï¼Ÿå®ƒè¡¨ç¤ºè¿›ç¨‹æ”¾åˆ°linuxåå°ä¸­æ‰§è¡Œ</li><li>ç¬¬41è¡Œï¼Œæ‰§è¡Œå®Œåå°ä»»åŠ¡ä¹‹åï¼Œå¾€æ–‡ä»¶æè¿°ç¬¦1000ä¸­å†™å…¥ä¸€ä¸ªç©ºè¡Œã€‚è¿™æ˜¯å…³é”®æ‰€åœ¨äº†ï¼Œç”±äºread -u1000æ¯æ¬¡æ“ä½œï¼Œéƒ½ä¼šå¯¼è‡´ç®¡é“å‡å°‘ä¸€ä¸ªç©ºè¡Œï¼Œå½“linuxåå°æ”¾å…¥äº†8ä¸ªä»»åŠ¡ä¹‹åï¼Œç”±äºæ–‡ä»¶æè¿°ç¬¦1000æ²¡æœ‰å¯è¯»å–çš„ç©ºè¡Œï¼Œå°†å¯¼è‡´read -u1000ä¸€ç›´å¤„äºç­‰å¾…ã€‚</li></ul></li></ul></blockquote><p>æ¨¡ç‰ˆï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">trap</span> <span class="token string">"exit"</span> INT <span class="token environment constant">TERM</span> ERR<span class="token builtin class-name">trap</span> <span class="token string">"echo killing whole process; kill 0"</span> EXIT <span class="token comment"># æ¨å‡ºæ—¶æ¸…é™¤æ‰€æœ‰è¿›ç¨‹</span><span class="token comment"># å¯¹åº”çš„è¿›ç¨‹æ•°</span><span class="token assign-left variable">Nproc</span><span class="token operator">=</span><span class="token number">5</span><span class="token function">mkfifo</span> ./fifo.<span class="token variable">$$</span><span class="token builtin class-name">exec</span> <span class="token number">66</span><span class="token operator"><span class="token file-descriptor important">6</span>&lt;></span> ./fifo.<span class="token variable">$$</span><span class="token function">rm</span> -f ./fifo.<span class="token variable">$$</span><span class="token builtin class-name">trap</span> <span class="token string">"exec 666>&amp;-;exec 666&lt;&amp;-;exit 0"</span> <span class="token number">2</span><span class="token keyword">for</span><span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>$Nproc<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span><span class="token builtin class-name">echo</span> <span class="token operator">>&amp;</span> <span class="token number">666</span><span class="token keyword">done</span><span class="token assign-left variable">path</span><span class="token operator">=</span><span class="token variable">$1</span><span class="token assign-left variable">files</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span> $path<span class="token variable">)</span></span><span class="token keyword">for</span> <span class="token for-or-select variable">filename</span> <span class="token keyword">in</span> <span class="token variable">$files</span><span class="token punctuation">;</span> <span class="token keyword">do</span><span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$filename</span> <span class="token operator">==</span> *.pb <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token keyword">then</span><span class="token punctuation">&#123;</span><span class="token builtin class-name">read</span> -u <span class="token number">666</span><span class="token comment"># å¾ªç¯è¦æ‰§è¡Œçš„æ”¾åœ¨è¿™</span><span class="token builtin class-name">echo</span> <span class="token operator">>&amp;</span> <span class="token number">666</span><span class="token punctuation">&#125;</span><span class="token operator">&amp;</span><span class="token keyword">fi</span><span class="token keyword">done</span><span class="token function">wait</span><span class="token builtin class-name">echo</span> -e <span class="token string">"time-consuming:<span class="token environment constant">$SECONDS</span> seconds"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åœ¨shell-scriptsä¸­åˆ‡æ¢condaç¯å¢ƒï¼ˆconda-activateï¼‰"><a href="#åœ¨shell-scriptsä¸­åˆ‡æ¢condaç¯å¢ƒï¼ˆconda-activateï¼‰" class="headerlink" title="åœ¨shell scriptsä¸­åˆ‡æ¢condaç¯å¢ƒï¼ˆconda activateï¼‰"></a>åœ¨shell scriptsä¸­åˆ‡æ¢condaç¯å¢ƒï¼ˆconda activateï¼‰</h2><p>å‚è€ƒ <a href="https://github.com/conda/conda/issues/7980#issuecomment-441358406">Canâ€™t execute <code>conda activate</code> from bash script</a></p><ol><li>é€šè¿‡<code>conda info | grep -i &#39;base environment&#39;</code>æŸ¥æ‰¾condaçš„å®‰è£…ä½ç½®</li><li>é€šè¿‡ä»¥ä¸‹å‘½ä»¤</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">source</span> ~/anaconda3/etc/profile.d/conda.sh <span class="token comment"># replace ~/anaconda3/ with path found above</span>conda activate my_env<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ¯”å¦‚ä¸‹é¢ï¼Œå°±å¯ä»¥çœ‹åˆ°å·²ç»åˆ‡æ¢è¿‡æ¥äº†</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">source</span> /cm/shared/apps/anaconda3/etc/profile.d/conda.shconda activate multimodalconda <span class="token function">env</span> list<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="æ‹¼æ¥è·¯å¾„"><a href="#æ‹¼æ¥è·¯å¾„" class="headerlink" title="æ‹¼æ¥è·¯å¾„"></a>æ‹¼æ¥è·¯å¾„</h2><p>å‚è€ƒ</p><ol><li><a href="https://stackoverflow.com/a/30187926">https://stackoverflow.com/a/30187926</a></li><li><a href="https://stackoverflow.com/a/11226444">https://stackoverflow.com/a/11226444</a></li></ol><p>æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><ol><li>ç¬¬ä¸€ç§é’ˆå¯¹å­—ç¬¦ä¸²</li><li>ç¬¬äºŒç§æ˜¯é’ˆå¯¹å‘½ä»¤åµŒå¥—ã€‚<strong>å› ä¸ºç¬¬äºŒç§ç­‰ä»·äºå¼€ä¸€ä¸ªsub shellæ‰§è¡Œå‘½ä»¤ç„¶åè¿”å›ç»“æœ</strong></li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">##### æ³•ä¸€ï¼šç”¨$&#123;&#125;</span><span class="token comment">#!/bin/bash</span><span class="token builtin class-name">read</span> -p <span class="token string">"Enter a directory: "</span> BASEPATH<span class="token assign-left variable">SUBFOLD1</span><span class="token operator">=</span><span class="token variable">$&#123;BASEPATH<span class="token operator">%%</span><span class="token operator">/</span>&#125;</span>/subFold1<span class="token assign-left variable">SUBFOLD2</span><span class="token operator">=</span><span class="token variable">$&#123;BASEPATH<span class="token operator">%%</span><span class="token operator">/</span>&#125;</span>/subFold2<span class="token builtin class-name">echo</span> <span class="token string">"I will create <span class="token variable">$SUBFOLD1</span> and <span class="token variable">$SUBFOLD2</span>"</span><span class="token comment"># mkdir -p $SUBFOLD1</span><span class="token comment"># mkdir -p $SUBFOLD2</span><span class="token comment">###### æ³•äºŒï¼šç”¨$()</span><span class="token assign-left variable">path</span><span class="token operator">=</span><span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/some/path"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;åˆ¤æ–­è¾“å…¥è„šæœ¬ï¼ˆå‡½æ•°ï¼‰çš„å‚æ•°ä¸ªæ•°&quot;&gt;&lt;a href=&quot;#åˆ¤æ–­è¾“å…¥è„šæœ¬ï¼ˆå‡½æ•°ï¼‰çš„å‚æ•°ä¸ªæ•°&quot; class=&quot;headerlink&quot; title=&quot;åˆ¤æ–­è¾“å…¥è„šæœ¬ï¼ˆå‡½æ•°ï¼‰çš„å‚æ•°ä¸ªæ•°&quot;&gt;&lt;/a&gt;åˆ¤æ–­è¾“å…¥è„šæœ¬ï¼ˆå‡½æ•°ï¼‰çš„å‚æ•°ä¸ªæ•°&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://s</summary>
      
    
    
    
    <category term="linux" scheme="https://khalitt.github.io/categories/linux/"/>
    
    
    <category term="linux" scheme="https://khalitt.github.io/tags/linux/"/>
    
    <category term="shell" scheme="https://khalitt.github.io/tags/shell/"/>
    
  </entry>
  
</feed>
