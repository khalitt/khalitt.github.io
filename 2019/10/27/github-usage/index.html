<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>github使用 | null</title><meta name="keywords" content="github"><meta name="author" content="Walter"><meta name="copyright" content="Walter"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="github删除子模块参考这个 git submodule deinit &lt;asubmodule&gt;     git rm &lt;asubmodule&gt; # Note: asubmodule (no trailing slash) # or, if you want to leave it in your working tree git rm --cached &lt;asubmodule">
<meta property="og:type" content="article">
<meta property="og:title" content="github使用">
<meta property="og:url" content="https://khalitt.github.io/2019/10/27/github-usage/index.html">
<meta property="og:site_name">
<meta property="og:description" content="github删除子模块参考这个 git submodule deinit &lt;asubmodule&gt;     git rm &lt;asubmodule&gt; # Note: asubmodule (no trailing slash) # or, if you want to leave it in your working tree git rm --cached &lt;asubmodule">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg">
<meta property="article:published_time" content="2019-10-27T03:01:53.000Z">
<meta property="article:modified_time" content="2021-01-13T14:24:40.066Z">
<meta property="article:author" content="Walter">
<meta property="article:tag" content="github">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://khalitt.github.io/2019/10/27/github-usage/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"5100G1WE6M","apiKey":"c2a0f74ed768aa33e0c961937aa244bc","indexName":"prob_khalitt_github_io2","hits":{"per_page":6},"languages":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}.","hits_stats":"${hits} results found in ${time} ms"}},
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-01-13 22:24:40'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/null" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">50</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">44</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">20</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-musicW"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/"></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-musicW"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">github使用</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2019-10-27T03:01:53.000Z" title="Created 2019-10-27 11:01:53">2019-10-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-01-13T14:24:40.066Z" title="Updated 2021-01-13 22:24:40">2021-01-13</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">1.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>8min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="github删除子模块"><a href="#github删除子模块" class="headerlink" title="github删除子模块"></a>github删除子模块</h2><p>参考<br><a target="_blank" rel="noopener" href="https://stackoverflow.com/a/29850245">这个</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> submodule deinit <span class="token operator">&lt;</span>asubmodule<span class="token operator">></span>    
<span class="token function">git</span> <span class="token function">rm</span> <span class="token operator">&lt;</span>asubmodule<span class="token operator">></span>
<span class="token comment"># Note: asubmodule (no trailing slash)</span>
<span class="token comment"># or, if you want to leave it in your working tree</span>
<span class="token function">git</span> <span class="token function">rm</span> --cached <span class="token operator">&lt;</span>asubmodule<span class="token operator">></span>
<span class="token function">rm</span> -rf .git/modules/<span class="token operator">&lt;</span>asubmodule<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="插入自定义代码块"><a href="#插入自定义代码块" class="headerlink" title="插入自定义代码块"></a>插入自定义代码块</h2><p><a target="_blank" rel="noopener" href="https://snippet-generator.app/?description=website&tabtrigger=wbs&snippet=%5B$1%5D($2)$0&mode=vscode">snippet generator</a></p>
<p>直接在上述网址中输入即可</p>
<h2 id="删除remote上的commit"><a href="#删除remote上的commit" class="headerlink" title="删除remote上的commit"></a>删除remote上的commit</h2><ul>
<li><p>思路就是先从本地的log中找出所需的commit，然后本地先回滚，然后push -f 强行改写remote上的记录即可</p>
</li>
<li><p>具体操作如下：</p>
<ul>
<li><p>通过revert来（commit还是保留了下来）</p>
<ol>
<li><p>首先通过 <code>git log</code> 获得所有commit 挑选出需要的</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> revert <span class="token operator">&lt;</span>commit<span class="token operator">></span>       
<span class="token function">git</span> push -f <span class="token operator">&lt;</span>remote<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
</ol>
</li>
<li><p>通过reset来（之后的commit都丢弃）</p>
  <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> reset --hard <span class="token operator">&lt;</span>commit<span class="token operator">></span>       
<span class="token function">git</span> push -f <span class="token operator">&lt;</span>remote<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="设置或者取消代理"><a href="#设置或者取消代理" class="headerlink" title="设置或者取消代理"></a>设置或者取消代理</h2></li>
</ul>
</li>
</ul>
<h3 id="设置全局代理"><a href="#设置全局代理" class="headerlink" title="设置全局代理"></a>设置全局代理</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config --global https.proxy http://127.0.0.1:1080
<span class="token function">git</span> config --global https.proxy https://127.0.0.1:1080<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="取消代理"><a href="#取消代理" class="headerlink" title="取消代理"></a>取消代理</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config --global --unset http.proxy
<span class="token function">git</span> config --global --unset https.proxy<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<h1 id="添加remote"><a href="#添加remote" class="headerlink" title="添加remote"></a>添加remote</h1><p><a target="_blank" rel="noopener" href="https://docs.github.com/en/free-pro-team@latest/github/using-git/adding-a-remote">Adding a remote</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> remote <span class="token function">add</span> origin https://github.com/user/repo.git
<span class="token comment"># Set a new remote</span>

$ <span class="token function">git</span> remote -v
<span class="token comment"># Verify new remote</span>
<span class="token operator">></span> origin  https://github.com/user/repo.git <span class="token punctuation">(</span>fetch<span class="token punctuation">)</span>
<span class="token operator">></span> origin  https://github.com/user/repo.git <span class="token punctuation">(</span>push<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h1 id="git-add所有文件，但排除一部分"><a href="#git-add所有文件，但排除一部分" class="headerlink" title="git add所有文件，但排除一部分"></a><code>git add</code>所有文件，但排除一部分</h1><p>参考 <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/4475457/add-all-files-to-a-commit-except-a-single-file">Add all files to a commit except a single file?</a></p>
<blockquote>
<p>Now <code>git</code> supports <code>exclude certain paths and files</code> by pathspec magic <code>:(exclude)</code> and its short form <code>:!</code>. So you can easily achieve it as the following command.</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">add</span> --all -- :<span class="token operator">!</span>main/dontcheckmein.txt
<span class="token function">git</span> <span class="token function">add</span> -- <span class="token builtin class-name">.</span> :<span class="token operator">!</span>main/dontcheckmein.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>Actually you can specify more:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">add</span> --all -- :<span class="token operator">!</span>path/to/file1 :<span class="token operator">!</span>path/to/file2 :<span class="token operator">!</span>path/to/folder1/*
<span class="token function">git</span> <span class="token function">add</span> -- <span class="token builtin class-name">.</span> :<span class="token operator">!</span>path/to/file1 :<span class="token operator">!</span>path/to/file2 :<span class="token operator">!</span>path/to/folder1/*<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>For Mac and Linux, surround each file/folder path with quotes</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">add</span> --all -- <span class="token string">':!path/to/file1'</span> <span class="token string">':!path/to/file2'</span> <span class="token string">':!path/to/folder1/*'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</blockquote>
<p>使用：</p>
<ol>
<li>尝试在dry mode下看看add的文件：eg:<code>git add -n -- . :!pytorch_new_templates\configs\image_single_frame\*</code></li>
<li>确认无误后继续添加</li>
</ol>
<h1 id="使用github-template"><a href="#使用github-template" class="headerlink" title="使用github template"></a>使用github template</h1><h2 id="基本步骤"><a href="#基本步骤" class="headerlink" title="基本步骤"></a>基本步骤</h2><ol>
<li>在其他人的template repository中点击use this template，创建一个属于自己的且基于该template的repo</li>
<li>clone到本地，<code>git remote add</code>，注意要添加两个remote：自己的repo和template的repo（尤其后者，这样能保证fetch updates）</li>
</ol>
<img src="https://raw.githubusercontent.com/khalitt/IMG_REPO/master/20210113213442.png" align="center/">



<ol start="3">
<li>照常fetch pull</li>
<li>设置branch，注意要设置到本地的branch</li>
</ol>
<h2 id="template和当前仓库之间的关系"><a href="#template和当前仓库之间的关系" class="headerlink" title="template和当前仓库之间的关系"></a>template和当前仓库之间的关系</h2><p>参考 <a target="_blank" rel="noopener" href="https://softwareengineering.stackexchange.com/a/378052">how to merge or update a template repository?</a></p>
<p>理论上二者是没关系的，本质上上面这种方法类似于<a target="_blank" rel="noopener" href="https://docs.github.com/en/free-pro-team@latest/github/getting-started-with-github/fork-a-repo">fork</a>，因此fetch updates时参考<a target="_blank" rel="noopener" href="https://docs.github.com/en/free-pro-team@latest/github/collaborating-with-issues-and-pull-requests/syncing-a-fork">Syncing a fork</a></p>
<h1 id="删除remote"><a href="#删除remote" class="headerlink" title="删除remote"></a>删除remote</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">usage: <span class="token function">git</span> remote remove <span class="token operator">&lt;</span>name<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<h1 id="解决Git中fatal-refusing-to-merge-unrelated-histories"><a href="#解决Git中fatal-refusing-to-merge-unrelated-histories" class="headerlink" title="解决Git中fatal: refusing to merge unrelated histories"></a>解决Git中fatal: refusing to merge unrelated histories</h1><p>在你操作命令后面加<code>--allow-unrelated-histories</code></p>
<p>例如：<br><code>git merge master --allow-unrelated-histories</code></p>
<pre class="line-numbers language-none"><code class="language-none">~&#x2F;SpringSpace&#x2F;newframe on  druid ⌚ 11:36:49
$ git merge master --allow-unrelated-histories
Auto-merging .gitignore
CONFLICT (add&#x2F;add): Merge conflict in .gitignore
Automatic merge failed; fix conflicts and then commit the result.12345<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果你是<code>git pull</code>或者<code>git push</code>报<code>fatal: refusing to merge unrelated histories</code><br>同理：<br><code>git pull origin master --allow-unrelated-histories</code><br>等等，就是这样完美的解决咯！</p>
<h1 id="停止track原来被track-的文件（修改gitignore后马上生效）"><a href="#停止track原来被track-的文件（修改gitignore后马上生效）" class="headerlink" title="停止track原来被track 的文件（修改gitignore后马上生效）"></a>停止track原来被track 的文件（修改gitignore后马上生效）</h1><p>参考 <a target="_blank" rel="noopener" href="https://stackoverflow.com/a/1274447">How to make Git “forget” about a file that was tracked but is now in .gitignore?</a></p>
<p><code>.gitignore</code> will <strong>prevent untracked files from being added</strong> (without an <code>add -f</code>) to the set of files tracked by git, <strong>however git will continue to track any files that are already being tracked</strong>.</p>
<p>To stop tracking a file you need to remove it from the index. This can be achieved with this command.</p>
<pre class="line-numbers language-none"><code class="language-none">git rm --cached &lt;file&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>If you want to remove a whole folder, you need to remove all files in it recursively.</p>
<pre class="line-numbers language-none"><code class="language-none">git rm -r --cached &lt;folder&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>The removal of the file from the head revision will happen on the next commit.</p>
<p><strong>WARNING: While this will not remove the physical file from your local, it will remove the files from other developers machines on next <code>git pull</code>.</strong></p>
<h1 id="uncommitt：reset"><a href="#uncommitt：reset" class="headerlink" title="uncommitt：reset"></a>uncommitt：reset</h1><p>参考 <a target="_blank" rel="noopener" href="https://stackoverflow.com/a/2846154">How to uncommit my last commit in Git [duplicate]</a></p>
<p>If you aren’t totally sure what you mean by “uncommit” and don’t know if you want to use <code>git reset</code>, please see “<a target="_blank" rel="noopener" href="https://stackoverflow.com/q/4114095/119963">Revert to a previous Git commit</a>“.</p>
<p>If you’re trying to understand <code>git reset</code> better, please see “<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/2530060/can-you-explain-what-git-reset-does-in-plain-english">Can you explain what “git reset” does in plain English?</a>“.</p>
<hr>
<ul>
<li>仅仅uncommit：If you know you want to use <code>git reset</code>, it still depends what you mean by “uncommit”. If all you want to do is <strong>undo the act of committing, leaving everything else intact</strong>, use:</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">git reset --soft HEAD^<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>uncommit + 从staged files中删去：If you want to **undo the act of committing and everything you’d staged, but leave the work tree (your files intact):</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">git reset HEAD^<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>uncommit + 从staged files中删去 + 去除修改：And if you actually want to <em>completely</em> undo it, <strong>throwing away all uncommitted changes, resetting everything to the previous commit</strong> (as the original question asked):</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">git reset --hard HEAD^<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<hr>
<p>The original question also asked it’s <code>HEAD^</code> not <code>HEAD</code>. <code>HEAD</code> refers to the current commit - generally, the tip of the currently checked-out branch. The <code>^</code> is a notation which can be attached to <em>any</em> commit specifier, and means “the commit before”. So, <code>HEAD^</code> is the commit before the current one, just as <code>master^</code> is the commit before the tip of the master branch.</p>
<p>Here’s the portion of the <a target="_blank" rel="noopener" href="http://linux.die.net/man/1/git-rev-parse">git-rev-parse documentation</a> describing all of the ways to specify commits (<code>^</code> is just a basic one among many).</p>
<p>另一个方法：</p>
<h2 id="Undo-a-commit-amp-redo"><a href="#Undo-a-commit-amp-redo" class="headerlink" title="Undo a commit &amp; redo"></a>Undo a commit &amp; redo</h2><pre class="line-numbers language-sh" data-language="sh"><code class="language-sh">$ git commit -m &quot;Something terribly misguided&quot; # (0: Your Accident)
$ git reset HEAD~                              # (1)
[ edit files as necessary ]                    # (2)
$ git add .                                    # (3)
$ git commit -c ORIG_HEAD                      # (4)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol>
<li>This command is responsible for the <strong>undo</strong>. It will undo your last commit while <strong>leaving your working tree (the state of your files on disk) untouched.</strong> You’ll need to add them again before you can commit them again).</li>
<li>Make corrections to working tree files.</li>
<li><code>git add</code> anything that you want to include in your new commit.</li>
<li>Commit the changes, reusing the old commit message. <code>reset</code> copied the old head to <code>.git/ORIG_HEAD</code>; <code>commit</code> with <code>-c ORIG_HEAD</code> will open an editor, which initially contains the log message from the old commit and allows you to edit it. If you do not need to edit the message, you could use the <code>-C</code> option.</li>
</ol>
<p><strong>Alternatively, to edit the previous commit (or just its commit message)</strong>, <code>commit --amend</code> will add changes within the current index to the previous commit.</p>
<p><strong>To remove (not revert) a commit that has been pushed to the server</strong>, rewriting history with <code>git push origin master --force</code> is necessary.</p>
<hr>
<h3 id="Further-Reading"><a href="#Further-Reading" class="headerlink" title="Further Reading"></a>Further Reading</h3><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/34519665/how-to-move-head-back-to-a-previous-location-detached-head/34519716#34519716">How can I move HEAD back to a previous location? (Detached head) &amp; Undo commits</a></p>
<p>The above answer will show you <code>git reflog</code>, which you can use to determine the SHA-1 for the commit to which you wish to revert. Once you have this value, use the sequence of commands as explained above.</p>
<hr>
<p><code>HEAD~</code> is the same as <code>HEAD~1</code>. The article <a target="_blank" rel="noopener" href="https://stackoverflow.com/a/46350644/5175709">What is the HEAD in git?</a> is helpful if you want to uncommit multiple commits.</p>
<h1 id="添加文件到last-commit-any-commit"><a href="#添加文件到last-commit-any-commit" class="headerlink" title="添加文件到last commit/any commit"></a>添加文件到last commit/any commit</h1><h2 id="添加到last-commit"><a href="#添加到last-commit" class="headerlink" title="添加到last commit"></a>添加到last commit</h2><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/a/40503483">How to add a file to the last commit in git? [duplicate]</a></p>
<pre class="line-numbers language-none"><code class="language-none">git add the_left_out_file
git commit --amend --no-edit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<h2 id="添加到任意commit"><a href="#添加到任意commit" class="headerlink" title="添加到任意commit"></a>添加到任意commit</h2><p>关键：找到sha-1</p>
<p>Use <a target="_blank" rel="noopener" href="http://git-scm.com/docs/git-rebase"><code>git rebase</code></a>. Specifically:</p>
<ol>
<li>Use <code>git stash</code> to store the changes you want to add.</li>
<li>Use <code>git rebase -i HEAD~10</code> (or however many commits back you want to see).</li>
<li>Mark the commit in question (<code>a0865...</code>) for edit by changing the word <code>pick</code> at the start of the line into <code>edit</code>. Don’t delete the other lines as that would delete the commits.</li>
<li>Save the rebase file, and git will drop back to the shell and wait for you to fix that commit.</li>
<li>Pop the stash by using <code>git stash pop</code></li>
<li>Add your file with <code>git add &lt;file&gt;</code>.</li>
<li>Amend the commit with <code>git commit --amend --no-edit</code>.</li>
<li>Do a <code>git rebase --continue</code> which will rewrite the rest of your commits against the new one.</li>
<li>Repeat from step 2 onwards if you have marked more than one commit for edit.</li>
</ol>
<p>If you are using <code>vim</code> then you will have to hit the Insert key to edit, then Esc and type in <code>:wq</code> to save the file, quit the editor, and apply the changes. Alternatively, you can <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/2596805/how-do-i-make-git-use-the-editor-of-my-choice-for-commits">configure a user-friendly git commit editor</a> with <code>git config --global core.editor &quot;nano&quot;</code>.</p>
<h2 id="发生You-must-edit-all-merge-conflicts-and-then-mark-them-as-resolved-using-git-add"><a href="#发生You-must-edit-all-merge-conflicts-and-then-mark-them-as-resolved-using-git-add" class="headerlink" title="发生You must edit all merge conflicts and then mark them as resolved using git add"></a>发生You must edit all merge conflicts and then mark them as resolved using git add</h2><img src="https://raw.githubusercontent.com/khalitt/IMG_REPO/master/20210113213538.png" align="center/">

<p>再把unstaged的文件add且commit后，再<code>git rebase --continue</code>即可</p>
<img src="https://raw.githubusercontent.com/khalitt/IMG_REPO/master/20210113213500.png" align="center/"></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Walter</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://khalitt.github.io/2019/10/27/github-usage/">https://khalitt.github.io/2019/10/27/github-usage/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/github/">github</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2019/10/30/tqdm-usage/"><img class="prev-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">tqdm使用</div></div></a></div><div class="next-post pull-right"><a href="/2019/10/11/pytorch-distributed/"><img class="next-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">pytorch分布式训练初探</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2019/09/09/hexo-blog-notes/" title="Hexo+Github搭建blog笔记（踩过的坑）"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-09-09</div><div class="title">Hexo+Github搭建blog笔记（踩过的坑）</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#github%E5%88%A0%E9%99%A4%E5%AD%90%E6%A8%A1%E5%9D%97"><span class="toc-number">1.</span> <span class="toc-text">github删除子模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BB%A3%E7%A0%81%E5%9D%97"><span class="toc-number">2.</span> <span class="toc-text">插入自定义代码块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4remote%E4%B8%8A%E7%9A%84commit"><span class="toc-number">3.</span> <span class="toc-text">删除remote上的commit</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E6%88%96%E8%80%85%E5%8F%96%E6%B6%88%E4%BB%A3%E7%90%86"><span class="toc-number">4.</span> <span class="toc-text">设置或者取消代理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%85%A8%E5%B1%80%E4%BB%A3%E7%90%86"><span class="toc-number">4.1.</span> <span class="toc-text">设置全局代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%96%E6%B6%88%E4%BB%A3%E7%90%86"><span class="toc-number">4.2.</span> <span class="toc-text">取消代理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0remote"><span class="toc-number"></span> <span class="toc-text">添加remote</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-add%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6%EF%BC%8C%E4%BD%86%E6%8E%92%E9%99%A4%E4%B8%80%E9%83%A8%E5%88%86"><span class="toc-number"></span> <span class="toc-text">git add所有文件，但排除一部分</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8github-template"><span class="toc-number"></span> <span class="toc-text">使用github template</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.</span> <span class="toc-text">基本步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#template%E5%92%8C%E5%BD%93%E5%89%8D%E4%BB%93%E5%BA%93%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">2.</span> <span class="toc-text">template和当前仓库之间的关系</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%A0%E9%99%A4remote"><span class="toc-number"></span> <span class="toc-text">删除remote</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3Git%E4%B8%ADfatal-refusing-to-merge-unrelated-histories"><span class="toc-number"></span> <span class="toc-text">解决Git中fatal: refusing to merge unrelated histories</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%81%9C%E6%AD%A2track%E5%8E%9F%E6%9D%A5%E8%A2%ABtrack-%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%88%E4%BF%AE%E6%94%B9gitignore%E5%90%8E%E9%A9%AC%E4%B8%8A%E7%94%9F%E6%95%88%EF%BC%89"><span class="toc-number"></span> <span class="toc-text">停止track原来被track 的文件（修改gitignore后马上生效）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#uncommitt%EF%BC%9Areset"><span class="toc-number"></span> <span class="toc-text">uncommitt：reset</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Undo-a-commit-amp-redo"><span class="toc-number">1.</span> <span class="toc-text">Undo a commit &amp; redo</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Further-Reading"><span class="toc-number">1.1.</span> <span class="toc-text">Further Reading</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%96%87%E4%BB%B6%E5%88%B0last-commit-any-commit"><span class="toc-number"></span> <span class="toc-text">添加文件到last commit&#x2F;any commit</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%88%B0last-commit"><span class="toc-number">1.</span> <span class="toc-text">添加到last commit</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%88%B0%E4%BB%BB%E6%84%8Fcommit"><span class="toc-number">2.</span> <span class="toc-text">添加到任意commit</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%91%E7%94%9FYou-must-edit-all-merge-conflicts-and-then-mark-them-as-resolved-using-git-add"><span class="toc-number">3.</span> <span class="toc-text">发生You must edit all merge conflicts and then mark them as resolved using git add</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Walter</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    loader: {
      source: {
        '[tex]/amsCd': '[tex]/amscd'
      }
    },
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        addClass: [200,() => {
          document.querySelectorAll('mjx-container:not([display=\'true\']').forEach( node => {
            const target = node.parentNode
            if (!target.classList.contains('has-jax')) {
              target.classList.add('mathjax-overflow')
            }
          })
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>